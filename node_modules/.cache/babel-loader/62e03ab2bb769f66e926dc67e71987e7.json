{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\nimport clsx from 'clsx';\nimport { getBaseProps } from '../internal/base-component';\nimport InternalAlert from '../alert/internal';\nimport InternalBox from '../box/internal';\nimport InternalContentLayout from '../content-layout/internal';\nimport styles from './styles.css.js';\nimport LiveRegion from '../internal/components/live-region';\nimport { useInternalI18n } from '../i18n/context';\nimport { useFunnel } from '../internal/analytics/hooks/use-funnel';\nimport { FunnelMetrics } from '../internal/analytics';\nexport default function InternalForm(_a) {\n  var {\n      children,\n      header,\n      errorText,\n      errorIconAriaLabel: errorIconAriaLabelOverride,\n      actions,\n      secondaryActions,\n      variant,\n      __internalRootRef\n    } = _a,\n    props = __rest(_a, [\"children\", \"header\", \"errorText\", \"errorIconAriaLabel\", \"actions\", \"secondaryActions\", \"variant\", \"__internalRootRef\"]);\n  const baseProps = getBaseProps(props);\n  const i18n = useInternalI18n('form');\n  const errorIconAriaLabel = i18n('errorIconAriaLabel', errorIconAriaLabelOverride);\n  const {\n    funnelInteractionId,\n    submissionAttempt,\n    errorCount\n  } = useFunnel();\n  useEffect(() => {\n    if (funnelInteractionId && errorText) {\n      errorCount.current++;\n      FunnelMetrics.funnelError({\n        funnelInteractionId\n      });\n      return () => {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        errorCount.current--;\n      };\n    }\n  }, [funnelInteractionId, errorText, submissionAttempt, errorCount]);\n  return React.createElement(\"div\", Object.assign({}, baseProps, {\n    ref: __internalRootRef,\n    className: clsx(styles.root, baseProps.className)\n  }), React.createElement(FormLayout, {\n    header: header && React.createElement(\"div\", {\n      className: clsx(styles.header, variant === 'full-page' && styles['full-page'])\n    }, header),\n    variant: variant\n  }, children && React.createElement(\"div\", {\n    className: styles.content\n  }, children), errorText && React.createElement(InternalBox, {\n    margin: {\n      top: 'l'\n    }\n  }, React.createElement(InternalAlert, {\n    type: \"error\",\n    statusIconAriaLabel: errorIconAriaLabel\n  }, React.createElement(\"div\", {\n    className: styles.error\n  }, errorText))), (actions || secondaryActions) && React.createElement(\"div\", {\n    className: styles.footer\n  }, React.createElement(\"div\", {\n    className: styles['actions-section']\n  }, actions && React.createElement(\"div\", {\n    className: styles.actions\n  }, actions), secondaryActions && React.createElement(\"div\", {\n    className: styles['secondary-actions']\n  }, secondaryActions))), errorText && React.createElement(LiveRegion, {\n    assertive: true\n  }, errorIconAriaLabel, \", \", errorText)));\n}\nfunction FormLayout(_ref) {\n  let {\n    children,\n    header,\n    variant\n  } = _ref;\n  return variant === 'full-page' && header ? React.createElement(InternalContentLayout, {\n    header: header\n  }, children) : React.createElement(React.Fragment, null, header, children);\n}","map":{"version":3,"mappings":"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","names":["React","useEffect","clsx","getBaseProps","InternalAlert","InternalBox","InternalContentLayout","styles","LiveRegion","useInternalI18n","useFunnel","FunnelMetrics","InternalForm","_a","children","header","errorText","errorIconAriaLabel","errorIconAriaLabelOverride","actions","secondaryActions","variant","__internalRootRef","props","baseProps","i18n","funnelInteractionId","submissionAttempt","errorCount","current","funnelError","ref","className","root","FormLayout","content","margin","top","type","statusIconAriaLabel","error","footer","assertive"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/form/lib/default/form/internal.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\nimport clsx from 'clsx';\nimport { getBaseProps } from '../internal/base-component';\nimport InternalAlert from '../alert/internal';\nimport InternalBox from '../box/internal';\nimport InternalContentLayout from '../content-layout/internal';\nimport styles from './styles.css.js';\nimport { FormLayoutProps, FormProps } from './interfaces';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport LiveRegion from '../internal/components/live-region';\nimport { useInternalI18n } from '../i18n/context';\n\nimport { useFunnel } from '../internal/analytics/hooks/use-funnel';\nimport { FunnelMetrics } from '../internal/analytics';\n\ntype InternalFormProps = FormProps & InternalBaseComponentProps;\n\nexport default function InternalForm({\n  children,\n  header,\n  errorText,\n  errorIconAriaLabel: errorIconAriaLabelOverride,\n  actions,\n  secondaryActions,\n  variant,\n  __internalRootRef,\n  ...props\n}: InternalFormProps) {\n  const baseProps = getBaseProps(props);\n  const i18n = useInternalI18n('form');\n  const errorIconAriaLabel = i18n('errorIconAriaLabel', errorIconAriaLabelOverride);\n\n  const { funnelInteractionId, submissionAttempt, errorCount } = useFunnel();\n\n  useEffect(() => {\n    if (funnelInteractionId && errorText) {\n      errorCount.current++;\n      FunnelMetrics.funnelError({ funnelInteractionId });\n      return () => {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        errorCount.current--;\n      };\n    }\n  }, [funnelInteractionId, errorText, submissionAttempt, errorCount]);\n\n  return (\n    <div {...baseProps} ref={__internalRootRef} className={clsx(styles.root, baseProps.className)}>\n      <FormLayout\n        header={\n          header && <div className={clsx(styles.header, variant === 'full-page' && styles['full-page'])}>{header}</div>\n        }\n        variant={variant}\n      >\n        {children && <div className={styles.content}>{children}</div>}\n        {errorText && (\n          <InternalBox margin={{ top: 'l' }}>\n            <InternalAlert type=\"error\" statusIconAriaLabel={errorIconAriaLabel}>\n              <div className={styles.error}>{errorText}</div>\n            </InternalAlert>\n          </InternalBox>\n        )}\n        {(actions || secondaryActions) && (\n          <div className={styles.footer}>\n            <div className={styles['actions-section']}>\n              {actions && <div className={styles.actions}>{actions}</div>}\n              {secondaryActions && <div className={styles['secondary-actions']}>{secondaryActions}</div>}\n            </div>\n          </div>\n        )}\n        {errorText && (\n          <LiveRegion assertive={true}>\n            {errorIconAriaLabel}, {errorText}\n          </LiveRegion>\n        )}\n      </FormLayout>\n    </div>\n  );\n}\n\nfunction FormLayout({ children, header, variant }: FormLayoutProps) {\n  return variant === 'full-page' && header ? (\n    <InternalContentLayout header={header}>{children}</InternalContentLayout>\n  ) : (\n    <>\n      {header}\n      {children}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}