{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useLastInteraction } from \"./use-last-interaction\";\nexport function useAutoScroll() {\n  const [activeAutoScroll, setActiveAutoScroll] = useState(\"none\");\n  const scrollIntoViewTimerRef = useRef(null);\n  const getLastInteraction = useLastInteraction();\n  // Scroll window repeatedly if activeAutoScroll=\"up\" or activeAutoScroll=\"down\".\n  useEffect(() => {\n    if (activeAutoScroll === \"none\") {\n      return;\n    }\n    const direction = activeAutoScroll === \"up\" ? -1 : 1;\n    let timer;\n    function scrollLoop() {\n      timer = setTimeout(() => {\n        window.scrollBy({\n          top: direction * 5\n        });\n        scrollLoop();\n      }, 10);\n    }\n    scrollLoop();\n    return () => clearTimeout(timer);\n  }, [activeAutoScroll]);\n  const onPointerMove = useCallback(event => {\n    const autoScrollMargin = 50;\n    if (event.clientY > window.innerHeight - autoScrollMargin) {\n      setActiveAutoScroll(\"down\");\n    } else if (event.clientY < autoScrollMargin) {\n      setActiveAutoScroll(\"up\");\n    } else {\n      setActiveAutoScroll(\"none\");\n    }\n  }, []);\n  const onPointerUp = useCallback(() => {\n    setActiveAutoScroll(\"none\");\n  }, []);\n  const addPointerEventHandlers = useCallback(() => {\n    if (getLastInteraction() === \"pointer\") {\n      window.addEventListener(\"pointermove\", onPointerMove);\n      window.addEventListener(\"pointerup\", onPointerUp);\n    }\n  }, [getLastInteraction, onPointerMove, onPointerUp]);\n  const removePointerEventHandlers = useCallback(() => {\n    window.removeEventListener(\"pointermove\", onPointerMove);\n    window.removeEventListener(\"pointerup\", onPointerUp);\n  }, [onPointerMove, onPointerUp]);\n  const scheduleActiveElementScrollIntoView = useCallback(delay => {\n    scrollIntoViewTimerRef.current && clearTimeout(scrollIntoViewTimerRef.current);\n    const activeElementBeforeDelay = document.activeElement;\n    scrollIntoViewTimerRef.current = setTimeout(() => {\n      var _a, _b;\n      if (document.activeElement && document.activeElement === activeElementBeforeDelay && getLastInteraction() === \"keyboard\") {\n        (_b = (_a = document.activeElement).scrollIntoView) === null || _b === void 0 ? void 0 : _b.call(_a, {\n          behavior: \"smooth\",\n          block: \"nearest\"\n        });\n      }\n    }, delay);\n  }, [getLastInteraction]);\n  return {\n    addPointerEventHandlers,\n    removePointerEventHandlers,\n    scheduleActiveElementScrollIntoView\n  };\n}","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","useLastInteraction","useAutoScroll","activeAutoScroll","setActiveAutoScroll","scrollIntoViewTimerRef","getLastInteraction","direction","timer","scrollLoop","setTimeout","window","scrollBy","top","clearTimeout","onPointerMove","event","autoScrollMargin","clientY","innerHeight","onPointerUp","addPointerEventHandlers","addEventListener","removePointerEventHandlers","removeEventListener","scheduleActiveElementScrollIntoView","delay","current","activeElementBeforeDelay","document","activeElement","_a","_b","scrollIntoView","call","behavior","block"],"sources":["/Users/tangyizhi/Desktop/Assignment 2/frontend/node_modules/@cloudscape-design/board-components/internal/utils/use-auto-scroll.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useLastInteraction } from \"./use-last-interaction\";\nexport function useAutoScroll() {\n    const [activeAutoScroll, setActiveAutoScroll] = useState(\"none\");\n    const scrollIntoViewTimerRef = useRef(null);\n    const getLastInteraction = useLastInteraction();\n    // Scroll window repeatedly if activeAutoScroll=\"up\" or activeAutoScroll=\"down\".\n    useEffect(() => {\n        if (activeAutoScroll === \"none\") {\n            return;\n        }\n        const direction = activeAutoScroll === \"up\" ? -1 : 1;\n        let timer;\n        function scrollLoop() {\n            timer = setTimeout(() => {\n                window.scrollBy({ top: direction * 5 });\n                scrollLoop();\n            }, 10);\n        }\n        scrollLoop();\n        return () => clearTimeout(timer);\n    }, [activeAutoScroll]);\n    const onPointerMove = useCallback((event) => {\n        const autoScrollMargin = 50;\n        if (event.clientY > window.innerHeight - autoScrollMargin) {\n            setActiveAutoScroll(\"down\");\n        }\n        else if (event.clientY < autoScrollMargin) {\n            setActiveAutoScroll(\"up\");\n        }\n        else {\n            setActiveAutoScroll(\"none\");\n        }\n    }, []);\n    const onPointerUp = useCallback(() => {\n        setActiveAutoScroll(\"none\");\n    }, []);\n    const addPointerEventHandlers = useCallback(() => {\n        if (getLastInteraction() === \"pointer\") {\n            window.addEventListener(\"pointermove\", onPointerMove);\n            window.addEventListener(\"pointerup\", onPointerUp);\n        }\n    }, [getLastInteraction, onPointerMove, onPointerUp]);\n    const removePointerEventHandlers = useCallback(() => {\n        window.removeEventListener(\"pointermove\", onPointerMove);\n        window.removeEventListener(\"pointerup\", onPointerUp);\n    }, [onPointerMove, onPointerUp]);\n    const scheduleActiveElementScrollIntoView = useCallback((delay) => {\n        scrollIntoViewTimerRef.current && clearTimeout(scrollIntoViewTimerRef.current);\n        const activeElementBeforeDelay = document.activeElement;\n        scrollIntoViewTimerRef.current = setTimeout(() => {\n            var _a, _b;\n            if (document.activeElement &&\n                document.activeElement === activeElementBeforeDelay &&\n                getLastInteraction() === \"keyboard\") {\n                (_b = (_a = document.activeElement).scrollIntoView) === null || _b === void 0 ? void 0 : _b.call(_a, { behavior: \"smooth\", block: \"nearest\" });\n            }\n        }, delay);\n    }, [getLastInteraction]);\n    return { addPointerEventHandlers, removePointerEventHandlers, scheduleActiveElementScrollIntoView };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}