{"ast":null,"code":"import _defineProperty from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport clsx from 'clsx';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { KeyCode } from '../internal/keycode';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { InternalButton } from '../button/internal';\nimport InternalHeader from '../header/internal';\nimport Portal from '../internal/components/portal';\nimport { useContainerBreakpoints } from '../internal/hooks/container-queries';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { FormFieldContext } from '../internal/context/form-field-context';\nimport { disableBodyScrolling, enableBodyScrolling } from './body-scroll';\nimport styles from './styles.css.js';\nimport FocusLock from '../internal/components/focus-lock';\nimport { useInternalI18n } from '../i18n/context';\nimport { useIntersectionObserver } from '../internal/hooks/use-intersection-observer';\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\nimport { ButtonContext } from '../internal/context/button-context';\nimport { FunnelNameSelectorContext } from '../internal/analytics/context/analytics-context';\nimport { ModalContext } from '../internal/context/modal-context';\nimport { useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nexport default function InternalModal(_a) {\n  var modalRoot = _a.modalRoot,\n    rest = __rest(_a, [\"modalRoot\"]);\n  return React.createElement(Portal, {\n    container: modalRoot\n  }, React.createElement(InnerModal, Object.assign({}, rest)));\n}\n// Separate component to prevent the Portal from getting in the way of refs, as it needs extra cycles to render the inner components.\n// useContainerQuery needs its targeted element to exist on the first render in order to work properly.\nfunction InnerModal(_a) {\n  var _b;\n  var size = _a.size,\n    visible = _a.visible,\n    header = _a.header,\n    children = _a.children,\n    footer = _a.footer,\n    disableContentPaddings = _a.disableContentPaddings,\n    onDismiss = _a.onDismiss,\n    _a$__internalRootRef = _a.__internalRootRef,\n    __internalRootRef = _a$__internalRootRef === void 0 ? null : _a$__internalRootRef,\n    rest = __rest(_a, [\"size\", \"visible\", \"header\", \"children\", \"footer\", \"disableContentPaddings\", \"onDismiss\", \"__internalRootRef\"]);\n  var instanceUniqueId = useUniqueId();\n  var headerId = \"\".concat(rest.id || instanceUniqueId, \"-header\");\n  var lastMouseDownElementRef = useRef(null);\n  var _useContainerBreakpoi = useContainerBreakpoints(['xs']),\n    _useContainerBreakpoi2 = _slicedToArray(_useContainerBreakpoi, 2),\n    breakpoint = _useContainerBreakpoi2[0],\n    breakpointsRef = _useContainerBreakpoi2[1];\n  var i18n = useInternalI18n('modal');\n  var closeAriaLabel = i18n('closeAriaLabel', rest.closeAriaLabel);\n  var refObject = useRef(null);\n  var mergedRef = useMergeRefs(breakpointsRef, refObject, __internalRootRef);\n  var isRefresh = useVisualRefresh();\n  var baseProps = getBaseProps(rest);\n  // enable body scroll and restore focus if unmounting while visible\n  useEffect(function () {\n    return function () {\n      enableBodyScrolling();\n    };\n  }, []);\n  // enable / disable body scroll\n  useEffect(function () {\n    if (visible) {\n      disableBodyScrolling();\n    } else {\n      enableBodyScrolling();\n    }\n  }, [visible]);\n  // Because we hide the element with styles (and not actually detach it from DOM), we need to scroll to top\n  useEffect(function () {\n    if (visible && refObject.current) {\n      refObject.current.scrollTop = 0;\n    }\n  }, [visible]);\n  var dismiss = function dismiss(reason) {\n    return fireNonCancelableEvent(onDismiss, {\n      reason: reason\n    });\n  };\n  var onOverlayMouseDown = function onOverlayMouseDown(event) {\n    lastMouseDownElementRef.current = event.target;\n  };\n  var onOverlayClick = function onOverlayClick(event) {\n    var overlay = refObject.current;\n    var lastClicked = lastMouseDownElementRef.current;\n    if (event.target === overlay && lastClicked === overlay) {\n      dismiss('overlay');\n    }\n  };\n  var onCloseButtonClick = function onCloseButtonClick() {\n    return dismiss('closeButton');\n  };\n  var escKeyHandler = function escKeyHandler(event) {\n    if (event.keyCode === KeyCode.escape) {\n      dismiss('keyboard');\n    }\n  };\n  // We use an empty div element at the end of the content slot as a sentinel\n  // to detect when the user has scrolled to the bottom.\n  var _useIntersectionObser = useIntersectionObserver(),\n    stickySentinelRef = _useIntersectionObser.ref,\n    footerStuck = _useIntersectionObser.isIntersecting;\n  // Add extra scroll padding to account for the height of the sticky footer,\n  // to prevent it from covering focused elements.\n  var _useContainerQuery = useContainerQuery(function (rect) {\n      return rect.borderBoxHeight;\n    }),\n    _useContainerQuery2 = _slicedToArray(_useContainerQuery, 2),\n    footerHeight = _useContainerQuery2[0],\n    footerRef = _useContainerQuery2[1];\n  var _useFunnelSubStep = useFunnelSubStep(),\n    subStepRef = _useFunnelSubStep.subStepRef;\n  return React.createElement(FunnelNameSelectorContext.Provider, {\n    value: \".\".concat(styles['header--text'])\n  }, React.createElement(ButtonContext.Provider, {\n    value: {\n      onClick: function onClick() {}\n    }\n  }, React.createElement(FormFieldContext.Provider, {\n    value: {}\n  }, React.createElement(ModalContext.Provider, {\n    value: {\n      isInModal: true\n    }\n  }, React.createElement(\"div\", Object.assign({}, baseProps, {\n    className: clsx(styles.root, _defineProperty({}, styles.hidden, !visible), baseProps.className, isRefresh && styles.refresh),\n    role: \"dialog\",\n    \"aria-modal\": true,\n    \"aria-labelledby\": headerId,\n    onMouseDown: onOverlayMouseDown,\n    onClick: onOverlayClick,\n    ref: mergedRef,\n    style: footerHeight ? {\n      scrollPaddingBottom: footerHeight\n    } : undefined,\n    \"data-awsui-referrer-id\": (_b = subStepRef.current) === null || _b === void 0 ? void 0 : _b.id\n  }), React.createElement(FocusLock, {\n    disabled: !visible,\n    autoFocus: true,\n    restoreFocus: true,\n    className: styles['focus-lock']\n  }, React.createElement(\"div\", {\n    className: clsx(styles.dialog, styles[size], styles[\"breakpoint-\".concat(breakpoint)], isRefresh && styles.refresh),\n    onKeyDown: escKeyHandler\n  }, React.createElement(\"div\", {\n    className: styles.container\n  }, React.createElement(\"div\", {\n    className: styles.header\n  }, React.createElement(InternalHeader, {\n    variant: \"h2\",\n    __disableActionsWrapping: true,\n    actions: React.createElement(InternalButton, {\n      ariaLabel: closeAriaLabel,\n      className: styles['dismiss-control'],\n      variant: \"modal-dismiss\",\n      iconName: \"close\",\n      formAction: \"none\",\n      onClick: onCloseButtonClick\n    })\n  }, React.createElement(\"span\", {\n    id: headerId,\n    className: styles['header--text']\n  }, header))), React.createElement(\"div\", {\n    className: clsx(styles.content, _defineProperty({}, styles['no-paddings'], disableContentPaddings))\n  }, children, React.createElement(\"div\", {\n    ref: stickySentinelRef\n  })), footer && React.createElement(\"div\", {\n    ref: footerRef,\n    className: clsx(styles.footer, footerStuck && styles['footer--stuck'])\n  }, footer)))))))));\n}","map":{"version":3,"mappings":"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","names":["React","useEffect","useRef","useMergeRefs","clsx","getBaseProps","fireNonCancelableEvent","KeyCode","useUniqueId","InternalButton","InternalHeader","Portal","useContainerBreakpoints","useVisualRefresh","FormFieldContext","disableBodyScrolling","enableBodyScrolling","styles","FocusLock","useInternalI18n","useIntersectionObserver","useContainerQuery","ButtonContext","FunnelNameSelectorContext","ModalContext","useFunnelSubStep","InternalModal","_a","modalRoot","rest","container","InnerModal","size","visible","header","children","footer","disableContentPaddings","onDismiss","__internalRootRef","instanceUniqueId","headerId","id","lastMouseDownElementRef","breakpoint","breakpointsRef","i18n","closeAriaLabel","refObject","mergedRef","isRefresh","baseProps","current","scrollTop","dismiss","reason","onOverlayMouseDown","event","target","onOverlayClick","overlay","lastClicked","onCloseButtonClick","escKeyHandler","keyCode","escape","stickySentinelRef","ref","footerStuck","isIntersecting","rect","borderBoxHeight","footerHeight","footerRef","subStepRef","Provider","value","onClick","isInModal","className","root","hidden","refresh","role","onMouseDown","style","scrollPaddingBottom","undefined","disabled","autoFocus","restoreFocus","dialog","onKeyDown","variant","__disableActionsWrapping","actions","ariaLabel","iconName","formAction","content"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/modal/lib/default/modal/internal.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport clsx from 'clsx';\n\nimport { getBaseProps } from '../internal/base-component';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { KeyCode } from '../internal/keycode';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { InternalButton } from '../button/internal';\nimport InternalHeader from '../header/internal';\nimport Portal from '../internal/components/portal';\nimport { useContainerBreakpoints } from '../internal/hooks/container-queries';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { FormFieldContext } from '../internal/context/form-field-context';\n\nimport { disableBodyScrolling, enableBodyScrolling } from './body-scroll';\nimport { ModalProps } from './interfaces';\nimport styles from './styles.css.js';\nimport { SomeRequired } from '../internal/types';\nimport FocusLock from '../internal/components/focus-lock';\nimport { useInternalI18n } from '../i18n/context';\nimport { useIntersectionObserver } from '../internal/hooks/use-intersection-observer';\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\nimport { ButtonContext } from '../internal/context/button-context';\nimport { FunnelNameSelectorContext } from '../internal/analytics/context/analytics-context';\nimport { ModalContext } from '../internal/context/modal-context';\nimport { useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\n\ntype InternalModalProps = SomeRequired<ModalProps, 'size'> & InternalBaseComponentProps;\n\nexport default function InternalModal({ modalRoot, ...rest }: InternalModalProps) {\n  return (\n    <Portal container={modalRoot}>\n      <InnerModal {...rest} />\n    </Portal>\n  );\n}\n\n// Separate component to prevent the Portal from getting in the way of refs, as it needs extra cycles to render the inner components.\n// useContainerQuery needs its targeted element to exist on the first render in order to work properly.\nfunction InnerModal({\n  size,\n  visible,\n  header,\n  children,\n  footer,\n  disableContentPaddings,\n  onDismiss,\n  __internalRootRef = null,\n  ...rest\n}: InternalModalProps) {\n  const instanceUniqueId = useUniqueId();\n  const headerId = `${rest.id || instanceUniqueId}-header`;\n  const lastMouseDownElementRef = useRef<HTMLElement | null>(null);\n  const [breakpoint, breakpointsRef] = useContainerBreakpoints(['xs']);\n\n  const i18n = useInternalI18n('modal');\n  const closeAriaLabel = i18n('closeAriaLabel', rest.closeAriaLabel);\n\n  const refObject = useRef<HTMLDivElement>(null);\n  const mergedRef = useMergeRefs(breakpointsRef, refObject, __internalRootRef);\n\n  const isRefresh = useVisualRefresh();\n\n  const baseProps = getBaseProps(rest);\n\n  // enable body scroll and restore focus if unmounting while visible\n  useEffect(() => {\n    return () => {\n      enableBodyScrolling();\n    };\n  }, []);\n\n  // enable / disable body scroll\n  useEffect(() => {\n    if (visible) {\n      disableBodyScrolling();\n    } else {\n      enableBodyScrolling();\n    }\n  }, [visible]);\n\n  // Because we hide the element with styles (and not actually detach it from DOM), we need to scroll to top\n  useEffect(() => {\n    if (visible && refObject.current) {\n      refObject.current.scrollTop = 0;\n    }\n  }, [visible]);\n\n  const dismiss = (reason: string) => fireNonCancelableEvent(onDismiss, { reason });\n\n  const onOverlayMouseDown = (event: React.MouseEvent) => {\n    lastMouseDownElementRef.current = event.target as HTMLElement;\n  };\n  const onOverlayClick = (event: React.MouseEvent) => {\n    const overlay = refObject.current;\n    const lastClicked = lastMouseDownElementRef.current;\n\n    if (event.target === overlay && lastClicked === overlay) {\n      dismiss('overlay');\n    }\n  };\n  const onCloseButtonClick = () => dismiss('closeButton');\n  const escKeyHandler = (event: React.KeyboardEvent) => {\n    if (event.keyCode === KeyCode.escape) {\n      dismiss('keyboard');\n    }\n  };\n\n  // We use an empty div element at the end of the content slot as a sentinel\n  // to detect when the user has scrolled to the bottom.\n  const { ref: stickySentinelRef, isIntersecting: footerStuck } = useIntersectionObserver();\n\n  // Add extra scroll padding to account for the height of the sticky footer,\n  // to prevent it from covering focused elements.\n  const [footerHeight, footerRef] = useContainerQuery(rect => rect.borderBoxHeight);\n  const { subStepRef } = useFunnelSubStep();\n\n  return (\n    <FunnelNameSelectorContext.Provider value={`.${styles['header--text']}`}>\n      <ButtonContext.Provider value={{ onClick: () => {} }}>\n        <FormFieldContext.Provider value={{}}>\n          <ModalContext.Provider value={{ isInModal: true }}>\n            <div\n              {...baseProps}\n              className={clsx(\n                styles.root,\n                { [styles.hidden]: !visible },\n                baseProps.className,\n                isRefresh && styles.refresh\n              )}\n              role=\"dialog\"\n              aria-modal={true}\n              aria-labelledby={headerId}\n              onMouseDown={onOverlayMouseDown}\n              onClick={onOverlayClick}\n              ref={mergedRef}\n              style={footerHeight ? { scrollPaddingBottom: footerHeight } : undefined}\n              data-awsui-referrer-id={subStepRef.current?.id}\n            >\n              <FocusLock disabled={!visible} autoFocus={true} restoreFocus={true} className={styles['focus-lock']}>\n                <div\n                  className={clsx(\n                    styles.dialog,\n                    styles[size],\n                    styles[`breakpoint-${breakpoint}`],\n                    isRefresh && styles.refresh\n                  )}\n                  onKeyDown={escKeyHandler}\n                >\n                  <div className={styles.container}>\n                    <div className={styles.header}>\n                      <InternalHeader\n                        variant=\"h2\"\n                        __disableActionsWrapping={true}\n                        actions={\n                          <InternalButton\n                            ariaLabel={closeAriaLabel}\n                            className={styles['dismiss-control']}\n                            variant=\"modal-dismiss\"\n                            iconName=\"close\"\n                            formAction=\"none\"\n                            onClick={onCloseButtonClick}\n                          />\n                        }\n                      >\n                        <span id={headerId} className={styles['header--text']}>\n                          {header}\n                        </span>\n                      </InternalHeader>\n                    </div>\n                    <div className={clsx(styles.content, { [styles['no-paddings']]: disableContentPaddings })}>\n                      {children}\n                      <div ref={stickySentinelRef} />\n                    </div>\n                    {footer && (\n                      <div ref={footerRef} className={clsx(styles.footer, footerStuck && styles['footer--stuck'])}>\n                        {footer}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </FocusLock>\n            </div>\n          </ModalContext.Provider>\n        </FormFieldContext.Provider>\n      </ButtonContext.Provider>\n    </FunnelNameSelectorContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}