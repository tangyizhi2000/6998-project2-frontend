{"ast":null,"code":"import _slicedToArray from\"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as React from\"react\";import ContentLayout from\"@cloudscape-design/components/content-layout\";import Container from\"@cloudscape-design/components/container\";import Header from\"@cloudscape-design/components/header\";import SpaceBetween from\"@cloudscape-design/components/space-between\";import Link from\"@cloudscape-design/components/link\";import Button from\"@cloudscape-design/components/button\";import Alert from\"@cloudscape-design/components/alert\";import FileUpload from\"@cloudscape-design/components/file-upload\";import FormField from\"@cloudscape-design/components/form-field\";import AttributeEditor from\"@cloudscape-design/components/attribute-editor\";import Input from\"@cloudscape-design/components/input\";import Tabs from\"@cloudscape-design/components/tabs\";import AttributeEditorExample from\"./ChangableAttributeEditor\";import TextContent from\"@cloudscape-design/components/text-content\";import Cards from\"@cloudscape-design/components/cards\";import Box from\"@cloudscape-design/components/box\";import logoS3 from'./logoS3.png';import logoCF from'./logoCloudFront.png';import SpeechRecognition,{useSpeechRecognition}from\"react-speech-recognition\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchPhotos(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),query=_React$useState2[0],setQuery=_React$useState2[1];var _useSpeechRecognition=useSpeechRecognition(),transcript=_useSpeechRecognition.transcript,resetTranscript=_useSpeechRecognition.resetTranscript;var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),items=_React$useState4[0],setItems=_React$useState4[1];function startRecording(){resetTranscript();SpeechRecognition.startListening({continuous:true});}function stopRecording(){SpeechRecognition.stopListening();setQuery(transcript);resetTranscript();}function sendRequest(){// send requests to backend\nvar url=\"https://aqc18ezxgh.execute-api.us-east-1.amazonaws.com/GET_OK/search?q=\";url+=query;console.log(\"sending requests to\",url);var requestOptions={method:'GET',headers:{'Content-Type':'application/json'}};fetch(url,requestOptions).then(function(response){return response.json();}).then(function(json_response){var all_photos=[];console.log(Object.keys(json_response),json_response['list']);for(var i=0;i<json_response['list'].length;++i){all_photos.push({name:\"\",description:json_response['list'][i]});}setItems(all_photos);console.log(all_photos,items);});};return/*#__PURE__*/_jsxs(SpaceBetween,{size:\"m\",children:[/*#__PURE__*/_jsx(TextContent,{children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Please enter your search query, or use the button below to transcribe from voice\"})})}),/*#__PURE__*/_jsx(Input,{onChange:function onChange(_ref){var detail=_ref.detail;return setQuery(detail.value);},value:query,placeholder:\"Please enter your search query\",type:\"search\"}),/*#__PURE__*/_jsxs(SpaceBetween,{size:\"m\",direction:\"horizontal\",children:[/*#__PURE__*/_jsx(Button,{onClick:startRecording,children:\"Start Recording\"}),/*#__PURE__*/_jsx(Button,{onClick:stopRecording,children:\"Stop Recording\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:sendRequest,children:\"Submit Search Query\"}),/*#__PURE__*/_jsx(TextContent,{children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Search Results are displayed below\"})})}),/*#__PURE__*/_jsx(Cards,{cardDefinition:{header:function header(item){return item.name;},sections:[{id:\"description\",content:function content(item){return/*#__PURE__*/_jsx(\"img\",{src:item.description,width:\"100\",height:\"100\"});}}]},cardsPerRow:[{cards:1},{minWidth:500,cards:2}],items:items,loadingText:\"Loading photos\",empty:/*#__PURE__*/_jsx(Box,{margin:{vertical:\"xs\"},textAlign:\"center\",color:\"inherit\",children:/*#__PURE__*/_jsx(SpaceBetween,{size:\"m\",children:/*#__PURE__*/_jsx(\"b\",{children:\"No Photos Found\"})})})})]});}","map":{"version":3,"names":["React","ContentLayout","Container","Header","SpaceBetween","Link","Button","Alert","FileUpload","FormField","AttributeEditor","Input","Tabs","AttributeEditorExample","TextContent","Cards","Box","logoS3","logoCF","SpeechRecognition","useSpeechRecognition","SearchPhotos","useState","query","setQuery","transcript","resetTranscript","items","setItems","startRecording","startListening","continuous","stopRecording","stopListening","sendRequest","url","console","log","requestOptions","method","headers","fetch","then","response","json","json_response","all_photos","Object","keys","i","length","push","name","description","detail","value","header","item","sections","id","content","cards","minWidth","vertical"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/src/searchPhotos.js"],"sourcesContent":["import * as React from \"react\";\nimport ContentLayout from \"@cloudscape-design/components/content-layout\";\nimport Container from \"@cloudscape-design/components/container\";\nimport Header from \"@cloudscape-design/components/header\";\nimport SpaceBetween from \"@cloudscape-design/components/space-between\";\nimport Link from \"@cloudscape-design/components/link\";\nimport Button from \"@cloudscape-design/components/button\";\nimport Alert from \"@cloudscape-design/components/alert\";\nimport FileUpload from \"@cloudscape-design/components/file-upload\";\nimport FormField from \"@cloudscape-design/components/form-field\";\nimport AttributeEditor from \"@cloudscape-design/components/attribute-editor\";\nimport Input from \"@cloudscape-design/components/input\";\nimport Tabs from \"@cloudscape-design/components/tabs\";\nimport AttributeEditorExample from \"./ChangableAttributeEditor\";\nimport TextContent from \"@cloudscape-design/components/text-content\";\nimport Cards from \"@cloudscape-design/components/cards\";\nimport Box from \"@cloudscape-design/components/box\";\n\nimport logoS3 from './logoS3.png';\nimport logoCF from './logoCloudFront.png';\n\nimport SpeechRecognition, { useSpeechRecognition } from \"react-speech-recognition\";\n\n\nexport default function SearchPhotos() {\n    const [query, setQuery] = React.useState(\"\");\n    const { transcript, resetTranscript } = useSpeechRecognition();\n    const [items, setItems] = React.useState([]);\n\n    function startRecording() {\n        resetTranscript();\n        SpeechRecognition.startListening({\n            continuous: true,\n        });\n    }\n    function stopRecording() {\n        SpeechRecognition.stopListening();\n        setQuery(transcript);\n        resetTranscript();\n    }\n\n    function sendRequest() {\n        // send requests to backend\n        var url = \"https://aqc18ezxgh.execute-api.us-east-1.amazonaws.com/GET_OK/search?q=\";\n        url += query;\n        console.log(\"sending requests to\", url);\n        const requestOptions = {\n          method: 'GET',\n          headers: { 'Content-Type': 'application/json' },\n        };\n        fetch(url, requestOptions)\n            .then((response) => {\n                return response.json();\n            })\n            .then((json_response)=>{\n                var all_photos = [];\n                console.log(Object.keys(json_response), json_response['list']);\n                for(var i = 0; i < json_response['list'].length; ++i){\n                    all_photos.push({\n                        name: \"\",\n                        description: json_response['list'][i],\n                    });\n                }\n                setItems(all_photos)\n                console.log(all_photos, items);\n            });\n    };\n\n    return (\n        <SpaceBetween size='m'>\n            <TextContent>\n                <p>\n                    <strong>Please enter your search query, or use the button below to transcribe from voice</strong>\n                </p>\n            </TextContent>\n            <Input\n                onChange={({ detail }) => setQuery(detail.value)}\n                value={query}\n                placeholder=\"Please enter your search query\"\n                type=\"search\"\n            />\n            <SpaceBetween size=\"m\" direction=\"horizontal\">\n                <Button onClick={startRecording}>Start Recording</Button>\n                <Button onClick={stopRecording}>Stop Recording</Button>\n            </SpaceBetween>\n            <Button variant=\"primary\" onClick={sendRequest}>Submit Search Query</Button>\n            <TextContent>\n                <p>\n                    <strong>Search Results are displayed below</strong>\n                </p>\n            </TextContent>\n            <Cards\n                cardDefinition={{\n                    header: item => (item.name),\n                    sections: [\n                    {\n                        id: \"description\",\n                        content: item => (<img src={item.description} width=\"100\" height=\"100\"/>)\n                    },\n                    ]\n                }}\n                cardsPerRow={[\n                    { cards: 1 },\n                    { minWidth: 500, cards: 2 }\n                ]}\n                items={items}\n                loadingText=\"Loading photos\"\n                empty={\n                    <Box\n                    margin={{ vertical: \"xs\" }}\n                    textAlign=\"center\"\n                    color=\"inherit\"\n                    >\n                    <SpaceBetween size=\"m\">\n                        <b>No Photos Found</b>\n                    </SpaceBetween>\n                    </Box>\n                }\n            />\n        </SpaceBetween>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}