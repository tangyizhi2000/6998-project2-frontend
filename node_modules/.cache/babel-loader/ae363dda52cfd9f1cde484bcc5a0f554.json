{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { getAceTheme, getDefaultConfig, getDefaultTheme } from './util';\nexport function useEditor(ace, loading) {\n  const editorRef = useRef(null);\n  const [editor, setEditor] = useState(null);\n  useEffect(() => {\n    const elem = editorRef.current;\n    if (!ace || !elem) {\n      return;\n    }\n    const config = getDefaultConfig(ace);\n    setEditor(ace.edit(elem, Object.assign(Object.assign({}, config), {\n      theme: getAceTheme(getDefaultTheme(elem))\n    })));\n  }, [ace, loading]);\n  return {\n    editorRef,\n    editor\n  };\n}\nexport function useSyncEditorLabels(editor, _ref) {\n  let {\n    controlId,\n    ariaLabel,\n    ariaLabelledby,\n    ariaDescribedby\n  } = _ref;\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    const {\n      textarea\n    } = editor.renderer;\n    if (!textarea) {\n      return;\n    }\n    const updateAttribute = (attribute, value) => value ? textarea.setAttribute(attribute, value) : textarea.removeAttribute(attribute);\n    updateAttribute('id', controlId);\n    updateAttribute('aria-label', ariaLabel);\n    updateAttribute('aria-labelledby', ariaLabelledby);\n    updateAttribute('aria-describedby', ariaDescribedby);\n  }, [ariaLabel, ariaDescribedby, ariaLabelledby, controlId, editor]);\n}\nexport function useSyncEditorSize(editor, _ref2) {\n  let {\n    width,\n    height\n  } = _ref2;\n  useEffect(() => {\n    editor === null || editor === void 0 ? void 0 : editor.resize();\n  }, [editor, width, height]);\n  const onResize = useCallback(() => {\n    editor === null || editor === void 0 ? void 0 : editor.resize();\n  }, [editor]);\n  return {\n    onResize\n  };\n}\nexport function useSyncEditorValue(editor, value) {\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    if (value === editor.getValue()) {\n      return;\n    }\n    const pos = editor.session.selection.toJSON();\n    editor.setValue(value, -1);\n    editor.session.selection.fromJSON(pos);\n  }, [editor, value]);\n}\nexport function useSyncEditorLanguage(editor, language) {\n  useEffect(() => {\n    editor === null || editor === void 0 ? void 0 : editor.session.setMode(`ace/mode/${language}`);\n  }, [editor, language]);\n}\nexport function useSyncEditorWrapLines(editor, wrapLines) {\n  useEffect(() => {\n    editor === null || editor === void 0 ? void 0 : editor.session.setUseWrapMode(wrapLines !== null && wrapLines !== void 0 ? wrapLines : true);\n  }, [editor, wrapLines]);\n}\nexport function useSyncEditorTheme(editor, theme) {\n  useEffect(() => {\n    editor === null || editor === void 0 ? void 0 : editor.setTheme(getAceTheme(theme));\n  }, [editor, theme]);\n}","map":{"version":3,"mappings":"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","names":["useCallback","useEffect","useRef","useState","getAceTheme","getDefaultConfig","getDefaultTheme","useEditor","ace","loading","editorRef","editor","setEditor","elem","current","config","edit","theme","useSyncEditorLabels","controlId","ariaLabel","ariaLabelledby","ariaDescribedby","textarea","renderer","updateAttribute","attribute","value","setAttribute","removeAttribute","useSyncEditorSize","width","height","resize","onResize","useSyncEditorValue","getValue","pos","session","selection","toJSON","setValue","fromJSON","useSyncEditorLanguage","language","setMode","useSyncEditorWrapLines","wrapLines","setUseWrapMode","useSyncEditorTheme","setTheme"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/code-editor/lib/default/code-editor/use-editor.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Ace } from 'ace-builds';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { getAceTheme, getDefaultConfig, getDefaultTheme } from './util';\nimport { CodeEditorProps } from './interfaces';\n\nexport function useEditor(ace: any, loading?: boolean) {\n  const editorRef = useRef<HTMLDivElement>(null);\n  const [editor, setEditor] = useState<null | Ace.Editor>(null);\n\n  useEffect(() => {\n    const elem = editorRef.current;\n    if (!ace || !elem) {\n      return;\n    }\n    const config = getDefaultConfig(ace);\n    setEditor(\n      ace.edit(elem, {\n        ...config,\n        theme: getAceTheme(getDefaultTheme(elem)),\n      })\n    );\n  }, [ace, loading]);\n\n  return { editorRef, editor };\n}\n\nexport function useSyncEditorLabels(\n  editor: null | Ace.Editor,\n  {\n    controlId,\n    ariaLabel,\n    ariaLabelledby,\n    ariaDescribedby,\n  }: { controlId?: string; ariaLabel?: string; ariaLabelledby?: string; ariaDescribedby?: string }\n) {\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    const { textarea } = editor.renderer as unknown as { textarea: HTMLTextAreaElement };\n    if (!textarea) {\n      return;\n    }\n    const updateAttribute = (attribute: string, value: string | undefined) =>\n      value ? textarea.setAttribute(attribute, value) : textarea.removeAttribute(attribute);\n    updateAttribute('id', controlId);\n    updateAttribute('aria-label', ariaLabel);\n    updateAttribute('aria-labelledby', ariaLabelledby);\n    updateAttribute('aria-describedby', ariaDescribedby);\n  }, [ariaLabel, ariaDescribedby, ariaLabelledby, controlId, editor]);\n}\n\nexport function useSyncEditorSize(\n  editor: null | Ace.Editor,\n  { width, height }: { width?: null | number; height?: null | number }\n) {\n  useEffect(() => {\n    editor?.resize();\n  }, [editor, width, height]);\n\n  const onResize = useCallback(() => {\n    editor?.resize();\n  }, [editor]);\n\n  return { onResize };\n}\n\nexport function useSyncEditorValue(editor: null | Ace.Editor, value: string) {\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    if (value === editor.getValue()) {\n      return;\n    }\n    const pos = editor.session.selection.toJSON();\n    editor.setValue(value, -1);\n    editor.session.selection.fromJSON(pos);\n  }, [editor, value]);\n}\n\nexport function useSyncEditorLanguage(editor: null | Ace.Editor, language: string) {\n  useEffect(() => {\n    editor?.session.setMode(`ace/mode/${language}`);\n  }, [editor, language]);\n}\n\nexport function useSyncEditorWrapLines(editor: null | Ace.Editor, wrapLines?: boolean) {\n  useEffect(() => {\n    editor?.session.setUseWrapMode(wrapLines ?? true);\n  }, [editor, wrapLines]);\n}\n\nexport function useSyncEditorTheme(editor: null | Ace.Editor, theme: CodeEditorProps.Theme) {\n  useEffect(() => {\n    editor?.setTheme(getAceTheme(theme));\n  }, [editor, theme]);\n}\n"]},"metadata":{},"sourceType":"module"}