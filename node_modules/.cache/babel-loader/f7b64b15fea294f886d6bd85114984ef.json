{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __rest } from \"tslib\";\nimport React, { useRef, useState, useImperativeHandle, useEffect } from 'react';\nimport Dropdown from '../dropdown';\nimport { useFormFieldContext } from '../../context/form-field-context';\nimport { getBaseProps } from '../../base-component';\nimport { fireCancelableEvent, fireNonCancelableEvent } from '../../events';\nimport InternalInput from '../../../input/internal';\nimport { KeyCode } from '../../keycode';\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nconst AutosuggestInput = React.forwardRef((_a, ref) => {\n  var {\n      value,\n      onChange,\n      onBlur,\n      onFocus,\n      onKeyUp,\n      onKeyDown,\n      name,\n      placeholder,\n      disabled,\n      readOnly,\n      autoFocus,\n      ariaLabel,\n      ariaRequired,\n      disableBrowserAutocorrect = false,\n      expandToViewport,\n      ariaControls,\n      ariaActivedescendant,\n      clearAriaLabel,\n      dropdownExpanded = true,\n      dropdownContentKey,\n      dropdownContentFocusable = false,\n      dropdownContent = null,\n      dropdownFooter = null,\n      dropdownWidth,\n      loopFocus,\n      onCloseDropdown,\n      onDelayedInput,\n      onPressArrowDown,\n      onPressArrowUp,\n      onPressEnter,\n      __internalRootRef\n    } = _a,\n    restProps = __rest(_a, [\"value\", \"onChange\", \"onBlur\", \"onFocus\", \"onKeyUp\", \"onKeyDown\", \"name\", \"placeholder\", \"disabled\", \"readOnly\", \"autoFocus\", \"ariaLabel\", \"ariaRequired\", \"disableBrowserAutocorrect\", \"expandToViewport\", \"ariaControls\", \"ariaActivedescendant\", \"clearAriaLabel\", \"dropdownExpanded\", \"dropdownContentKey\", \"dropdownContentFocusable\", \"dropdownContent\", \"dropdownFooter\", \"dropdownWidth\", \"loopFocus\", \"onCloseDropdown\", \"onDelayedInput\", \"onPressArrowDown\", \"onPressArrowUp\", \"onPressEnter\", \"__internalRootRef\"]);\n  const baseProps = getBaseProps(restProps);\n  const formFieldContext = useFormFieldContext(restProps);\n  const inputRef = useRef(null);\n  const dropdownContentRef = useRef(null);\n  const dropdownFooterRef = useRef(null);\n  const preventOpenOnFocusRef = useRef(false);\n  const preventCloseOnBlurRef = useRef(false);\n  const [open, setOpen] = useState(false);\n  const openDropdown = () => !readOnly && setOpen(true);\n  const closeDropdown = () => {\n    setOpen(false);\n    fireNonCancelableEvent(onCloseDropdown, null);\n  };\n  useImperativeHandle(ref, () => ({\n    focus(options) {\n      var _a;\n      if (options === null || options === void 0 ? void 0 : options.preventDropdown) {\n        preventOpenOnFocusRef.current = true;\n      }\n      (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    select() {\n      var _a;\n      (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.select();\n    },\n    open: openDropdown,\n    close: closeDropdown\n  }));\n  const handleBlur = () => {\n    if (!preventCloseOnBlurRef.current) {\n      closeDropdown();\n      fireNonCancelableEvent(onBlur, null);\n    }\n  };\n  const handleFocus = () => {\n    if (!preventOpenOnFocusRef.current) {\n      openDropdown();\n      fireNonCancelableEvent(onFocus, null);\n    }\n    preventOpenOnFocusRef.current = false;\n  };\n  const fireKeydown = event => fireCancelableEvent(onKeyDown, event.detail, event);\n  const handleKeyDown = event => {\n    switch (event.detail.keyCode) {\n      case KeyCode.down:\n        {\n          onPressArrowDown === null || onPressArrowDown === void 0 ? void 0 : onPressArrowDown();\n          openDropdown();\n          event.preventDefault();\n          break;\n        }\n      case KeyCode.up:\n        {\n          onPressArrowUp === null || onPressArrowUp === void 0 ? void 0 : onPressArrowUp();\n          openDropdown();\n          event.preventDefault();\n          break;\n        }\n      case KeyCode.enter:\n        {\n          if (open) {\n            if (!(onPressEnter === null || onPressEnter === void 0 ? void 0 : onPressEnter())) {\n              closeDropdown();\n            }\n            event.preventDefault();\n          }\n          fireKeydown(event);\n          break;\n        }\n      case KeyCode.escape:\n        {\n          if (open) {\n            closeDropdown();\n          } else if (value) {\n            fireNonCancelableEvent(onChange, {\n              value: ''\n            });\n          }\n          event.preventDefault();\n          fireKeydown(event);\n          break;\n        }\n      default:\n        {\n          fireKeydown(event);\n        }\n    }\n  };\n  const handleChange = value => {\n    openDropdown();\n    fireNonCancelableEvent(onChange, {\n      value\n    });\n  };\n  const handleDelayedInput = value => {\n    fireNonCancelableEvent(onDelayedInput, {\n      value\n    });\n  };\n  const handleDropdownMouseDown = event => {\n    // Prevent currently focused element from losing focus.\n    if (!dropdownContentFocusable) {\n      event.preventDefault();\n    }\n    // Prevent closing dropdown on click inside.\n    else {\n      preventCloseOnBlurRef.current = true;\n      requestAnimationFrame(() => {\n        preventCloseOnBlurRef.current = false;\n      });\n    }\n  };\n  const expanded = open && dropdownExpanded;\n  const nativeAttributes = {\n    name,\n    placeholder,\n    autoFocus,\n    onClick: openDropdown,\n    role: 'combobox',\n    'aria-autocomplete': 'list',\n    'aria-expanded': expanded,\n    'aria-controls': open ? ariaControls : undefined,\n    // 'aria-owns' needed for safari+vo to announce activedescendant content\n    'aria-owns': open ? ariaControls : undefined,\n    'aria-label': ariaLabel,\n    'aria-activedescendant': ariaActivedescendant\n  };\n  // Closes dropdown when outside click is detected.\n  // Similar to the internal dropdown implementation but includes the target as well.\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n    const clickListener = event => {\n      var _a, _b, _c;\n      if (!((_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target)) && !((_b = dropdownContentRef.current) === null || _b === void 0 ? void 0 : _b.contains(event.target)) && !((_c = dropdownFooterRef.current) === null || _c === void 0 ? void 0 : _c.contains(event.target))) {\n        closeDropdown();\n      }\n    };\n    window.addEventListener('mousedown', clickListener);\n    return () => {\n      window.removeEventListener('mousedown', clickListener);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open]);\n  return React.createElement(\"div\", Object.assign({}, baseProps, {\n    className: clsx(baseProps.className, styles.root),\n    ref: __internalRootRef\n  }), React.createElement(Dropdown, {\n    minWidth: dropdownWidth,\n    stretchWidth: !dropdownWidth,\n    stretchBeyondTriggerWidth: true,\n    contentKey: dropdownContentKey,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    trigger: React.createElement(InternalInput, Object.assign({\n      type: \"visualSearch\",\n      value: value,\n      onChange: event => handleChange(event.detail.value),\n      __onDelayedInput: event => handleDelayedInput(event.detail.value),\n      onKeyDown: handleKeyDown,\n      onKeyUp: onKeyUp,\n      disabled: disabled,\n      disableBrowserAutocorrect: disableBrowserAutocorrect,\n      readOnly: readOnly,\n      ariaRequired: ariaRequired,\n      clearAriaLabel: clearAriaLabel,\n      ref: inputRef,\n      autoComplete: false,\n      __nativeAttributes: nativeAttributes\n    }, formFieldContext)),\n    onMouseDown: handleDropdownMouseDown,\n    open: open && (!!dropdownContent || !!dropdownFooter),\n    footer: dropdownFooterRef && React.createElement(\"div\", {\n      ref: dropdownFooterRef,\n      className: styles['dropdown-footer']\n    }, dropdownFooter),\n    expandToViewport: expandToViewport,\n    loopFocus: loopFocus\n  }, open && dropdownContent ? React.createElement(\"div\", {\n    ref: dropdownContentRef,\n    className: styles['dropdown-content']\n  }, dropdownContent) : null));\n});\nexport default AutosuggestInput;","map":{"version":3,"mappings":"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","names":["React","useRef","useState","useImperativeHandle","useEffect","Dropdown","useFormFieldContext","getBaseProps","fireCancelableEvent","fireNonCancelableEvent","InternalInput","KeyCode","styles","clsx","AutosuggestInput","forwardRef","_a","ref","value","onChange","onBlur","onFocus","onKeyUp","onKeyDown","name","placeholder","disabled","readOnly","autoFocus","ariaLabel","ariaRequired","disableBrowserAutocorrect","expandToViewport","ariaControls","ariaActivedescendant","clearAriaLabel","dropdownExpanded","dropdownContentKey","dropdownContentFocusable","dropdownContent","dropdownFooter","dropdownWidth","loopFocus","onCloseDropdown","onDelayedInput","onPressArrowDown","onPressArrowUp","onPressEnter","__internalRootRef","restProps","baseProps","formFieldContext","inputRef","dropdownContentRef","dropdownFooterRef","preventOpenOnFocusRef","preventCloseOnBlurRef","open","setOpen","openDropdown","closeDropdown","focus","options","preventDropdown","current","select","close","handleBlur","handleFocus","fireKeydown","event","detail","handleKeyDown","keyCode","down","preventDefault","up","enter","escape","handleChange","handleDelayedInput","handleDropdownMouseDown","requestAnimationFrame","expanded","nativeAttributes","onClick","role","undefined","clickListener","contains","target","window","addEventListener","removeEventListener","className","root","minWidth","stretchWidth","stretchBeyondTriggerWidth","contentKey","trigger","type","__onDelayedInput","autoComplete","__nativeAttributes","onMouseDown","footer"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/internal/components/autosuggest-input/lib/default/internal/components/autosuggest-input/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { Ref, useRef, useState, useImperativeHandle, useEffect } from 'react';\n\nimport Dropdown from '../dropdown';\n\nimport { FormFieldValidationControlProps, useFormFieldContext } from '../../context/form-field-context';\nimport { BaseComponentProps, getBaseProps } from '../../base-component';\nimport { BaseKeyDetail, fireCancelableEvent, fireNonCancelableEvent, NonCancelableEventHandler } from '../../events';\nimport InternalInput from '../../../input/internal';\nimport {\n  BaseChangeDetail,\n  BaseInputProps,\n  InputAutoCorrect,\n  InputClearLabel,\n  InputKeyEvents,\n} from '../../../input/interfaces';\nimport { AutosuggestProps } from '../../../autosuggest/interfaces';\nimport { ExpandToViewport } from '../dropdown/interfaces';\nimport { InternalBaseComponentProps } from '../../hooks/use-base-component';\nimport { KeyCode } from '../../keycode';\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\n\nexport interface AutosuggestInputProps\n  extends BaseComponentProps,\n    BaseInputProps,\n    InputAutoCorrect,\n    InputKeyEvents,\n    InputClearLabel,\n    FormFieldValidationControlProps,\n    ExpandToViewport,\n    InternalBaseComponentProps {\n  ariaControls?: string;\n  ariaActivedescendant?: string;\n  dropdownExpanded?: boolean;\n  dropdownContentKey?: string;\n  dropdownContentFocusable?: boolean;\n  dropdownContent?: React.ReactNode;\n  dropdownFooter?: React.ReactNode;\n  dropdownWidth?: number;\n  loopFocus?: boolean;\n  onCloseDropdown?: NonCancelableEventHandler<null>;\n  onDelayedInput?: NonCancelableEventHandler<BaseChangeDetail>;\n  onPressArrowDown?: () => void;\n  onPressArrowUp?: () => void;\n  onPressEnter?: () => boolean;\n}\n\nexport interface AutosuggestInputFocusOptions {\n  preventDropdown?: boolean;\n}\n\nexport interface AutosuggestInputRef extends AutosuggestProps.Ref {\n  focus(options?: AutosuggestInputFocusOptions): void;\n  open(): void;\n  close(): void;\n}\n\nconst AutosuggestInput = React.forwardRef(\n  (\n    {\n      value,\n      onChange,\n      onBlur,\n      onFocus,\n      onKeyUp,\n      onKeyDown,\n      name,\n      placeholder,\n      disabled,\n      readOnly,\n      autoFocus,\n      ariaLabel,\n      ariaRequired,\n      disableBrowserAutocorrect = false,\n      expandToViewport,\n      ariaControls,\n      ariaActivedescendant,\n      clearAriaLabel,\n      dropdownExpanded = true,\n      dropdownContentKey,\n      dropdownContentFocusable = false,\n      dropdownContent = null,\n      dropdownFooter = null,\n      dropdownWidth,\n      loopFocus,\n      onCloseDropdown,\n      onDelayedInput,\n      onPressArrowDown,\n      onPressArrowUp,\n      onPressEnter,\n      __internalRootRef,\n      ...restProps\n    }: AutosuggestInputProps,\n    ref: Ref<AutosuggestInputRef>\n  ) => {\n    const baseProps = getBaseProps(restProps);\n    const formFieldContext = useFormFieldContext(restProps);\n\n    const inputRef = useRef<HTMLInputElement>(null);\n    const dropdownContentRef = useRef<HTMLDivElement>(null);\n    const dropdownFooterRef = useRef<HTMLDivElement>(null);\n    const preventOpenOnFocusRef = useRef(false);\n    const preventCloseOnBlurRef = useRef(false);\n\n    const [open, setOpen] = useState(false);\n\n    const openDropdown = () => !readOnly && setOpen(true);\n\n    const closeDropdown = () => {\n      setOpen(false);\n      fireNonCancelableEvent(onCloseDropdown, null);\n    };\n\n    useImperativeHandle(ref, () => ({\n      focus(options?: AutosuggestInputFocusOptions) {\n        if (options?.preventDropdown) {\n          preventOpenOnFocusRef.current = true;\n        }\n        inputRef.current?.focus();\n      },\n      select() {\n        inputRef.current?.select();\n      },\n      open: openDropdown,\n      close: closeDropdown,\n    }));\n\n    const handleBlur = () => {\n      if (!preventCloseOnBlurRef.current) {\n        closeDropdown();\n        fireNonCancelableEvent(onBlur, null);\n      }\n    };\n\n    const handleFocus = () => {\n      if (!preventOpenOnFocusRef.current) {\n        openDropdown();\n        fireNonCancelableEvent(onFocus, null);\n      }\n      preventOpenOnFocusRef.current = false;\n    };\n\n    const fireKeydown = (event: CustomEvent<BaseKeyDetail>) => fireCancelableEvent(onKeyDown, event.detail, event);\n\n    const handleKeyDown = (event: CustomEvent<BaseKeyDetail>) => {\n      switch (event.detail.keyCode) {\n        case KeyCode.down: {\n          onPressArrowDown?.();\n          openDropdown();\n          event.preventDefault();\n          break;\n        }\n        case KeyCode.up: {\n          onPressArrowUp?.();\n          openDropdown();\n          event.preventDefault();\n          break;\n        }\n        case KeyCode.enter: {\n          if (open) {\n            if (!onPressEnter?.()) {\n              closeDropdown();\n            }\n            event.preventDefault();\n          }\n          fireKeydown(event);\n          break;\n        }\n        case KeyCode.escape: {\n          if (open) {\n            closeDropdown();\n          } else if (value) {\n            fireNonCancelableEvent(onChange, { value: '' });\n          }\n          event.preventDefault();\n          fireKeydown(event);\n          break;\n        }\n        default: {\n          fireKeydown(event);\n        }\n      }\n    };\n\n    const handleChange = (value: string) => {\n      openDropdown();\n      fireNonCancelableEvent(onChange, { value });\n    };\n\n    const handleDelayedInput = (value: string) => {\n      fireNonCancelableEvent(onDelayedInput, { value });\n    };\n\n    const handleDropdownMouseDown: React.MouseEventHandler = event => {\n      // Prevent currently focused element from losing focus.\n      if (!dropdownContentFocusable) {\n        event.preventDefault();\n      }\n      // Prevent closing dropdown on click inside.\n      else {\n        preventCloseOnBlurRef.current = true;\n        requestAnimationFrame(() => {\n          preventCloseOnBlurRef.current = false;\n        });\n      }\n    };\n\n    const expanded = open && dropdownExpanded;\n    const nativeAttributes = {\n      name,\n      placeholder,\n      autoFocus,\n      onClick: openDropdown,\n      role: 'combobox',\n      'aria-autocomplete': 'list',\n      'aria-expanded': expanded,\n      'aria-controls': open ? ariaControls : undefined,\n      // 'aria-owns' needed for safari+vo to announce activedescendant content\n      'aria-owns': open ? ariaControls : undefined,\n      'aria-label': ariaLabel,\n      'aria-activedescendant': ariaActivedescendant,\n    };\n\n    // Closes dropdown when outside click is detected.\n    // Similar to the internal dropdown implementation but includes the target as well.\n    useEffect(() => {\n      if (!open) {\n        return;\n      }\n\n      const clickListener = (event: MouseEvent) => {\n        if (\n          !inputRef.current?.contains(event.target as Node) &&\n          !dropdownContentRef.current?.contains(event.target as Node) &&\n          !dropdownFooterRef.current?.contains(event.target as Node)\n        ) {\n          closeDropdown();\n        }\n      };\n\n      window.addEventListener('mousedown', clickListener);\n\n      return () => {\n        window.removeEventListener('mousedown', clickListener);\n      };\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [open]);\n\n    return (\n      <div {...baseProps} className={clsx(baseProps.className, styles.root)} ref={__internalRootRef}>\n        <Dropdown\n          minWidth={dropdownWidth}\n          stretchWidth={!dropdownWidth}\n          stretchBeyondTriggerWidth={true}\n          contentKey={dropdownContentKey}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          trigger={\n            <InternalInput\n              type=\"visualSearch\"\n              value={value}\n              onChange={event => handleChange(event.detail.value)}\n              __onDelayedInput={event => handleDelayedInput(event.detail.value)}\n              onKeyDown={handleKeyDown}\n              onKeyUp={onKeyUp}\n              disabled={disabled}\n              disableBrowserAutocorrect={disableBrowserAutocorrect}\n              readOnly={readOnly}\n              ariaRequired={ariaRequired}\n              clearAriaLabel={clearAriaLabel}\n              ref={inputRef}\n              autoComplete={false}\n              __nativeAttributes={nativeAttributes}\n              {...formFieldContext}\n            />\n          }\n          onMouseDown={handleDropdownMouseDown}\n          open={open && (!!dropdownContent || !!dropdownFooter)}\n          footer={\n            dropdownFooterRef && (\n              <div ref={dropdownFooterRef} className={styles['dropdown-footer']}>\n                {dropdownFooter}\n              </div>\n            )\n          }\n          expandToViewport={expandToViewport}\n          loopFocus={loopFocus}\n        >\n          {open && dropdownContent ? (\n            <div ref={dropdownContentRef} className={styles['dropdown-content']}>\n              {dropdownContent}\n            </div>\n          ) : null}\n        </Dropdown>\n      </div>\n    );\n  }\n);\n\nexport default AutosuggestInput;\n"]},"metadata":{},"sourceType":"module"}