{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { useContainerBreakpoints } from '../internal/hooks/container-queries';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { getBaseProps } from '../internal/base-component';\nimport { focusFlashById } from './flash';\nimport { isDevelopment } from '../internal/is-development';\nimport { useReducedMotion, warnOnce } from '@cloudscape-design/component-toolkit/internal';\nexport const componentName = 'Flashbar';\n// Common logic for collapsible and non-collapsible Flashbar\nexport function useFlashbar(_a) {\n  var {\n      items,\n      onItemsAdded,\n      onItemsChanged,\n      onItemsRemoved\n    } = _a,\n    restProps = __rest(_a, [\"items\", \"onItemsAdded\", \"onItemsChanged\", \"onItemsRemoved\"]);\n  const {\n    __internalRootRef\n  } = useBaseComponent(componentName);\n  const allItemsHaveId = useMemo(() => items.every(item => 'id' in item), [items]);\n  const baseProps = getBaseProps(restProps);\n  const ref = useRef(null);\n  const [breakpoint, breakpointRef] = useContainerBreakpoints(['xs']);\n  const mergedRef = useMergeRefs(ref, breakpointRef, __internalRootRef);\n  const isReducedMotion = useReducedMotion(breakpointRef);\n  const isVisualRefresh = useVisualRefresh();\n  const [previousItems, setPreviousItems] = useState(items);\n  const [nextFocusId, setNextFocusId] = useState(null);\n  if (isDevelopment) {\n    if (items === null || items === void 0 ? void 0 : items.some(item => item.ariaRole === 'alert' && !item.id)) {\n      warnOnce('Flashbar', `You provided \\`ariaRole=\"alert\"\\` for a flashbar item without providing an \\`id\\`. Focus will not be moved to the newly added flash message.`);\n    }\n  }\n  // Track new or removed item IDs in state to only trigger focus changes for newly added items.\n  // https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops\n  if (items) {\n    const newItems = items.filter(_ref => {\n      let {\n        id\n      } = _ref;\n      return id && !previousItems.some(item => item.id === id);\n    });\n    const removedItems = previousItems.filter(_ref2 => {\n      let {\n        id\n      } = _ref2;\n      return id && !items.some(item => item.id === id);\n    });\n    if (newItems.length > 0 || removedItems.length > 0) {\n      setPreviousItems(items);\n      onItemsAdded === null || onItemsAdded === void 0 ? void 0 : onItemsAdded(newItems);\n      onItemsRemoved === null || onItemsRemoved === void 0 ? void 0 : onItemsRemoved(removedItems);\n      onItemsChanged === null || onItemsChanged === void 0 ? void 0 : onItemsChanged({\n        allItemsHaveId,\n        isReducedMotion\n      });\n      const newFocusItems = newItems.filter(_ref3 => {\n        let {\n          ariaRole\n        } = _ref3;\n        return ariaRole === 'alert';\n      });\n      if (newFocusItems.length > 0) {\n        setNextFocusId(newFocusItems[0].id);\n      }\n    }\n  }\n  useEffect(() => {\n    if (nextFocusId) {\n      focusFlashById(ref.current, nextFocusId);\n    }\n  }, [nextFocusId, ref]);\n  return {\n    allItemsHaveId,\n    baseProps,\n    breakpoint,\n    isReducedMotion,\n    isVisualRefresh,\n    mergedRef,\n    ref\n  };\n}","map":{"version":3,"mappings":"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","names":["useBaseComponent","useMergeRefs","useEffect","useMemo","useRef","useState","useContainerBreakpoints","useVisualRefresh","getBaseProps","focusFlashById","isDevelopment","useReducedMotion","warnOnce","componentName","useFlashbar","_a","items","onItemsAdded","onItemsChanged","onItemsRemoved","restProps","__internalRootRef","allItemsHaveId","every","item","baseProps","ref","breakpoint","breakpointRef","mergedRef","isReducedMotion","isVisualRefresh","previousItems","setPreviousItems","nextFocusId","setNextFocusId","some","ariaRole","id","newItems","filter","removedItems","length","newFocusItems","current"],"sources":["/Users/tangyizhi/Desktop/Assignment 2/frontend/node_modules/@cloudscape-design/components/flashbar/lib/default/flashbar/common.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { useContainerBreakpoints } from '../internal/hooks/container-queries';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { getBaseProps } from '../internal/base-component';\nimport { FlashbarProps } from './interfaces';\nimport { focusFlashById } from './flash';\nimport { isDevelopment } from '../internal/is-development';\nimport { useReducedMotion, warnOnce } from '@cloudscape-design/component-toolkit/internal';\n\nexport const componentName = 'Flashbar';\n\n// Common logic for collapsible and non-collapsible Flashbar\nexport function useFlashbar({\n  items,\n  onItemsAdded,\n  onItemsChanged,\n  onItemsRemoved,\n  ...restProps\n}: FlashbarProps & {\n  onItemsAdded?: (items: FlashbarProps.MessageDefinition[]) => void;\n  onItemsRemoved?: (items: FlashbarProps.MessageDefinition[]) => void;\n  onItemsChanged?: (options?: { allItemsHaveId?: boolean; isReducedMotion?: boolean }) => void;\n}) {\n  const { __internalRootRef } = useBaseComponent(componentName);\n  const allItemsHaveId = useMemo(() => items.every(item => 'id' in item), [items]);\n  const baseProps = getBaseProps(restProps);\n  const ref = useRef<HTMLDivElement | null>(null);\n  const [breakpoint, breakpointRef] = useContainerBreakpoints(['xs']);\n  const mergedRef = useMergeRefs(ref, breakpointRef, __internalRootRef);\n  const isReducedMotion = useReducedMotion(breakpointRef as any);\n  const isVisualRefresh = useVisualRefresh();\n  const [previousItems, setPreviousItems] = useState<ReadonlyArray<FlashbarProps.MessageDefinition>>(items);\n  const [nextFocusId, setNextFocusId] = useState<string | null>(null);\n\n  if (isDevelopment) {\n    if (items?.some(item => item.ariaRole === 'alert' && !item.id)) {\n      warnOnce(\n        'Flashbar',\n        `You provided \\`ariaRole=\"alert\"\\` for a flashbar item without providing an \\`id\\`. Focus will not be moved to the newly added flash message.`\n      );\n    }\n  }\n\n  // Track new or removed item IDs in state to only trigger focus changes for newly added items.\n  // https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops\n  if (items) {\n    const newItems = items.filter(({ id }) => id && !previousItems.some(item => item.id === id));\n    const removedItems = previousItems.filter(({ id }) => id && !items.some(item => item.id === id));\n    if (newItems.length > 0 || removedItems.length > 0) {\n      setPreviousItems(items);\n      onItemsAdded?.(newItems);\n      onItemsRemoved?.(removedItems);\n      onItemsChanged?.({ allItemsHaveId, isReducedMotion });\n\n      const newFocusItems = newItems.filter(({ ariaRole }) => ariaRole === 'alert');\n      if (newFocusItems.length > 0) {\n        setNextFocusId(newFocusItems[0].id!);\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (nextFocusId) {\n      focusFlashById(ref.current, nextFocusId);\n    }\n  }, [nextFocusId, ref]);\n\n  return {\n    allItemsHaveId,\n    baseProps,\n    breakpoint,\n    isReducedMotion,\n    isVisualRefresh,\n    mergedRef,\n    ref,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}