{"ast":null,"code":"import _toConsumableArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useSelector } from '../async-store';\nimport { useInternalI18n } from '../../i18n/context';\nexport default function useHighlightDetails(_ref) {\n  var model = _ref.model,\n    xTickFormatter = _ref.xTickFormatter,\n    yTickFormatter = _ref.yTickFormatter,\n    detailTotalFormatter = _ref.detailTotalFormatter,\n    detailTotalLabel = _ref.detailTotalLabel;\n  var i18n = useInternalI18n('area-chart');\n  var hX = useSelector(model.interactions, function (state) {\n    return state.highlightedX;\n  });\n  var hPoint = useSelector(model.interactions, function (state) {\n    return state.highlightedPoint;\n  });\n  var isPopoverPinned = useSelector(model.interactions, function (state) {\n    return state.isPopoverPinned;\n  });\n  if (!hX) {\n    return null;\n  }\n  var _hX = _slicedToArray(hX, 1),\n    firstPoint = _hX[0];\n  var highlightIndex = firstPoint.index.x;\n  var seriesPoints = _toConsumableArray(model.computed.plot.xs[highlightIndex]);\n  var detailsTotal = seriesPoints.reduce(function (total, point) {\n    return total + point.value;\n  }, 0);\n  var formattedX = xTickFormatter ? xTickFormatter(firstPoint.x) : firstPoint.x.toString();\n  var seriesTitle = hPoint ? getInternalSeries(hPoint).title : '';\n  var formattedY = hPoint ? getInternalSeries(hPoint).formatValue(hPoint.value, hPoint.x) : '';\n  var seriesDetails = seriesPoints.map(function (point) {\n    var _getInternalSeries = getInternalSeries(point),\n      title = _getInternalSeries.title,\n      formatValue = _getInternalSeries.formatValue,\n      color = _getInternalSeries.color,\n      markerType = _getInternalSeries.markerType;\n    var isDimmed = Boolean(hPoint) && point !== hPoint;\n    return {\n      key: title,\n      value: formatValue(point.value, point.x),\n      color: color,\n      markerType: markerType,\n      isDimmed: isDimmed\n    };\n  });\n  var totalDetails = [{\n    key: i18n('i18nStrings.detailTotalLabel', detailTotalLabel) || '',\n    value: detailTotalFormatter ? detailTotalFormatter(detailsTotal) : yTickFormatter ? yTickFormatter(detailsTotal) : detailsTotal\n  }];\n  var pointDetails = hPoint ? seriesDetails[hPoint.index.s] : null;\n  var activeLabel = \"\".concat(seriesTitle, \" \").concat(formattedX, \" \").concat(formattedY, \", \").concat(totalDetails[0].key, \" \").concat(totalDetails[0].value);\n  return {\n    isPopoverPinned: isPopoverPinned,\n    highlightIndex: highlightIndex,\n    formattedX: formattedX,\n    seriesTitle: seriesTitle,\n    formattedY: formattedY,\n    activeLabel: activeLabel,\n    seriesDetails: seriesDetails,\n    totalDetails: totalDetails,\n    pointDetails: pointDetails\n  };\n  function getInternalSeries(point) {\n    return model.getInternalSeries(model.series[point.index.s]);\n  }\n}","map":{"version":3,"mappings":"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","names":["useSelector","useInternalI18n","useHighlightDetails","model","xTickFormatter","yTickFormatter","detailTotalFormatter","detailTotalLabel","i18n","hX","interactions","state","highlightedX","hPoint","highlightedPoint","isPopoverPinned","firstPoint","highlightIndex","index","x","seriesPoints","computed","plot","xs","detailsTotal","reduce","total","point","value","formattedX","toString","seriesTitle","getInternalSeries","title","formattedY","formatValue","seriesDetails","map","color","markerType","isDimmed","Boolean","key","totalDetails","pointDetails","s","activeLabel","series"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/area-chart/elements/lib/default/area-chart/elements/use-highlight-details.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useSelector } from '../async-store';\nimport { CartesianChartProps } from '../../internal/components/cartesian-chart/interfaces';\nimport { ChartSeriesDetailItem } from '../../internal/components/chart-series-details';\nimport { useInternalI18n } from '../../i18n/context';\nimport { AreaChartProps } from '../interfaces';\nimport { ChartModel } from '../model';\n\nexport interface HighlightDetails {\n  isPopoverPinned: boolean;\n  highlightIndex: number;\n  formattedX: string;\n  seriesTitle: string;\n  formattedY: number | string;\n  seriesDetails: readonly ChartSeriesDetailItem[];\n  totalDetails: readonly ChartSeriesDetailItem[];\n  pointDetails: null | ChartSeriesDetailItem;\n  activeLabel: string;\n}\n\nexport default function useHighlightDetails<T extends AreaChartProps.DataTypes>({\n  model,\n  xTickFormatter,\n  yTickFormatter,\n  detailTotalFormatter,\n  detailTotalLabel,\n}: {\n  model: ChartModel<T>;\n  xTickFormatter?: CartesianChartProps.TickFormatter<T>;\n  yTickFormatter?: CartesianChartProps.TickFormatter<number>;\n  detailTotalFormatter?: CartesianChartProps.TickFormatter<number>;\n  detailTotalLabel?: string;\n}): null | HighlightDetails {\n  const i18n = useInternalI18n('area-chart');\n  const hX = useSelector(model.interactions, state => state.highlightedX);\n  const hPoint = useSelector(model.interactions, state => state.highlightedPoint);\n  const isPopoverPinned = useSelector(model.interactions, state => state.isPopoverPinned);\n\n  if (!hX) {\n    return null;\n  }\n\n  const [firstPoint] = hX;\n  const highlightIndex = firstPoint.index.x;\n  const seriesPoints = [...model.computed.plot.xs[highlightIndex]];\n  const detailsTotal = seriesPoints.reduce((total, point) => total + point.value, 0);\n  const formattedX = xTickFormatter ? xTickFormatter(firstPoint.x) : firstPoint.x.toString();\n  const seriesTitle = hPoint ? getInternalSeries(hPoint).title : '';\n  const formattedY = hPoint ? getInternalSeries(hPoint).formatValue(hPoint.value, hPoint.x) : '';\n  const seriesDetails = seriesPoints.map(point => {\n    const { title, formatValue, color, markerType } = getInternalSeries(point);\n    const isDimmed = Boolean(hPoint) && point !== hPoint;\n    return { key: title, value: formatValue(point.value, point.x), color, markerType, isDimmed };\n  });\n  const totalDetails = [\n    {\n      key: i18n('i18nStrings.detailTotalLabel', detailTotalLabel) || '',\n      value: detailTotalFormatter\n        ? detailTotalFormatter(detailsTotal)\n        : yTickFormatter\n        ? yTickFormatter(detailsTotal)\n        : detailsTotal,\n    },\n  ];\n  const pointDetails = hPoint ? seriesDetails[hPoint.index.s] : null;\n  const activeLabel = `${seriesTitle} ${formattedX} ${formattedY}, ${totalDetails[0].key} ${totalDetails[0].value}`;\n\n  return {\n    isPopoverPinned,\n    highlightIndex,\n    formattedX,\n    seriesTitle,\n    formattedY,\n    activeLabel,\n    seriesDetails,\n    totalDetails,\n    pointDetails,\n  };\n\n  function getInternalSeries(point: ChartModel.PlotPoint<T>) {\n    return model.getInternalSeries(model.series[point.index.s]);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}