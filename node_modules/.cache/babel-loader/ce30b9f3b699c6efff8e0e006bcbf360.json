{"ast":null,"code":"import _toConsumableArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useState, useMemo, useCallback } from 'react';\nimport { indexIncludes, indexEquals } from './utils';\nimport createItemsTree from './create-items-tree';\nimport moveHighlightOneStep from './move-highlight';\nexport default function useHighlightedMenu(_ref) {\n  var items = _ref.items,\n    hasExpandableGroups = _ref.hasExpandableGroups,\n    _ref$isInRestrictedVi = _ref.isInRestrictedView,\n    isInRestrictedView = _ref$isInRestrictedVi === void 0 ? false : _ref$isInRestrictedVi;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    targetIndex = _useState2[0],\n    setTargetIndex = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    expandedIndex = _useState4[0],\n    setExpandedIndex = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isUsingMouse = _useState6[0],\n    setIsUsingMouse = _useState6[1];\n  var _useMemo = useMemo(function () {\n      return createItemsTree(items);\n    }, [items]),\n    getItem = _useMemo.getItem,\n    getItemIndex = _useMemo.getItemIndex,\n    getSequentialIndex = _useMemo.getSequentialIndex,\n    getParentIndex = _useMemo.getParentIndex;\n  var targetItem = useMemo(function () {\n    return getItem(targetIndex);\n  }, [targetIndex, getItem]);\n  var isHighlighted = useCallback(function (item) {\n    var index = getItemIndex(item);\n    return indexIncludes(index, targetIndex);\n  }, [targetIndex, getItemIndex]);\n  // check if keyboard focus is on the element\n  var isKeyboardHighlight = useCallback(function (item) {\n    var index = getItemIndex(item);\n    return !isUsingMouse && indexEquals(index, targetIndex);\n  }, [targetIndex, getItemIndex, isUsingMouse]);\n  var isExpanded = useCallback(function (group) {\n    var index = getItemIndex(group);\n    return indexIncludes(index, expandedIndex);\n  }, [expandedIndex, getItemIndex]);\n  var moveHighlight = useCallback(function (direction) {\n    var getNext = function getNext(index) {\n      var nextIndex = getSequentialIndex(index, direction);\n      var item = getItem(nextIndex || [-1]);\n      if (!nextIndex || !item) {\n        return null;\n      }\n      var parentIndex = getParentIndex(item);\n      var parentItem = parentIndex && getItem(parentIndex);\n      return {\n        index: nextIndex,\n        item: item,\n        parent: parentItem || undefined\n      };\n    };\n    var nextIndex = moveHighlightOneStep({\n      startIndex: targetIndex,\n      expandedIndex: expandedIndex,\n      getNext: getNext,\n      hasExpandableGroups: hasExpandableGroups,\n      isInRestrictedView: isInRestrictedView\n    });\n    if (nextIndex) {\n      setTargetIndex(nextIndex);\n    }\n  }, [targetIndex, expandedIndex, getItem, getSequentialIndex, getParentIndex, hasExpandableGroups, isInRestrictedView]);\n  var highlightItem = useCallback(function (item) {\n    setTargetIndex(getItemIndex(item));\n  }, [getItemIndex]);\n  var expandGroup = useCallback(function (group) {\n    var groupIndex = group ? getItemIndex(group) : targetIndex;\n    var firstChildIndex = [].concat(_toConsumableArray(groupIndex), [0]);\n    // move to the first child item unless in restricted mode\n    setTargetIndex(isInRestrictedView ? groupIndex : firstChildIndex);\n    setExpandedIndex(groupIndex);\n  }, [targetIndex, getItemIndex, isInRestrictedView]);\n  var collapseGroup = useCallback(function () {\n    if (expandedIndex.length > 0) {\n      setTargetIndex(expandedIndex);\n      setExpandedIndex(expandedIndex.slice(0, -1));\n    }\n  }, [expandedIndex]);\n  var reset = useCallback(function () {\n    setTargetIndex([]);\n    setExpandedIndex([]);\n  }, []);\n  return {\n    targetItem: targetItem,\n    isHighlighted: isHighlighted,\n    isKeyboardHighlight: isKeyboardHighlight,\n    isExpanded: isExpanded,\n    moveHighlight: moveHighlight,\n    highlightItem: highlightItem,\n    expandGroup: expandGroup,\n    collapseGroup: collapseGroup,\n    reset: reset,\n    setIsUsingMouse: setIsUsingMouse\n  };\n}","map":{"version":3,"mappings":"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","names":["useState","useMemo","useCallback","indexIncludes","indexEquals","createItemsTree","moveHighlightOneStep","useHighlightedMenu","items","hasExpandableGroups","isInRestrictedView","targetIndex","setTargetIndex","expandedIndex","setExpandedIndex","isUsingMouse","setIsUsingMouse","getItem","getItemIndex","getSequentialIndex","getParentIndex","targetItem","isHighlighted","item","index","isKeyboardHighlight","isExpanded","group","moveHighlight","direction","getNext","nextIndex","parentIndex","parentItem","parent","undefined","startIndex","highlightItem","expandGroup","groupIndex","firstChildIndex","collapseGroup","length","slice","reset"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/button-dropdown/utils/lib/default/button-dropdown/utils/use-highlighted-menu.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useState, useMemo, useCallback } from 'react';\n\nimport { indexIncludes, indexEquals } from './utils';\nimport { ButtonDropdownProps, HighlightProps } from '../interfaces';\nimport createItemsTree, { TreeIndex } from './create-items-tree';\nimport moveHighlightOneStep from './move-highlight';\n\ninterface UseHighlightedMenuOptions {\n  items: ButtonDropdownProps.Items;\n  hasExpandableGroups: boolean;\n  isInRestrictedView?: boolean;\n}\n\ninterface UseHighlightedMenuApi extends HighlightProps {\n  moveHighlight: (direction: -1 | 1) => void;\n  expandGroup: (group?: ButtonDropdownProps.ItemGroup) => void;\n  collapseGroup: () => void;\n  reset: () => void;\n  setIsUsingMouse: (isUsingMouse: boolean) => void;\n}\n\nexport default function useHighlightedMenu({\n  items,\n  hasExpandableGroups,\n  isInRestrictedView = false,\n}: UseHighlightedMenuOptions): UseHighlightedMenuApi {\n  const [targetIndex, setTargetIndex] = useState<TreeIndex>([]);\n  const [expandedIndex, setExpandedIndex] = useState<TreeIndex>([]);\n  const [isUsingMouse, setIsUsingMouse] = useState<boolean>(true);\n\n  const { getItem, getItemIndex, getSequentialIndex, getParentIndex } = useMemo(() => createItemsTree(items), [items]);\n\n  const targetItem = useMemo(() => getItem(targetIndex), [targetIndex, getItem]);\n\n  const isHighlighted = useCallback(\n    (item: ButtonDropdownProps.ItemOrGroup) => {\n      const index = getItemIndex(item);\n      return indexIncludes(index, targetIndex);\n    },\n    [targetIndex, getItemIndex]\n  );\n\n  // check if keyboard focus is on the element\n  const isKeyboardHighlight = useCallback(\n    (item: ButtonDropdownProps.ItemOrGroup) => {\n      const index = getItemIndex(item);\n      return !isUsingMouse && indexEquals(index, targetIndex);\n    },\n    [targetIndex, getItemIndex, isUsingMouse]\n  );\n\n  const isExpanded = useCallback(\n    (group: ButtonDropdownProps.ItemGroup) => {\n      const index = getItemIndex(group);\n\n      return indexIncludes(index, expandedIndex);\n    },\n    [expandedIndex, getItemIndex]\n  );\n\n  const moveHighlight = useCallback(\n    (direction: -1 | 1) => {\n      const getNext = (index: TreeIndex) => {\n        const nextIndex = getSequentialIndex(index, direction);\n        const item = getItem(nextIndex || [-1]);\n\n        if (!nextIndex || !item) {\n          return null;\n        }\n\n        const parentIndex = getParentIndex(item);\n        const parentItem = parentIndex && getItem(parentIndex);\n\n        return { index: nextIndex, item, parent: parentItem || undefined };\n      };\n\n      const nextIndex = moveHighlightOneStep({\n        startIndex: targetIndex,\n        expandedIndex,\n        getNext,\n        hasExpandableGroups,\n        isInRestrictedView,\n      });\n\n      if (nextIndex) {\n        setTargetIndex(nextIndex);\n      }\n    },\n    [targetIndex, expandedIndex, getItem, getSequentialIndex, getParentIndex, hasExpandableGroups, isInRestrictedView]\n  );\n\n  const highlightItem = useCallback(\n    (item: ButtonDropdownProps.ItemOrGroup) => {\n      setTargetIndex(getItemIndex(item));\n    },\n    [getItemIndex]\n  );\n\n  const expandGroup = useCallback(\n    (group?: ButtonDropdownProps.ItemGroup) => {\n      const groupIndex = group ? getItemIndex(group) : targetIndex;\n      const firstChildIndex = [...groupIndex, 0];\n\n      // move to the first child item unless in restricted mode\n      setTargetIndex(isInRestrictedView ? groupIndex : firstChildIndex);\n      setExpandedIndex(groupIndex);\n    },\n    [targetIndex, getItemIndex, isInRestrictedView]\n  );\n\n  const collapseGroup = useCallback(() => {\n    if (expandedIndex.length > 0) {\n      setTargetIndex(expandedIndex);\n      setExpandedIndex(expandedIndex.slice(0, -1));\n    }\n  }, [expandedIndex]);\n\n  const reset = useCallback(() => {\n    setTargetIndex([]);\n    setExpandedIndex([]);\n  }, []);\n\n  return {\n    targetItem,\n    isHighlighted,\n    isKeyboardHighlight,\n    isExpanded,\n    moveHighlight,\n    highlightItem,\n    expandGroup,\n    collapseGroup,\n    reset,\n    setIsUsingMouse,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}