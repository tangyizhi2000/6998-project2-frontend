{"ast":null,"code":"import _defineProperty from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useMemo } from 'react';\nimport { arc } from 'd3-shape';\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nimport { useInternalI18n } from '../i18n/context';\nexport default function Segments(_ref) {\n  var pieData = _ref.pieData,\n    highlightedSegment = _ref.highlightedSegment,\n    dimensions = _ref.dimensions,\n    variant = _ref.variant,\n    focusedSegmentRef = _ref.focusedSegmentRef,\n    popoverTrackRef = _ref.popoverTrackRef,\n    segmentAriaRoleDescription = _ref.segmentAriaRoleDescription,\n    _onMouseDown = _ref.onMouseDown,\n    _onMouseOver = _ref.onMouseOver;\n  var i18n = useInternalI18n('pie-chart');\n  var _useMemo = useMemo(function () {\n      var radius = dimensions.outerRadius;\n      var innerRadius = variant === 'pie' ? 0 : dimensions.innerRadius;\n      var cornerRadius = dimensions.cornerRadius || 0;\n      var arcFactory = arc().innerRadius(innerRadius).outerRadius(radius).cornerRadius(cornerRadius);\n      var highlightedArcFactory = arc().innerRadius(radius + 4).outerRadius(radius + 6);\n      return {\n        arcFactory: arcFactory,\n        highlightedArcFactory: highlightedArcFactory\n      };\n    }, [dimensions, variant]),\n    arcFactory = _useMemo.arcFactory,\n    highlightedArcFactory = _useMemo.highlightedArcFactory;\n  var centroid = useMemo(function () {\n    var _iterator = _createForOfIteratorHelper(pieData),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var datum = _step.value;\n        if (datum.data.datum === highlightedSegment) {\n          var _arcFactory$centroid = arcFactory.centroid(datum),\n            _arcFactory$centroid2 = _slicedToArray(_arcFactory$centroid, 2),\n            centroidLeft = _arcFactory$centroid2[0],\n            centroidTop = _arcFactory$centroid2[1];\n          return {\n            cx: centroidLeft,\n            cy: centroidTop\n          };\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return null;\n  }, [highlightedSegment, pieData, arcFactory]);\n  return React.createElement(\"g\", null, pieData.map(function (datum) {\n    var _clsx;\n    var isHighlighted = highlightedSegment === datum.data.datum;\n    var isDimmed = highlightedSegment !== null && !isHighlighted;\n    var arcPath = arcFactory(datum) || undefined;\n    var highlightedPath = highlightedArcFactory(datum) || undefined;\n    return React.createElement(\"g\", {\n      key: datum.data.index,\n      onMouseDown: function onMouseDown(e) {\n        _onMouseDown(datum.data);\n        e.preventDefault();\n      },\n      onMouseOver: function onMouseOver() {\n        return _onMouseOver(datum.data);\n      },\n      className: clsx(styles.segment, (_clsx = {}, _defineProperty(_clsx, styles['segment--highlighted'], isHighlighted), _defineProperty(_clsx, styles['segment--dimmed'], isDimmed), _clsx)),\n      ref: isHighlighted ? focusedSegmentRef : undefined,\n      \"aria-label\": \"\".concat(datum.data.datum.title, \" (\").concat(datum.data.datum.value, \")\"),\n      role: \"button\",\n      \"aria-roledescription\": i18n('i18nStrings.segmentAriaRoleDescription', segmentAriaRoleDescription)\n    }, React.createElement(\"path\", {\n      d: arcPath,\n      fill: datum.data.color,\n      className: styles.segment__path,\n      \"aria-hidden\": \"true\"\n    }), React.createElement(\"path\", {\n      d: highlightedPath,\n      fill: datum.data.color,\n      className: clsx(styles.segment__path, styles.segment__highlight),\n      \"aria-hidden\": \"true\"\n    }));\n  }), React.createElement(\"circle\", Object.assign({}, centroid, {\n    ref: popoverTrackRef,\n    r: \"1\",\n    opacity: \"0\",\n    \"aria-hidden\": \"true\"\n  })));\n}","map":{"version":3,"mappings":"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","names":["React","useMemo","arc","styles","clsx","useInternalI18n","Segments","pieData","highlightedSegment","dimensions","variant","focusedSegmentRef","popoverTrackRef","segmentAriaRoleDescription","onMouseDown","onMouseOver","i18n","radius","outerRadius","innerRadius","cornerRadius","arcFactory","highlightedArcFactory","centroid","datum","data","centroidLeft","centroidTop","cx","cy","map","isHighlighted","isDimmed","arcPath","undefined","highlightedPath","key","index","e","preventDefault","className","segment","ref","title","value","role","d","fill","color","segment__path","segment__highlight","r","opacity"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/pie-chart/lib/default/pie-chart/segments.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useMemo } from 'react';\nimport { arc, PieArcDatum } from 'd3-shape';\n\nimport { PieChartProps } from './interfaces';\nimport { Dimension } from './utils';\nimport { InternalChartDatum } from './pie-chart';\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nimport { useInternalI18n } from '../i18n/context';\n\ninterface SegmentsProps<T> {\n  pieData: Array<PieArcDatum<InternalChartDatum<T>>>;\n  highlightedSegment: T | null;\n  dimensions: Dimension;\n  variant: PieChartProps['variant'];\n  focusedSegmentRef: React.RefObject<SVGGElement>;\n  popoverTrackRef: React.RefObject<SVGCircleElement>;\n  segmentAriaRoleDescription?: string;\n  onMouseDown: (datum: InternalChartDatum<T>) => void;\n  onMouseOver: (datum: InternalChartDatum<T>) => void;\n}\n\nexport default function Segments<T extends PieChartProps.Datum>({\n  pieData,\n  highlightedSegment,\n  dimensions,\n  variant,\n  focusedSegmentRef,\n  popoverTrackRef,\n  segmentAriaRoleDescription,\n  onMouseDown,\n  onMouseOver,\n}: SegmentsProps<T>) {\n  const i18n = useInternalI18n('pie-chart');\n\n  const { arcFactory, highlightedArcFactory } = useMemo(() => {\n    const radius = dimensions.outerRadius;\n    const innerRadius = variant === 'pie' ? 0 : dimensions.innerRadius;\n    const cornerRadius = dimensions.cornerRadius || 0;\n\n    const arcFactory = arc<PieArcDatum<InternalChartDatum<any>>>()\n      .innerRadius(innerRadius)\n      .outerRadius(radius)\n      .cornerRadius(cornerRadius);\n\n    const highlightedArcFactory = arc<PieArcDatum<InternalChartDatum<any>>>()\n      .innerRadius(radius + 4)\n      .outerRadius(radius + 6);\n\n    return {\n      arcFactory,\n      highlightedArcFactory,\n    };\n  }, [dimensions, variant]);\n\n  const centroid = useMemo(() => {\n    for (const datum of pieData) {\n      if (datum.data.datum === highlightedSegment) {\n        const [centroidLeft, centroidTop] = arcFactory.centroid(datum);\n        return { cx: centroidLeft, cy: centroidTop };\n      }\n    }\n    return null;\n  }, [highlightedSegment, pieData, arcFactory]);\n\n  return (\n    <g>\n      {pieData.map(datum => {\n        const isHighlighted = highlightedSegment === datum.data.datum;\n        const isDimmed = highlightedSegment !== null && !isHighlighted;\n        const arcPath = arcFactory(datum) || undefined;\n        const highlightedPath = highlightedArcFactory(datum) || undefined;\n        return (\n          <g\n            key={datum.data.index}\n            onMouseDown={e => {\n              onMouseDown(datum.data);\n              e.preventDefault();\n            }}\n            onMouseOver={() => onMouseOver(datum.data)}\n            className={clsx(styles.segment, {\n              [styles['segment--highlighted']]: isHighlighted,\n              [styles['segment--dimmed']]: isDimmed,\n            })}\n            ref={isHighlighted ? focusedSegmentRef : undefined}\n            aria-label={`${datum.data.datum.title} (${datum.data.datum.value})`}\n            role=\"button\"\n            aria-roledescription={i18n('i18nStrings.segmentAriaRoleDescription', segmentAriaRoleDescription)}\n          >\n            <path d={arcPath} fill={datum.data.color} className={styles.segment__path} aria-hidden=\"true\" />\n            <path\n              d={highlightedPath}\n              fill={datum.data.color}\n              className={clsx(styles.segment__path, styles.segment__highlight)}\n              aria-hidden=\"true\"\n            />\n          </g>\n        );\n      })}\n\n      <circle {...centroid} ref={popoverTrackRef} r=\"1\" opacity=\"0\" aria-hidden=\"true\" />\n    </g>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}