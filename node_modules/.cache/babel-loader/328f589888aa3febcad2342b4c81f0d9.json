{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport InternalIcon from '../../icon/internal';\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nimport { fireCancelableEvent, isPlainLeftClick } from '../../internal/events';\nimport { getEventDetail } from '../internal';\nimport { Transition } from '../../internal/components/transition';\nimport PopoverContainer from '../../popover/container';\nimport PopoverBody from '../../popover/body';\nimport Portal from '../../internal/components/portal';\nimport popoverStyles from '../../popover/styles.css.js';\nimport { DATA_ATTR_FUNNEL_KEY } from '../../internal/analytics/selectors';\nimport { FUNNEL_KEY_FUNNEL_NAME } from '../../internal/analytics/selectors';\nconst BreadcrumbItemWithPopover = _a => {\n  var {\n      item,\n      isLast,\n      anchorAttributes,\n      funnelAttributes\n    } = _a,\n    itemAttributes = __rest(_a, [\"item\", \"isLast\", \"anchorAttributes\", \"funnelAttributes\"]);\n  const [showPopover, setShowPopover] = useState(false);\n  const textRef = useRef(null);\n  const virtualTextRef = useRef(null);\n  const isTruncated = (textRef, virtualTextRef) => {\n    if (!textRef || !virtualTextRef || !textRef.current || !virtualTextRef.current) {\n      return false;\n    }\n    const virtualTextWidth = virtualTextRef.current.getBoundingClientRect().width;\n    const textWidth = textRef.current.getBoundingClientRect().width;\n    if (virtualTextWidth > textWidth) {\n      return true;\n    }\n    return false;\n  };\n  const popoverContent = React.createElement(Portal, null, React.createElement(\"div\", {\n    className: styles['item-popover']\n  }, React.createElement(Transition, {\n    in: true\n  }, () => React.createElement(PopoverContainer, {\n    trackRef: textRef,\n    size: \"small\",\n    fixedWidth: false,\n    position: \"bottom\",\n    arrow: position => React.createElement(\"div\", {\n      className: clsx(popoverStyles.arrow, popoverStyles[`arrow-position-${position}`])\n    }, React.createElement(\"div\", {\n      className: popoverStyles['arrow-outer']\n    }), React.createElement(\"div\", {\n      className: popoverStyles['arrow-inner']\n    }))\n  }, React.createElement(PopoverBody, {\n    dismissButton: false,\n    dismissAriaLabel: undefined,\n    onDismiss: () => {},\n    header: undefined\n  }, item.text)))));\n  useEffect(() => {\n    const onKeyDown = event => {\n      if (event.key === 'Escape') {\n        setShowPopover(false);\n      }\n    };\n    if (showPopover) {\n      document.addEventListener('keydown', onKeyDown);\n    }\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [showPopover]);\n  return React.createElement(React.Fragment, null, React.createElement(Item, Object.assign({\n    isLast: isLast\n  }, itemAttributes, {\n    onFocus: () => {\n      isTruncated(textRef, virtualTextRef) && setShowPopover(true);\n    },\n    onBlur: () => setShowPopover(false),\n    onMouseEnter: () => {\n      isTruncated(textRef, virtualTextRef) && setShowPopover(true);\n    },\n    onMouseLeave: () => setShowPopover(false),\n    anchorAttributes: anchorAttributes\n  }), React.createElement(\"span\", Object.assign({}, funnelAttributes, {\n    className: styles.text,\n    ref: textRef\n  }), item.text), React.createElement(\"span\", {\n    className: styles['virtual-item'],\n    ref: virtualTextRef\n  }, item.text)), showPopover && popoverContent);\n};\nconst Item = _a => {\n  var {\n      anchorAttributes,\n      children,\n      isLast\n    } = _a,\n    itemAttributes = __rest(_a, [\"anchorAttributes\", \"children\", \"isLast\"]);\n  return isLast ? React.createElement(\"span\", Object.assign({}, itemAttributes), children) : React.createElement(\"a\", Object.assign({}, itemAttributes, anchorAttributes), children);\n};\nexport function BreadcrumbItem(_ref) {\n  let {\n    item,\n    onClick,\n    onFollow,\n    isDisplayed,\n    isLast = false,\n    isCompressed = false\n  } = _ref;\n  const preventDefault = event => event.preventDefault();\n  const onClickHandler = event => {\n    if (isPlainLeftClick(event)) {\n      fireCancelableEvent(onFollow, getEventDetail(item), event);\n    }\n    fireCancelableEvent(onClick, getEventDetail(item), event);\n  };\n  const itemAttributes = {\n    className: clsx(styles.anchor, {\n      [styles.compressed]: isCompressed\n    })\n  };\n  const anchorAttributes = {\n    href: item.href || '#',\n    onClick: isLast ? preventDefault : onClickHandler\n  };\n  const funnelAttributes = {};\n  if (isLast) {\n    funnelAttributes[DATA_ATTR_FUNNEL_KEY] = FUNNEL_KEY_FUNNEL_NAME;\n  }\n  return React.createElement(\"div\", {\n    className: clsx(styles.breadcrumb, isLast && styles.last)\n  }, isDisplayed && isCompressed ? React.createElement(BreadcrumbItemWithPopover, Object.assign({\n    item: item,\n    isLast: isLast,\n    anchorAttributes: anchorAttributes,\n    funnelAttributes: funnelAttributes\n  }, itemAttributes)) : React.createElement(Item, Object.assign({\n    isLast: isLast,\n    anchorAttributes: anchorAttributes\n  }, itemAttributes), React.createElement(\"span\", Object.assign({}, funnelAttributes, {\n    className: styles.text\n  }), item.text)), !isLast ? React.createElement(\"span\", {\n    className: styles.icon\n  }, React.createElement(InternalIcon, {\n    name: \"angle-right\"\n  })) : null);\n}","map":{"version":3,"mappings":"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","names":["React","useEffect","useRef","useState","InternalIcon","styles","clsx","fireCancelableEvent","isPlainLeftClick","getEventDetail","Transition","PopoverContainer","PopoverBody","Portal","popoverStyles","DATA_ATTR_FUNNEL_KEY","FUNNEL_KEY_FUNNEL_NAME","BreadcrumbItemWithPopover","_a","item","isLast","anchorAttributes","funnelAttributes","itemAttributes","showPopover","setShowPopover","textRef","virtualTextRef","isTruncated","current","virtualTextWidth","getBoundingClientRect","width","textWidth","popoverContent","className","in","trackRef","size","fixedWidth","position","arrow","dismissButton","dismissAriaLabel","undefined","onDismiss","header","text","onKeyDown","event","key","document","addEventListener","removeEventListener","Item","onFocus","onBlur","onMouseEnter","onMouseLeave","ref","children","BreadcrumbItem","onClick","onFollow","isDisplayed","isCompressed","preventDefault","onClickHandler","anchor","compressed","href","breadcrumb","last","icon","name"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/breadcrumb-group/item/lib/default/breadcrumb-group/item/item.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport { BreadcrumbGroupProps, BreadcrumbItemProps } from '../interfaces';\nimport InternalIcon from '../../icon/internal';\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nimport { fireCancelableEvent, isPlainLeftClick } from '../../internal/events';\nimport { getEventDetail } from '../internal';\nimport { Transition } from '../../internal/components/transition';\nimport PopoverContainer from '../../popover/container';\nimport PopoverBody from '../../popover/body';\nimport Portal from '../../internal/components/portal';\nimport popoverStyles from '../../popover/styles.css.js';\nimport { DATA_ATTR_FUNNEL_KEY } from '../../internal/analytics/selectors';\nimport { FUNNEL_KEY_FUNNEL_NAME } from '../../internal/analytics/selectors';\n\ntype BreadcrumbItemWithPopoverProps<T extends BreadcrumbGroupProps.Item> = React.HTMLAttributes<HTMLElement> & {\n  item: T;\n  isLast: boolean;\n  anchorAttributes: React.AnchorHTMLAttributes<HTMLAnchorElement>;\n  funnelAttributes: Record<string, string>;\n};\n\nconst BreadcrumbItemWithPopover = <T extends BreadcrumbGroupProps.Item>({\n  item,\n  isLast,\n  anchorAttributes,\n  funnelAttributes,\n  ...itemAttributes\n}: BreadcrumbItemWithPopoverProps<T>) => {\n  const [showPopover, setShowPopover] = useState(false);\n  const textRef = useRef<HTMLElement>(null);\n  const virtualTextRef = useRef<HTMLElement>(null);\n\n  const isTruncated = (textRef: React.RefObject<HTMLElement>, virtualTextRef: React.RefObject<HTMLElement>) => {\n    if (!textRef || !virtualTextRef || !textRef.current || !virtualTextRef.current) {\n      return false;\n    }\n    const virtualTextWidth = virtualTextRef.current.getBoundingClientRect().width;\n    const textWidth = textRef.current.getBoundingClientRect().width;\n    if (virtualTextWidth > textWidth) {\n      return true;\n    }\n    return false;\n  };\n\n  const popoverContent = (\n    <Portal>\n      <div className={styles['item-popover']}>\n        <Transition in={true}>\n          {() => (\n            <PopoverContainer\n              trackRef={textRef}\n              size=\"small\"\n              fixedWidth={false}\n              position=\"bottom\"\n              arrow={position => (\n                <div className={clsx(popoverStyles.arrow, popoverStyles[`arrow-position-${position}`])}>\n                  <div className={popoverStyles['arrow-outer']} />\n                  <div className={popoverStyles['arrow-inner']} />\n                </div>\n              )}\n            >\n              <PopoverBody dismissButton={false} dismissAriaLabel={undefined} onDismiss={() => {}} header={undefined}>\n                {item.text}\n              </PopoverBody>\n            </PopoverContainer>\n          )}\n        </Transition>\n      </div>\n    </Portal>\n  );\n\n  useEffect(() => {\n    const onKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setShowPopover(false);\n      }\n    };\n    if (showPopover) {\n      document.addEventListener('keydown', onKeyDown);\n    }\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [showPopover]);\n\n  return (\n    <>\n      <Item\n        isLast={isLast}\n        {...itemAttributes}\n        onFocus={() => {\n          isTruncated(textRef, virtualTextRef) && setShowPopover(true);\n        }}\n        onBlur={() => setShowPopover(false)}\n        onMouseEnter={() => {\n          isTruncated(textRef, virtualTextRef) && setShowPopover(true);\n        }}\n        onMouseLeave={() => setShowPopover(false)}\n        anchorAttributes={anchorAttributes}\n      >\n        <span {...funnelAttributes} className={styles.text} ref={textRef}>\n          {item.text}\n        </span>\n        <span className={styles['virtual-item']} ref={virtualTextRef}>\n          {item.text}\n        </span>\n      </Item>\n      {showPopover && popoverContent}\n    </>\n  );\n};\n\ntype ItemProps = React.HTMLAttributes<HTMLElement> & {\n  anchorAttributes: React.AnchorHTMLAttributes<HTMLAnchorElement>;\n  isLast: boolean;\n};\nconst Item = ({ anchorAttributes, children, isLast, ...itemAttributes }: ItemProps) =>\n  isLast ? (\n    <span {...itemAttributes}>{children}</span>\n  ) : (\n    <a {...itemAttributes} {...anchorAttributes}>\n      {children}\n    </a>\n  );\n\nexport function BreadcrumbItem<T extends BreadcrumbGroupProps.Item>({\n  item,\n  onClick,\n  onFollow,\n  isDisplayed,\n  isLast = false,\n  isCompressed = false,\n}: BreadcrumbItemProps<T>) {\n  const preventDefault = (event: React.MouseEvent) => event.preventDefault();\n  const onClickHandler = (event: React.MouseEvent) => {\n    if (isPlainLeftClick(event)) {\n      fireCancelableEvent(onFollow, getEventDetail(item), event);\n    }\n    fireCancelableEvent(onClick, getEventDetail(item), event);\n  };\n\n  const itemAttributes: React.HTMLAttributes<HTMLElement> = {\n    className: clsx(styles.anchor, { [styles.compressed]: isCompressed }),\n  };\n  const anchorAttributes: React.AnchorHTMLAttributes<HTMLAnchorElement> = {\n    href: item.href || '#',\n    onClick: isLast ? preventDefault : onClickHandler,\n  };\n\n  const funnelAttributes: Record<string, string> = {};\n  if (isLast) {\n    funnelAttributes[DATA_ATTR_FUNNEL_KEY] = FUNNEL_KEY_FUNNEL_NAME;\n  }\n\n  return (\n    <div className={clsx(styles.breadcrumb, isLast && styles.last)}>\n      {isDisplayed && isCompressed ? (\n        <BreadcrumbItemWithPopover\n          item={item}\n          isLast={isLast}\n          anchorAttributes={anchorAttributes}\n          funnelAttributes={funnelAttributes}\n          {...itemAttributes}\n        />\n      ) : (\n        <Item isLast={isLast} anchorAttributes={anchorAttributes} {...itemAttributes}>\n          <span {...funnelAttributes} className={styles.text}>\n            {item.text}\n          </span>\n        </Item>\n      )}\n      {!isLast ? (\n        <span className={styles.icon}>\n          <InternalIcon name=\"angle-right\" />\n        </span>\n      ) : null}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}