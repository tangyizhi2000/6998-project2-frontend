{"ast":null,"code":"import _defineProperty from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _createForOfIteratorHelper from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { memo, useRef } from 'react';\nimport clsx from 'clsx';\nimport { TICK_LENGTH, TICK_LINE_HEIGHT, TICK_MARGIN } from './constants';\nimport styles from './styles.css.js';\nimport { formatTicks, getVisibleTicks } from './label-utils';\nimport { useInternalI18n } from '../../../i18n/context';\nexport function useBottomLabels(_ref) {\n  var ticks = _ref.ticks,\n    scale = _ref.scale,\n    tickFormatter = _ref.tickFormatter;\n  var virtualTextRef = useRef(null);\n  var cacheRef = useRef({});\n  var getLabelSpace = function getLabelSpace(label) {\n    if (cacheRef.current[label] !== undefined) {\n      return cacheRef.current[label];\n    }\n    if (virtualTextRef.current && virtualTextRef.current.getComputedTextLength) {\n      virtualTextRef.current.textContent = label;\n      cacheRef.current[label] = virtualTextRef.current.getComputedTextLength();\n      return cacheRef.current[label];\n    }\n    return 0;\n  };\n  var formattedTicks = formatTicks({\n    ticks: ticks,\n    scale: scale,\n    getLabelSpace: getLabelSpace,\n    tickFormatter: tickFormatter\n  });\n  if (virtualTextRef.current) {\n    virtualTextRef.current.textContent = '';\n  }\n  var height = TICK_LENGTH + TICK_MARGIN;\n  var _iterator = _createForOfIteratorHelper(formattedTicks),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var lines = _step.value.lines;\n      height = Math.max(height, TICK_LENGTH + TICK_MARGIN + lines.length * TICK_LINE_HEIGHT);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return {\n    virtualTextRef: virtualTextRef,\n    formattedTicks: formattedTicks,\n    height: height\n  };\n}\nexport default memo(BottomLabels);\n// Renders the visible tick labels on the bottom axis, as well as their grid lines.\nfunction BottomLabels(_ref2) {\n  var _ref2$axis = _ref2.axis,\n    axis = _ref2$axis === void 0 ? 'x' : _ref2$axis,\n    width = _ref2.width,\n    height = _ref2.height,\n    scale = _ref2.scale,\n    title = _ref2.title,\n    ariaRoleDescription = _ref2.ariaRoleDescription,\n    _ref2$offsetLeft = _ref2.offsetLeft,\n    offsetLeft = _ref2$offsetLeft === void 0 ? 0 : _ref2$offsetLeft,\n    _ref2$offsetRight = _ref2.offsetRight,\n    offsetRight = _ref2$offsetRight === void 0 ? 0 : _ref2$offsetRight,\n    virtualTextRef = _ref2.virtualTextRef,\n    formattedTicks = _ref2.formattedTicks;\n  var i18n = useInternalI18n('[charts]');\n  var xOffset = scale.isCategorical() && axis === 'x' ? Math.max(0, scale.d3Scale.bandwidth() - 1) / 2 : 0;\n  var from = 0 - offsetLeft - xOffset;\n  var until = width + offsetRight - xOffset;\n  var balanceLabels = axis === 'x' && scale.scaleType !== 'log';\n  var visibleTicks = getVisibleTicks(formattedTicks, from, until, balanceLabels);\n  return React.createElement(\"g\", {\n    transform: \"translate(0,\".concat(height, \")\"),\n    className: styles['labels-bottom'],\n    \"aria-label\": title,\n    role: \"list\",\n    \"aria-roledescription\": i18n('i18nStrings.chartAriaRoleDescription', ariaRoleDescription),\n    \"aria-hidden\": true\n  }, visibleTicks.map(function (_ref3, index) {\n    var _clsx;\n    var position = _ref3.position,\n      lines = _ref3.lines;\n    return isFinite(position) && React.createElement(\"g\", {\n      key: index,\n      transform: \"translate(\".concat(position + xOffset, \",0)\"),\n      className: clsx(styles.ticks, styles['ticks--bottom'], (_clsx = {}, _defineProperty(_clsx, styles['ticks--x'], axis === 'x'), _defineProperty(_clsx, styles['ticks--y'], axis === 'y'), _clsx)),\n      role: \"listitem\",\n      \"aria-label\": lines.join('\\n')\n    }, React.createElement(\"line\", {\n      className: styles.ticks__line,\n      x1: 0,\n      x2: 0,\n      y1: 0,\n      y2: TICK_LENGTH,\n      \"aria-hidden\": \"true\"\n    }), lines.map(function (line, lineIndex) {\n      return React.createElement(\"text\", {\n        className: styles.ticks__text,\n        key: lineIndex,\n        x: 0,\n        y: TICK_LENGTH + TICK_MARGIN + lineIndex * TICK_LINE_HEIGHT\n      }, line);\n    }));\n  }), React.createElement(\"text\", {\n    ref: virtualTextRef,\n    x: 0,\n    y: 0,\n    style: {\n      visibility: 'hidden'\n    },\n    \"aria-hidden\": \"true\"\n  }));\n}","map":{"version":3,"mappings":";;AAAA;AACA;AACA,OAAOA,KAAK,IAAIC,IAAI,EAAEC,MAAM,QAAQ,OAAO;AAC3C,OAAOC,IAAI,MAAM,MAAM;AAIvB,SAASC,WAAW,EAAEC,gBAAgB,EAAEC,WAAW,QAAQ,aAAa;AAExE,OAAOC,MAAM,MAAM,iBAAiB;AACpC,SAASC,WAAW,EAAEC,eAAe,QAAuB,eAAe;AAC3E,SAASC,eAAe,QAAQ,uBAAuB;AAevD,OAAM,SAAUC,eAAe,OAQ9B;EAAA,IAPCC,KAAK,QAALA,KAAK;IACLC,KAAK,QAALA,KAAK;IACLC,aAAa,QAAbA,aAAa;EAMb,IAAMC,cAAc,GAAGb,MAAM,CAAiB,IAAI,CAAC;EAEnD,IAAMc,QAAQ,GAAGd,MAAM,CAA8B,EAAE,CAAC;EACxD,IAAMe,aAAa,GAAG,SAAhBA,aAAa,CAAIC,KAAa,EAAI;IACtC,IAAIF,QAAQ,CAACG,OAAO,CAACD,KAAK,CAAC,KAAKE,SAAS,EAAE;MACzC,OAAOJ,QAAQ,CAACG,OAAO,CAACD,KAAK,CAAC;;IAEhC,IAAIH,cAAc,CAACI,OAAO,IAAIJ,cAAc,CAACI,OAAO,CAACE,qBAAqB,EAAE;MAC1EN,cAAc,CAACI,OAAO,CAACG,WAAW,GAAGJ,KAAK;MAC1CF,QAAQ,CAACG,OAAO,CAACD,KAAK,CAAC,GAAGH,cAAc,CAACI,OAAO,CAACE,qBAAqB,EAAE;MACxE,OAAOL,QAAQ,CAACG,OAAO,CAACD,KAAK,CAAC;;IAEhC,OAAO,CAAC;EACV,CAAC;EAED,IAAMK,cAAc,GAAGf,WAAW,CAAC;IAAEI,KAAK,EAALA,KAAK;IAAEC,KAAK,EAALA,KAAK;IAAEI,aAAa,EAAbA,aAAa;IAAEH,aAAa,EAAbA;EAAa,CAAE,CAAC;EAElF,IAAIC,cAAc,CAACI,OAAO,EAAE;IAC1BJ,cAAc,CAACI,OAAO,CAACG,WAAW,GAAG,EAAE;;EAGzC,IAAIE,MAAM,GAAGpB,WAAW,GAAGE,WAAW;EAAC,2CACfiB,cAAc;IAAA;EAAA;IAAtC,oDAAwC;MAAA,IAA3BE,KAAK,eAALA,KAAK;MAChBD,MAAM,GAAGE,IAAI,CAACC,GAAG,CAACH,MAAM,EAAEpB,WAAW,GAAGE,WAAW,GAAGmB,KAAK,CAACG,MAAM,GAAGvB,gBAAgB,CAAC;;EACvF;IAAA;EAAA;IAAA;EAAA;EAED,OAAO;IAAEU,cAAc,EAAdA,cAAc;IAAEQ,cAAc,EAAdA,cAAc;IAAEC,MAAM,EAANA;EAAM,CAAE;AACnD;AAEA,eAAevB,IAAI,CAAC4B,YAAY,CAAwB;AAExD;AACA,SAASA,YAAY,QAWD;EAAA,uBAVlBC,IAAI;IAAJA,IAAI,2BAAG,GAAG;IACVC,KAAK,SAALA,KAAK;IACLP,MAAM,SAANA,MAAM;IACNX,KAAK,SAALA,KAAK;IACLmB,KAAK,SAALA,KAAK;IACLC,mBAAmB,SAAnBA,mBAAmB;IAAA,yBACnBC,UAAU;IAAVA,UAAU,iCAAG,CAAC;IAAA,0BACdC,WAAW;IAAXA,WAAW,kCAAG,CAAC;IACfpB,cAAc,SAAdA,cAAc;IACdQ,cAAc,SAAdA,cAAc;EAEd,IAAMa,IAAI,GAAG1B,eAAe,CAAC,UAAU,CAAC;EAExC,IAAM2B,OAAO,GAAGxB,KAAK,CAACyB,aAAa,EAAE,IAAIR,IAAI,KAAK,GAAG,GAAGJ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEd,KAAK,CAAC0B,OAAO,CAACC,SAAS,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;EAE1G,IAAMC,IAAI,GAAG,CAAC,GAAGP,UAAU,GAAGG,OAAO;EACrC,IAAMK,KAAK,GAAGX,KAAK,GAAGI,WAAW,GAAGE,OAAO;EAC3C,IAAMM,aAAa,GAAGb,IAAI,KAAK,GAAG,IAAIjB,KAAK,CAAC+B,SAAS,KAAK,KAAK;EAC/D,IAAMC,YAAY,GAAGpC,eAAe,CAACc,cAAc,EAAEkB,IAAI,EAAEC,KAAK,EAAEC,aAAa,CAAC;EAEhF,OACE3C;IACE8C,SAAS,wBAAiBtB,MAAM,MAAG;IACnCuB,SAAS,EAAExC,MAAM,CAAC,eAAe,CAAC;IAAA,cACtByB,KAAK;IACjBgB,IAAI,EAAC,MAAM;IAAA,wBACWZ,IAAI,CAAC,sCAAsC,EAAEH,mBAAmB,CAAC;IAAA,eAC1E;EAAI,GAEhBY,YAAY,CAACI,GAAG,CACf,iBAAsBC,KAAK;IAAA;IAAA,IAAxBC,QAAQ,SAARA,QAAQ;MAAE1B,KAAK,SAALA,KAAK;IAAA,OAChB2B,QAAQ,CAACD,QAAQ,CAAC,IAChBnD;MACEqD,GAAG,EAAEH,KAAK;MACVJ,SAAS,sBAAeK,QAAQ,GAAGd,OAAO,QAAK;MAC/CU,SAAS,EAAE5C,IAAI,CAACI,MAAM,CAACK,KAAK,EAAEL,MAAM,CAAC,eAAe,CAAC,sCAClDA,MAAM,CAAC,UAAU,CAAC,EAAGuB,IAAI,KAAK,GAAG,0BACjCvB,MAAM,CAAC,UAAU,CAAC,EAAGuB,IAAI,KAAK,GAAG,UAClC;MACFkB,IAAI,EAAC,UAAU;MAAA,cACHvB,KAAK,CAAC6B,IAAI,CAAC,IAAI;IAAC,GAE5BtD;MAAM+C,SAAS,EAAExC,MAAM,CAACgD,WAAW;MAAEC,EAAE,EAAE,CAAC;MAAEC,EAAE,EAAE,CAAC;MAAEC,EAAE,EAAE,CAAC;MAAEC,EAAE,EAAEvD,WAAW;MAAA,eAAc;IAAM,EAAG,EAC/FqB,KAAK,CAACwB,GAAG,CAAC,UAACW,IAAI,EAAEC,SAAS;MAAA,OACzB7D;QACE+C,SAAS,EAAExC,MAAM,CAACuD,WAAW;QAC7BT,GAAG,EAAEQ,SAAS;QACdE,CAAC,EAAE,CAAC;QACJC,CAAC,EAAE5D,WAAW,GAAGE,WAAW,GAAGuD,SAAS,GAAGxD;MAAgB,GAE1DuD,IAAI,CACA;IAAA,CACR,CAAC,CAEL;EAAA,EACJ,EAED5D;IAAMiE,GAAG,EAAElD,cAAc;IAAEgD,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE,CAAC;IAAEE,KAAK,EAAE;MAAEC,UAAU,EAAE;IAAQ,CAAE;IAAA,eAAc;EAAM,EAAQ,CAChG;AAER","names":["React","memo","useRef","clsx","TICK_LENGTH","TICK_LINE_HEIGHT","TICK_MARGIN","styles","formatTicks","getVisibleTicks","useInternalI18n","useBottomLabels","ticks","scale","tickFormatter","virtualTextRef","cacheRef","getLabelSpace","label","current","undefined","getComputedTextLength","textContent","formattedTicks","height","lines","Math","max","length","BottomLabels","axis","width","title","ariaRoleDescription","offsetLeft","offsetRight","i18n","xOffset","isCategorical","d3Scale","bandwidth","from","until","balanceLabels","scaleType","visibleTicks","transform","className","role","map","index","position","isFinite","key","join","ticks__line","x1","x2","y1","y2","line","lineIndex","ticks__text","x","y","ref","style","visibility"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/internal/components/cartesian-chart/lib/default/internal/components/cartesian-chart/bottom-labels.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { memo, useRef } from 'react';\nimport clsx from 'clsx';\n\nimport { ChartDataTypes } from './interfaces';\nimport { ChartScale, NumericChartScale } from './scales';\nimport { TICK_LENGTH, TICK_LINE_HEIGHT, TICK_MARGIN } from './constants';\n\nimport styles from './styles.css.js';\nimport { formatTicks, getVisibleTicks, FormattedTick } from './label-utils';\nimport { useInternalI18n } from '../../../i18n/context';\n\ninterface BottomLabelsProps {\n  axis?: 'x' | 'y';\n  width: number;\n  height: number;\n  scale: ChartScale | NumericChartScale;\n  title?: string;\n  ariaRoleDescription?: string;\n  offsetLeft?: number;\n  offsetRight?: number;\n  virtualTextRef: React.Ref<SVGTextElement>;\n  formattedTicks: readonly FormattedTick[];\n}\n\nexport function useBottomLabels({\n  ticks,\n  scale,\n  tickFormatter,\n}: {\n  scale: ChartScale | NumericChartScale;\n  ticks: readonly ChartDataTypes[];\n  tickFormatter?: (value: ChartDataTypes) => string;\n}) {\n  const virtualTextRef = useRef<SVGTextElement>(null);\n\n  const cacheRef = useRef<{ [label: string]: number }>({});\n  const getLabelSpace = (label: string) => {\n    if (cacheRef.current[label] !== undefined) {\n      return cacheRef.current[label];\n    }\n    if (virtualTextRef.current && virtualTextRef.current.getComputedTextLength) {\n      virtualTextRef.current.textContent = label;\n      cacheRef.current[label] = virtualTextRef.current.getComputedTextLength();\n      return cacheRef.current[label];\n    }\n    return 0;\n  };\n\n  const formattedTicks = formatTicks({ ticks, scale, getLabelSpace, tickFormatter });\n\n  if (virtualTextRef.current) {\n    virtualTextRef.current.textContent = '';\n  }\n\n  let height = TICK_LENGTH + TICK_MARGIN;\n  for (const { lines } of formattedTicks) {\n    height = Math.max(height, TICK_LENGTH + TICK_MARGIN + lines.length * TICK_LINE_HEIGHT);\n  }\n\n  return { virtualTextRef, formattedTicks, height };\n}\n\nexport default memo(BottomLabels) as typeof BottomLabels;\n\n// Renders the visible tick labels on the bottom axis, as well as their grid lines.\nfunction BottomLabels({\n  axis = 'x',\n  width,\n  height,\n  scale,\n  title,\n  ariaRoleDescription,\n  offsetLeft = 0,\n  offsetRight = 0,\n  virtualTextRef,\n  formattedTicks,\n}: BottomLabelsProps) {\n  const i18n = useInternalI18n('[charts]');\n\n  const xOffset = scale.isCategorical() && axis === 'x' ? Math.max(0, scale.d3Scale.bandwidth() - 1) / 2 : 0;\n\n  const from = 0 - offsetLeft - xOffset;\n  const until = width + offsetRight - xOffset;\n  const balanceLabels = axis === 'x' && scale.scaleType !== 'log';\n  const visibleTicks = getVisibleTicks(formattedTicks, from, until, balanceLabels);\n\n  return (\n    <g\n      transform={`translate(0,${height})`}\n      className={styles['labels-bottom']}\n      aria-label={title}\n      role=\"list\"\n      aria-roledescription={i18n('i18nStrings.chartAriaRoleDescription', ariaRoleDescription)}\n      aria-hidden={true}\n    >\n      {visibleTicks.map(\n        ({ position, lines }, index) =>\n          isFinite(position) && (\n            <g\n              key={index}\n              transform={`translate(${position + xOffset},0)`}\n              className={clsx(styles.ticks, styles['ticks--bottom'], {\n                [styles['ticks--x']]: axis === 'x',\n                [styles['ticks--y']]: axis === 'y',\n              })}\n              role=\"listitem\"\n              aria-label={lines.join('\\n')}\n            >\n              <line className={styles.ticks__line} x1={0} x2={0} y1={0} y2={TICK_LENGTH} aria-hidden=\"true\" />\n              {lines.map((line, lineIndex) => (\n                <text\n                  className={styles.ticks__text}\n                  key={lineIndex}\n                  x={0}\n                  y={TICK_LENGTH + TICK_MARGIN + lineIndex * TICK_LINE_HEIGHT}\n                >\n                  {line}\n                </text>\n              ))}\n            </g>\n          )\n      )}\n\n      <text ref={virtualTextRef} x={0} y={0} style={{ visibility: 'hidden' }} aria-hidden=\"true\"></text>\n    </g>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}