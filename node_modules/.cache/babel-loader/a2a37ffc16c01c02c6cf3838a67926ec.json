{"ast":null,"code":"import _defineProperty from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport clsx from 'clsx';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\nimport React, { useEffect, useRef } from 'react';\nimport { getBaseProps } from '../../base-component';\nimport { fireNonCancelableEvent, fireKeyboardEvent } from '../../events';\nimport { findUpUntil } from '../../utils/dom';\nimport styles from './styles.css.js';\nimport { useStableCallback } from '@cloudscape-design/component-toolkit/internal';\nvar BOTTOM_TRIGGER_OFFSET = 80;\nvar getItemIndex = function getItemIndex(containerRef, event) {\n  var target = findUpUntil(event.target, function (element) {\n    return element === containerRef.current || !!element.dataset.mouseTarget;\n  });\n  var mouseTarget = target === null || target === void 0 ? void 0 : target.dataset.mouseTarget;\n  return mouseTarget ? parseInt(mouseTarget) : -1;\n};\nvar OptionsList = function OptionsList(_a, ref) {\n  var open = _a.open,\n    statusType = _a.statusType,\n    children = _a.children,\n    _a$nativeAttributes = _a.nativeAttributes,\n    nativeAttributes = _a$nativeAttributes === void 0 ? {} : _a$nativeAttributes,\n    _onKeyDown = _a.onKeyDown,\n    _onBlur = _a.onBlur,\n    _onFocus = _a.onFocus,\n    onLoadMore = _a.onLoadMore,\n    _onMouseUp = _a.onMouseUp,\n    _onMouseMove = _a.onMouseMove,\n    _a$position = _a.position,\n    position = _a$position === void 0 ? 'relative' : _a$position,\n    _a$role = _a.role,\n    role = _a$role === void 0 ? 'listbox' : _a$role,\n    _a$decreaseTopMargin = _a.decreaseTopMargin,\n    decreaseTopMargin = _a$decreaseTopMargin === void 0 ? false : _a$decreaseTopMargin,\n    ariaLabel = _a.ariaLabel,\n    ariaLabelledby = _a.ariaLabelledby,\n    ariaDescribedby = _a.ariaDescribedby,\n    restProps = __rest(_a, [\"open\", \"statusType\", \"children\", \"nativeAttributes\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"onLoadMore\", \"onMouseUp\", \"onMouseMove\", \"position\", \"role\", \"decreaseTopMargin\", \"ariaLabel\", \"ariaLabelledby\", \"ariaDescribedby\"]);\n  var baseProps = getBaseProps(restProps);\n  var menuRef = useRef(null);\n  var handleScroll = useStableCallback(function () {\n    var scrollContainer = menuRef === null || menuRef === void 0 ? void 0 : menuRef.current;\n    if (scrollContainer) {\n      var bottomEdgePosition = scrollContainer.scrollTop + scrollContainer.clientHeight;\n      var remainingScrollHeight = scrollContainer.scrollHeight - bottomEdgePosition;\n      if (remainingScrollHeight < BOTTOM_TRIGGER_OFFSET) {\n        fireNonCancelableEvent(onLoadMore);\n      }\n    }\n  });\n  useEffect(function () {\n    if (open && statusType === 'pending') {\n      handleScroll();\n    }\n  }, [open, statusType, handleScroll]);\n  var className = clsx(styles['options-list'], _defineProperty({}, styles['decrease-top-margin'], decreaseTopMargin));\n  var mergedRef = useMergeRefs(ref, menuRef);\n  return React.createElement(\"ul\", Object.assign({}, baseProps, nativeAttributes, {\n    className: className,\n    ref: mergedRef,\n    style: {\n      position: position\n    },\n    role: role,\n    onScroll: handleScroll,\n    onKeyDown: function onKeyDown(event) {\n      return _onKeyDown && fireKeyboardEvent(_onKeyDown, event);\n    },\n    onMouseMove: function onMouseMove(event) {\n      return _onMouseMove === null || _onMouseMove === void 0 ? void 0 : _onMouseMove(getItemIndex(menuRef, event));\n    },\n    onMouseUp: function onMouseUp(event) {\n      return _onMouseUp === null || _onMouseUp === void 0 ? void 0 : _onMouseUp(getItemIndex(menuRef, event));\n    },\n    onBlur: function onBlur(event) {\n      return fireNonCancelableEvent(_onBlur, {\n        relatedTarget: event.relatedTarget\n      });\n    },\n    onFocus: function onFocus() {\n      return fireNonCancelableEvent(_onFocus);\n    },\n    tabIndex: -1,\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabelledby,\n    \"aria-describedby\": ariaDescribedby\n  }), open && children);\n};\nexport default React.forwardRef(OptionsList);","map":{"version":3,"mappings":"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","names":["clsx","useMergeRefs","React","useEffect","useRef","getBaseProps","fireNonCancelableEvent","fireKeyboardEvent","findUpUntil","styles","useStableCallback","BOTTOM_TRIGGER_OFFSET","getItemIndex","containerRef","event","target","element","current","dataset","mouseTarget","parseInt","OptionsList","_a","ref","open","statusType","children","nativeAttributes","onKeyDown","onBlur","onFocus","onLoadMore","onMouseUp","onMouseMove","position","role","decreaseTopMargin","ariaLabel","ariaLabelledby","ariaDescribedby","restProps","baseProps","menuRef","handleScroll","scrollContainer","bottomEdgePosition","scrollTop","clientHeight","remainingScrollHeight","scrollHeight","className","mergedRef","style","onScroll","relatedTarget","tabIndex","forwardRef"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/internal/components/options-list/lib/default/internal/components/options-list/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport clsx from 'clsx';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\nimport React, { useEffect, useRef } from 'react';\nimport { BaseComponentProps, getBaseProps } from '../../base-component';\nimport {\n  fireNonCancelableEvent,\n  NonCancelableEventHandler,\n  CancelableEventHandler,\n  BaseKeyDetail,\n  fireKeyboardEvent,\n} from '../../events';\nimport { findUpUntil } from '../../utils/dom';\nimport styles from './styles.css.js';\nimport { DropdownStatusProps } from '../dropdown-status';\nimport { useStableCallback } from '@cloudscape-design/component-toolkit/internal';\n\nexport interface OptionsListProps extends BaseComponentProps {\n  open?: boolean;\n  statusType: DropdownStatusProps.StatusType;\n  /**\n   * Options list\n   */\n  children: React.ReactNode;\n  nativeAttributes?: Record<string, any>;\n  /**\n   * Called when more items need to be loaded.\n   */\n  onLoadMore?: NonCancelableEventHandler;\n  onKeyDown?: CancelableEventHandler<BaseKeyDetail>;\n  onBlur?: NonCancelableEventHandler<{ relatedTarget: Node | null }>;\n  onFocus?: NonCancelableEventHandler;\n  onMouseUp?: (itemIndex: number) => void;\n  onMouseMove?: (itemIndex: number) => void;\n  position?: React.CSSProperties['position'];\n  role?: 'listbox' | 'list' | 'menu';\n  ariaLabel?: string;\n  ariaLabelledby?: string;\n  ariaDescribedby?: string;\n  decreaseTopMargin?: boolean;\n}\n\nconst BOTTOM_TRIGGER_OFFSET = 80;\n\nconst getItemIndex = (containerRef: React.RefObject<HTMLElement>, event: React.MouseEvent) => {\n  const target = findUpUntil(\n    event.target as HTMLElement,\n    element => element === containerRef.current || !!element.dataset.mouseTarget\n  );\n  const mouseTarget = target?.dataset.mouseTarget;\n  return mouseTarget ? parseInt(mouseTarget) : -1;\n};\n\nconst OptionsList = (\n  {\n    open,\n    statusType,\n    children,\n    nativeAttributes = {},\n    onKeyDown,\n    onBlur,\n    onFocus,\n    onLoadMore,\n    onMouseUp,\n    onMouseMove,\n    position = 'relative',\n    role = 'listbox',\n    decreaseTopMargin = false,\n    ariaLabel,\n    ariaLabelledby,\n    ariaDescribedby,\n    ...restProps\n  }: OptionsListProps,\n  ref: React.Ref<HTMLUListElement>\n) => {\n  const baseProps = getBaseProps(restProps);\n  const menuRef = useRef<HTMLUListElement>(null);\n\n  const handleScroll = useStableCallback(() => {\n    const scrollContainer = menuRef?.current;\n    if (scrollContainer) {\n      const bottomEdgePosition = scrollContainer.scrollTop + scrollContainer.clientHeight;\n      const remainingScrollHeight = scrollContainer.scrollHeight - bottomEdgePosition;\n      if (remainingScrollHeight < BOTTOM_TRIGGER_OFFSET) {\n        fireNonCancelableEvent(onLoadMore);\n      }\n    }\n  });\n\n  useEffect(() => {\n    if (open && statusType === 'pending') {\n      handleScroll();\n    }\n  }, [open, statusType, handleScroll]);\n\n  const className = clsx(styles['options-list'], {\n    [styles['decrease-top-margin']]: decreaseTopMargin,\n  });\n\n  const mergedRef = useMergeRefs(ref, menuRef);\n\n  return (\n    <ul\n      {...baseProps}\n      {...nativeAttributes}\n      className={className}\n      ref={mergedRef}\n      style={{ position }}\n      role={role}\n      onScroll={handleScroll}\n      onKeyDown={event => onKeyDown && fireKeyboardEvent(onKeyDown, event)}\n      onMouseMove={event => onMouseMove?.(getItemIndex(menuRef, event))}\n      onMouseUp={event => onMouseUp?.(getItemIndex(menuRef, event))}\n      onBlur={event => fireNonCancelableEvent(onBlur, { relatedTarget: event.relatedTarget })}\n      onFocus={() => fireNonCancelableEvent(onFocus)}\n      tabIndex={-1}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledby}\n      aria-describedby={ariaDescribedby}\n    >\n      {open && children}\n    </ul>\n  );\n};\n\nexport default React.forwardRef(OptionsList);\n"]},"metadata":{},"sourceType":"module"}