{"ast":null,"code":"import _slicedToArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/regenerator/index.js\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __awaiter } from \"tslib\";\nimport { useCallback, useState } from 'react';\nimport { fireCancelableEvent } from '../internal/events';\nexport function useCellEditing(_ref) {\n  var _this = this;\n  var onCancel = _ref.onCancel,\n    onSubmit = _ref.onSubmit;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentEditCell = _useState2[0],\n    setCurrentEditCell = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    lastSuccessfulEditCell = _useState4[0],\n    setLastSuccessfulEditCell = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    currentEditLoading = _useState6[0],\n    setCurrentEditLoading = _useState6[1];\n  var startEdit = function startEdit(cellId) {\n    setLastSuccessfulEditCell(null);\n    setCurrentEditCell(cellId);\n  };\n  var cancelEdit = useCallback(function () {\n    return setCurrentEditCell(null);\n  }, []);\n  var completeEdit = function completeEdit(cellId, editCancelled) {\n    var eventCancelled = fireCancelableEvent(onCancel, {});\n    if (!eventCancelled) {\n      setCurrentEditCell(null);\n      if (!editCancelled) {\n        setLastSuccessfulEditCell(cellId);\n      }\n    }\n  };\n  var checkEditing = function checkEditing(_ref2) {\n    var rowIndex = _ref2.rowIndex,\n      colIndex = _ref2.colIndex;\n    return rowIndex === (currentEditCell === null || currentEditCell === void 0 ? void 0 : currentEditCell.rowIndex) && colIndex === currentEditCell.colIndex;\n  };\n  var checkLastSuccessfulEdit = function checkLastSuccessfulEdit(_ref3) {\n    var rowIndex = _ref3.rowIndex,\n      colIndex = _ref3.colIndex;\n    return rowIndex === (lastSuccessfulEditCell === null || lastSuccessfulEditCell === void 0 ? void 0 : lastSuccessfulEditCell.rowIndex) && colIndex === lastSuccessfulEditCell.colIndex;\n  };\n  var submitEdit = onSubmit ? function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setCurrentEditLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return onSubmit.apply(void 0, args);\n            case 4:\n              _context.prev = 4;\n              setCurrentEditLoading(false);\n              return _context.finish(4);\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1,, 4, 7]]);\n    }));\n  } : undefined;\n  return {\n    isLoading: currentEditLoading,\n    startEdit: startEdit,\n    cancelEdit: cancelEdit,\n    checkEditing: checkEditing,\n    checkLastSuccessfulEdit: checkLastSuccessfulEdit,\n    completeEdit: completeEdit,\n    submitEdit: submitEdit\n  };\n}","map":{"version":3,"mappings":";;AAAA;AACA;;AAEA,SAASA,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AAE7C,SAAiCC,mBAAmB,QAAQ,oBAAoB;AAYhF,OAAM,SAAUC,cAAc,OAAyC;EAAA;EAAA,IAAtCC,QAAQ,QAARA,QAAQ;IAAEC,QAAQ,QAARA,QAAQ;EACjD,gBAA8CJ,QAAQ,CAAgB,IAAI,CAAC;IAAA;IAApEK,eAAe;IAAEC,kBAAkB;EAC1C,iBAA4DN,QAAQ,CAAgB,IAAI,CAAC;IAAA;IAAlFO,sBAAsB;IAAEC,yBAAyB;EACxD,iBAAoDR,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA5DS,kBAAkB;IAAEC,qBAAqB;EAEhD,IAAMC,SAAS,GAAG,SAAZA,SAAS,CAAIC,MAAc,EAAI;IACnCJ,yBAAyB,CAAC,IAAI,CAAC;IAC/BF,kBAAkB,CAACM,MAAM,CAAC;EAC5B,CAAC;EAED,IAAMC,UAAU,GAAGd,WAAW,CAAC;IAAA,OAAMO,kBAAkB,CAAC,IAAI,CAAC;EAAA,GAAE,EAAE,CAAC;EAElE,IAAMQ,YAAY,GAAG,SAAfA,YAAY,CAAIF,MAAc,EAAEG,aAAsB,EAAI;IAC9D,IAAMC,cAAc,GAAGf,mBAAmB,CAACE,QAAQ,EAAE,EAAE,CAAC;IACxD,IAAI,CAACa,cAAc,EAAE;MACnBV,kBAAkB,CAAC,IAAI,CAAC;MACxB,IAAI,CAACS,aAAa,EAAE;QAClBP,yBAAyB,CAACI,MAAM,CAAC;;;EAGvC,CAAC;EAED,IAAMK,YAAY,GAAG,SAAfA,YAAY;IAAA,IAAMC,QAAQ,SAARA,QAAQ;MAAEC,QAAQ,SAARA,QAAQ;IAAA,OACxCD,QAAQ,MAAKb,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEa,QAAQ,KAAIC,QAAQ,KAAKd,eAAe,CAACc,QAAQ;EAAA;EAEjF,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuB;IAAA,IAAMF,QAAQ,SAARA,QAAQ;MAAEC,QAAQ,SAARA,QAAQ;IAAA,OACnDD,QAAQ,MAAKX,sBAAsB,aAAtBA,sBAAsB,uBAAtBA,sBAAsB,CAAEW,QAAQ,KAAIC,QAAQ,KAAKZ,sBAAsB,CAACY,QAAQ;EAAA;EAE/F,IAAME,UAAU,GAAGjB,QAAQ,GACvB;IAAA,kCAAUkB,IAAiC;MAAjCA,IAAiC;IAAA;IAAA,OAAIC;MAAA;QAAA;UAAA;YAAA;cAC7Cb,qBAAqB,CAAC,IAAI,CAAC;cAAC;cAAA;cAE1B,OAAMN,QAAQ,eAAIkB,IAAI,CAAC;YAAA;cAAA;cAEvBZ,qBAAqB,CAAC,KAAK,CAAC;cAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAEhC;EAAA,IACDc,SAAS;EAEb,OAAO;IACLC,SAAS,EAAEhB,kBAAkB;IAC7BE,SAAS,EAATA,SAAS;IACTE,UAAU,EAAVA,UAAU;IACVI,YAAY,EAAZA,YAAY;IACZG,uBAAuB,EAAvBA,uBAAuB;IACvBN,YAAY,EAAZA,YAAY;IACZO,UAAU,EAAVA;GACD;AACH","names":["useCallback","useState","fireCancelableEvent","useCellEditing","onCancel","onSubmit","currentEditCell","setCurrentEditCell","lastSuccessfulEditCell","setLastSuccessfulEditCell","currentEditLoading","setCurrentEditLoading","startEdit","cellId","cancelEdit","completeEdit","editCancelled","eventCancelled","checkEditing","rowIndex","colIndex","checkLastSuccessfulEdit","submitEdit","args","__awaiter","undefined","isLoading"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/table/lib/default/table/use-cell-editing.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useState } from 'react';\nimport { TableProps } from './interfaces';\nimport { CancelableEventHandler, fireCancelableEvent } from '../internal/events';\n\nexport interface CellId {\n  rowIndex: number;\n  colIndex: number;\n}\n\ninterface CellEditingProps {\n  onCancel?: CancelableEventHandler;\n  onSubmit?: TableProps.SubmitEditFunction<any>;\n}\n\nexport function useCellEditing({ onCancel, onSubmit }: CellEditingProps) {\n  const [currentEditCell, setCurrentEditCell] = useState<null | CellId>(null);\n  const [lastSuccessfulEditCell, setLastSuccessfulEditCell] = useState<null | CellId>(null);\n  const [currentEditLoading, setCurrentEditLoading] = useState(false);\n\n  const startEdit = (cellId: CellId) => {\n    setLastSuccessfulEditCell(null);\n    setCurrentEditCell(cellId);\n  };\n\n  const cancelEdit = useCallback(() => setCurrentEditCell(null), []);\n\n  const completeEdit = (cellId: CellId, editCancelled: boolean) => {\n    const eventCancelled = fireCancelableEvent(onCancel, {});\n    if (!eventCancelled) {\n      setCurrentEditCell(null);\n      if (!editCancelled) {\n        setLastSuccessfulEditCell(cellId);\n      }\n    }\n  };\n\n  const checkEditing = ({ rowIndex, colIndex }: CellId) =>\n    rowIndex === currentEditCell?.rowIndex && colIndex === currentEditCell.colIndex;\n\n  const checkLastSuccessfulEdit = ({ rowIndex, colIndex }: CellId) =>\n    rowIndex === lastSuccessfulEditCell?.rowIndex && colIndex === lastSuccessfulEditCell.colIndex;\n\n  const submitEdit = onSubmit\n    ? async (...args: Parameters<typeof onSubmit>) => {\n        setCurrentEditLoading(true);\n        try {\n          await onSubmit(...args);\n        } finally {\n          setCurrentEditLoading(false);\n        }\n      }\n    : undefined;\n\n  return {\n    isLoading: currentEditLoading,\n    startEdit,\n    cancelEdit,\n    checkEditing,\n    checkLastSuccessfulEdit,\n    completeEdit,\n    submitEdit,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}