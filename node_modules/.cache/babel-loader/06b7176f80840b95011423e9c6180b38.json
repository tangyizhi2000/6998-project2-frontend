{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useRef } from 'react';\nimport clsx from 'clsx';\nimport InternalForm from '../form/internal';\nimport InternalHeader from '../header/internal';\nimport { useMobile } from '../internal/hooks/use-mobile';\nimport WizardActions from './wizard-actions';\nimport WizardFormHeader from './wizard-form-header';\nimport styles from './styles.css.js';\nimport { useEffectOnUpdate } from '../internal/hooks/use-effect-on-update';\nimport { AnalyticsFunnelStep } from '../internal/analytics/components/analytics-funnel';\nimport { DATA_ATTR_FUNNEL_KEY, FUNNEL_KEY_STEP_NAME } from '../internal/analytics/selectors';\nexport const STEP_NAME_SELECTOR = `[${DATA_ATTR_FUNNEL_KEY}=${FUNNEL_KEY_STEP_NAME}]`;\nexport default function WizardForm(_ref) {\n  let {\n    steps,\n    activeStepIndex,\n    isVisualRefresh,\n    showCollapsedSteps,\n    i18nStrings,\n    submitButtonText,\n    isPrimaryLoading,\n    allowSkipTo,\n    secondaryActions,\n    onCancelClick,\n    onPreviousClick,\n    onPrimaryClick,\n    onSkipToClick\n  } = _ref;\n  const {\n    title,\n    info,\n    description,\n    content,\n    errorText,\n    isOptional\n  } = steps[activeStepIndex] || {};\n  const isLastStep = activeStepIndex >= steps.length - 1;\n  const skipToTargetIndex = findSkipToTargetIndex(steps, activeStepIndex);\n  const isMobile = useMobile();\n  const stepHeaderRef = useRef(null);\n  useEffectOnUpdate(() => {\n    var _a;\n    if (stepHeaderRef && stepHeaderRef.current) {\n      (_a = stepHeaderRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }, [activeStepIndex]);\n  const showSkipTo = allowSkipTo && skipToTargetIndex !== -1;\n  const skipToButtonText = skipToTargetIndex !== -1 && i18nStrings.skipToButtonLabel ? i18nStrings.skipToButtonLabel(steps[skipToTargetIndex], skipToTargetIndex + 1) : undefined;\n  return React.createElement(React.Fragment, null, React.createElement(AnalyticsFunnelStep, {\n    stepNameSelector: STEP_NAME_SELECTOR,\n    stepNumber: activeStepIndex + 1\n  }, _ref2 => {\n    let {\n      funnelStepProps\n    } = _ref2;\n    var _a;\n    return React.createElement(React.Fragment, null, React.createElement(WizardFormHeader, {\n      isMobile: isMobile || showCollapsedSteps,\n      isVisualRefresh: isVisualRefresh\n    }, React.createElement(\"div\", {\n      className: clsx(styles['collapsed-steps'], !showCollapsedSteps && styles['collapsed-steps-hidden'])\n    }, (_a = i18nStrings.collapsedStepsLabel) === null || _a === void 0 ? void 0 : _a.call(i18nStrings, activeStepIndex + 1, steps.length)), React.createElement(InternalHeader, {\n      className: styles['form-header-component'],\n      variant: \"h1\",\n      description: description,\n      info: info\n    }, React.createElement(\"span\", {\n      className: styles['form-header-component-wrapper'],\n      tabIndex: -1,\n      ref: stepHeaderRef\n    }, React.createElement(\"span\", Object.assign({}, {\n      [DATA_ATTR_FUNNEL_KEY]: FUNNEL_KEY_STEP_NAME\n    }), title), isOptional && React.createElement(\"i\", null, ` - ${i18nStrings.optional}`)))), React.createElement(InternalForm, Object.assign({\n      className: clsx(styles['form-component']),\n      actions: React.createElement(WizardActions, {\n        cancelButtonText: i18nStrings.cancelButton,\n        primaryButtonText: isLastStep ? submitButtonText !== null && submitButtonText !== void 0 ? submitButtonText : i18nStrings.submitButton : i18nStrings.nextButton,\n        primaryButtonLoadingText: isLastStep ? i18nStrings.submitButtonLoadingAnnouncement : i18nStrings.nextButtonLoadingAnnouncement,\n        previousButtonText: i18nStrings.previousButton,\n        onCancelClick: onCancelClick,\n        onPreviousClick: onPreviousClick,\n        onPrimaryClick: onPrimaryClick,\n        onSkipToClick: () => onSkipToClick(skipToTargetIndex),\n        showPrevious: activeStepIndex !== 0,\n        isPrimaryLoading: isPrimaryLoading,\n        showSkipTo: showSkipTo,\n        skipToButtonText: skipToButtonText\n      }),\n      secondaryActions: secondaryActions,\n      errorText: errorText,\n      errorIconAriaLabel: i18nStrings.errorIconAriaLabel\n    }, funnelStepProps), content));\n  }));\n}\nfunction findSkipToTargetIndex(steps, activeStepIndex) {\n  let nextRequiredStepIndex = activeStepIndex;\n  do {\n    nextRequiredStepIndex++;\n  } while (nextRequiredStepIndex < steps.length - 1 && steps[nextRequiredStepIndex].isOptional);\n  return nextRequiredStepIndex > activeStepIndex + 1 ? nextRequiredStepIndex : -1;\n}","map":{"version":3,"mappings":"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","names":["React","useRef","clsx","InternalForm","InternalHeader","useMobile","WizardActions","WizardFormHeader","styles","useEffectOnUpdate","AnalyticsFunnelStep","DATA_ATTR_FUNNEL_KEY","FUNNEL_KEY_STEP_NAME","STEP_NAME_SELECTOR","WizardForm","steps","activeStepIndex","isVisualRefresh","showCollapsedSteps","i18nStrings","submitButtonText","isPrimaryLoading","allowSkipTo","secondaryActions","onCancelClick","onPreviousClick","onPrimaryClick","onSkipToClick","title","info","description","content","errorText","isOptional","isLastStep","length","skipToTargetIndex","findSkipToTargetIndex","isMobile","stepHeaderRef","current","focus","showSkipTo","skipToButtonText","skipToButtonLabel","undefined","stepNameSelector","stepNumber","funnelStepProps","className","collapsedStepsLabel","variant","tabIndex","ref","optional","actions","cancelButtonText","cancelButton","primaryButtonText","submitButton","nextButton","primaryButtonLoadingText","submitButtonLoadingAnnouncement","nextButtonLoadingAnnouncement","previousButtonText","previousButton","showPrevious","errorIconAriaLabel","nextRequiredStepIndex"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/wizard/lib/default/wizard/wizard-form.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useRef } from 'react';\nimport clsx from 'clsx';\nimport InternalForm from '../form/internal';\nimport InternalHeader from '../header/internal';\nimport { useMobile } from '../internal/hooks/use-mobile';\nimport WizardActions from './wizard-actions';\nimport { WizardProps } from './interfaces';\nimport WizardFormHeader from './wizard-form-header';\nimport styles from './styles.css.js';\nimport { useEffectOnUpdate } from '../internal/hooks/use-effect-on-update';\nimport { AnalyticsFunnelStep } from '../internal/analytics/components/analytics-funnel';\nimport { DATA_ATTR_FUNNEL_KEY, FUNNEL_KEY_STEP_NAME } from '../internal/analytics/selectors';\n\ninterface WizardFormProps {\n  steps: ReadonlyArray<WizardProps.Step>;\n  activeStepIndex: number;\n  isVisualRefresh: boolean;\n  showCollapsedSteps: boolean;\n  i18nStrings: WizardProps.I18nStrings;\n  submitButtonText?: string;\n  isPrimaryLoading: boolean;\n  allowSkipTo: boolean;\n  secondaryActions?: React.ReactNode;\n  onCancelClick: () => void;\n  onPreviousClick: () => void;\n  onPrimaryClick: () => void;\n  onSkipToClick: (stepIndex: number) => void;\n}\n\nexport const STEP_NAME_SELECTOR = `[${DATA_ATTR_FUNNEL_KEY}=${FUNNEL_KEY_STEP_NAME}]`;\n\nexport default function WizardForm({\n  steps,\n  activeStepIndex,\n  isVisualRefresh,\n  showCollapsedSteps,\n  i18nStrings,\n  submitButtonText,\n  isPrimaryLoading,\n  allowSkipTo,\n  secondaryActions,\n  onCancelClick,\n  onPreviousClick,\n  onPrimaryClick,\n  onSkipToClick,\n}: WizardFormProps) {\n  const { title, info, description, content, errorText, isOptional } = steps[activeStepIndex] || {};\n  const isLastStep = activeStepIndex >= steps.length - 1;\n  const skipToTargetIndex = findSkipToTargetIndex(steps, activeStepIndex);\n  const isMobile = useMobile();\n  const stepHeaderRef = useRef<HTMLDivElement | null>(null);\n\n  useEffectOnUpdate(() => {\n    if (stepHeaderRef && stepHeaderRef.current) {\n      stepHeaderRef.current?.focus();\n    }\n  }, [activeStepIndex]);\n\n  const showSkipTo = allowSkipTo && skipToTargetIndex !== -1;\n  const skipToButtonText =\n    skipToTargetIndex !== -1 && i18nStrings.skipToButtonLabel\n      ? i18nStrings.skipToButtonLabel(steps[skipToTargetIndex], skipToTargetIndex + 1)\n      : undefined;\n\n  return (\n    <>\n      <AnalyticsFunnelStep stepNameSelector={STEP_NAME_SELECTOR} stepNumber={activeStepIndex + 1}>\n        {({ funnelStepProps }) => (\n          <>\n            <WizardFormHeader isMobile={isMobile || showCollapsedSteps} isVisualRefresh={isVisualRefresh}>\n              <div className={clsx(styles['collapsed-steps'], !showCollapsedSteps && styles['collapsed-steps-hidden'])}>\n                {i18nStrings.collapsedStepsLabel?.(activeStepIndex + 1, steps.length)}\n              </div>\n              <InternalHeader\n                className={styles['form-header-component']}\n                variant=\"h1\"\n                description={description}\n                info={info}\n              >\n                <span className={styles['form-header-component-wrapper']} tabIndex={-1} ref={stepHeaderRef}>\n                  <span {...{ [DATA_ATTR_FUNNEL_KEY]: FUNNEL_KEY_STEP_NAME }}>{title}</span>\n                  {isOptional && <i>{` - ${i18nStrings.optional}`}</i>}\n                </span>\n              </InternalHeader>\n            </WizardFormHeader>\n\n            <InternalForm\n              className={clsx(styles['form-component'])}\n              actions={\n                <WizardActions\n                  cancelButtonText={i18nStrings.cancelButton}\n                  primaryButtonText={isLastStep ? submitButtonText ?? i18nStrings.submitButton : i18nStrings.nextButton}\n                  primaryButtonLoadingText={\n                    isLastStep ? i18nStrings.submitButtonLoadingAnnouncement : i18nStrings.nextButtonLoadingAnnouncement\n                  }\n                  previousButtonText={i18nStrings.previousButton}\n                  onCancelClick={onCancelClick}\n                  onPreviousClick={onPreviousClick}\n                  onPrimaryClick={onPrimaryClick}\n                  onSkipToClick={() => onSkipToClick(skipToTargetIndex)}\n                  showPrevious={activeStepIndex !== 0}\n                  isPrimaryLoading={isPrimaryLoading}\n                  showSkipTo={showSkipTo}\n                  skipToButtonText={skipToButtonText}\n                />\n              }\n              secondaryActions={secondaryActions}\n              errorText={errorText}\n              errorIconAriaLabel={i18nStrings.errorIconAriaLabel}\n              {...funnelStepProps}\n            >\n              {content}\n            </InternalForm>\n          </>\n        )}\n      </AnalyticsFunnelStep>\n    </>\n  );\n}\n\nfunction findSkipToTargetIndex(steps: ReadonlyArray<WizardProps.Step>, activeStepIndex: number): number {\n  let nextRequiredStepIndex = activeStepIndex;\n  do {\n    nextRequiredStepIndex++;\n  } while (nextRequiredStepIndex < steps.length - 1 && steps[nextRequiredStepIndex].isOptional);\n\n  return nextRequiredStepIndex > activeStepIndex + 1 ? nextRequiredStepIndex : -1;\n}\n"]},"metadata":{},"sourceType":"module"}