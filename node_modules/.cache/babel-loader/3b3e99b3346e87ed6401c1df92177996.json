{"ast":null,"code":"import { compareDates, compareTimestamps } from '../date-utils/compare-dates.js';\nvar filterUsingOperator = function filterUsingOperator(itemValue, tokenValue, _a) {\n  var operator = _a.operator,\n    match = _a.match;\n  if (match === 'date' || match === 'datetime') {\n    var comparator = match === 'date' ? compareDates : compareTimestamps;\n    var comparisonResult = comparator(itemValue, tokenValue);\n    switch (operator) {\n      case '<':\n        return comparisonResult < 0;\n      case '<=':\n        return comparisonResult <= 0;\n      case '>':\n        return comparisonResult > 0;\n      case '>=':\n        return comparisonResult >= 0;\n      case '=':\n        return comparisonResult === 0;\n      case '!=':\n        return comparisonResult !== 0;\n      default:\n        return false;\n    }\n  } else if (typeof match === 'function') {\n    return match(itemValue, tokenValue);\n  } else if (match) {\n    throw new Error('Unsupported `operator.match` type given.');\n  }\n  switch (operator) {\n    case '<':\n      return itemValue < tokenValue;\n    case '<=':\n      return itemValue <= tokenValue;\n    case '>':\n      return itemValue > tokenValue;\n    case '>=':\n      return itemValue >= tokenValue;\n    case '=':\n      // eslint-disable-next-line eqeqeq\n      return itemValue == tokenValue;\n    case '!=':\n      // eslint-disable-next-line eqeqeq\n      return itemValue != tokenValue;\n    case ':':\n      return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) > -1;\n    case '!:':\n      return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) === -1;\n    case '^':\n      return (itemValue + '').toLowerCase().startsWith((tokenValue + '').toLowerCase());\n    // The unsupported operators result in an exception being thrown.\n    // The exception can be avoided if using the match function.\n    default:\n      throw new Error('Unsupported operator given.');\n  }\n};\nfunction freeTextFilter(value, item, operator, filteringPropertiesMap) {\n  var matches = Object.keys(filteringPropertiesMap).some(function (propertyKey) {\n    var operators = filteringPropertiesMap[propertyKey].operators;\n    return !!operators[operator] && filterUsingOperator(item[propertyKey], value, {\n      operator: ':'\n    });\n  });\n  return operator === ':' ? matches : !matches;\n}\nfunction filterByToken(token, item, filteringPropertiesMap) {\n  if (token.propertyKey) {\n    // token refers to a unknown property or uses an unsupported operator\n    if (!(token.propertyKey in filteringPropertiesMap) || !(token.operator in filteringPropertiesMap[token.propertyKey].operators)) {\n      return false;\n    }\n    var operator = filteringPropertiesMap[token.propertyKey].operators[token.operator];\n    var itemValue = (operator === null || operator === void 0 ? void 0 : operator.match) ? item[token.propertyKey] : fixupFalsyValues(item[token.propertyKey]);\n    return filterUsingOperator(itemValue, token.value, operator !== null && operator !== void 0 ? operator : {\n      operator: token.operator\n    });\n  }\n  return freeTextFilter(token.value, item, token.operator, filteringPropertiesMap);\n}\nfunction defaultFilteringFunction(filteringPropertiesMap) {\n  return function (item, _a) {\n    var tokens = _a.tokens,\n      operation = _a.operation;\n    var result = operation === 'and' ? true : !tokens.length;\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n      var token = tokens_1[_i];\n      result = operation === 'and' ? result && filterByToken(token, item, filteringPropertiesMap) : result || filterByToken(token, item, filteringPropertiesMap);\n    }\n    return result;\n  };\n}\nexport function propertyFilter(items, query, _a) {\n  var filteringFunction = _a.filteringFunction,\n    filteringProperties = _a.filteringProperties;\n  var filteringPropertiesMap = filteringProperties.reduce(function (acc, _a) {\n    var _b;\n    var key = _a.key,\n      operators = _a.operators,\n      defaultOperator = _a.defaultOperator;\n    var operatorMap = (_b = {}, _b[defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '='] = {\n      operator: defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '='\n    }, _b);\n    operators === null || operators === void 0 ? void 0 : operators.forEach(function (op) {\n      if (typeof op === 'string') {\n        operatorMap[op] = {\n          operator: op\n        };\n      } else {\n        operatorMap[op.operator] = {\n          operator: op.operator,\n          match: op.match\n        };\n      }\n    });\n    acc[key] = {\n      operators: operatorMap\n    };\n    return acc;\n  }, {});\n  var filter = filteringFunction || defaultFilteringFunction(filteringPropertiesMap);\n  return items.filter(function (item) {\n    return filter(item, query);\n  });\n}\nexport var fixupFalsyValues = function fixupFalsyValues(value) {\n  if (typeof value === 'boolean') {\n    return value + '';\n  }\n  if (value || value === 0) {\n    return value;\n  }\n  return '';\n};","map":{"version":3,"names":["compareDates","compareTimestamps","filterUsingOperator","itemValue","tokenValue","_a","operator","match","comparator","comparisonResult","Error","toLowerCase","indexOf","startsWith","freeTextFilter","value","item","filteringPropertiesMap","matches","Object","keys","some","propertyKey","operators","filterByToken","token","fixupFalsyValues","defaultFilteringFunction","tokens","operation","result","length","_i","tokens_1","propertyFilter","items","query","filteringFunction","filteringProperties","reduce","acc","_b","key","defaultOperator","operatorMap","forEach","op","filter"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/collection-hooks/dist/mjs/operations/property-filter.js"],"sourcesContent":["import { compareDates, compareTimestamps } from '../date-utils/compare-dates.js';\nvar filterUsingOperator = function (itemValue, tokenValue, _a) {\n    var operator = _a.operator, match = _a.match;\n    if (match === 'date' || match === 'datetime') {\n        var comparator = match === 'date' ? compareDates : compareTimestamps;\n        var comparisonResult = comparator(itemValue, tokenValue);\n        switch (operator) {\n            case '<':\n                return comparisonResult < 0;\n            case '<=':\n                return comparisonResult <= 0;\n            case '>':\n                return comparisonResult > 0;\n            case '>=':\n                return comparisonResult >= 0;\n            case '=':\n                return comparisonResult === 0;\n            case '!=':\n                return comparisonResult !== 0;\n            default:\n                return false;\n        }\n    }\n    else if (typeof match === 'function') {\n        return match(itemValue, tokenValue);\n    }\n    else if (match) {\n        throw new Error('Unsupported `operator.match` type given.');\n    }\n    switch (operator) {\n        case '<':\n            return itemValue < tokenValue;\n        case '<=':\n            return itemValue <= tokenValue;\n        case '>':\n            return itemValue > tokenValue;\n        case '>=':\n            return itemValue >= tokenValue;\n        case '=':\n            // eslint-disable-next-line eqeqeq\n            return itemValue == tokenValue;\n        case '!=':\n            // eslint-disable-next-line eqeqeq\n            return itemValue != tokenValue;\n        case ':':\n            return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) > -1;\n        case '!:':\n            return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) === -1;\n        case '^':\n            return (itemValue + '').toLowerCase().startsWith((tokenValue + '').toLowerCase());\n        // The unsupported operators result in an exception being thrown.\n        // The exception can be avoided if using the match function.\n        default:\n            throw new Error('Unsupported operator given.');\n    }\n};\nfunction freeTextFilter(value, item, operator, filteringPropertiesMap) {\n    var matches = Object.keys(filteringPropertiesMap).some(function (propertyKey) {\n        var operators = filteringPropertiesMap[propertyKey].operators;\n        return (!!operators[operator] && filterUsingOperator(item[propertyKey], value, { operator: ':' }));\n    });\n    return operator === ':' ? matches : !matches;\n}\nfunction filterByToken(token, item, filteringPropertiesMap) {\n    if (token.propertyKey) {\n        // token refers to a unknown property or uses an unsupported operator\n        if (!(token.propertyKey in filteringPropertiesMap) ||\n            !(token.operator in filteringPropertiesMap[token.propertyKey].operators)) {\n            return false;\n        }\n        var operator = filteringPropertiesMap[token.propertyKey].operators[token.operator];\n        var itemValue = (operator === null || operator === void 0 ? void 0 : operator.match)\n            ? item[token.propertyKey]\n            : fixupFalsyValues(item[token.propertyKey]);\n        return filterUsingOperator(itemValue, token.value, operator !== null && operator !== void 0 ? operator : { operator: token.operator });\n    }\n    return freeTextFilter(token.value, item, token.operator, filteringPropertiesMap);\n}\nfunction defaultFilteringFunction(filteringPropertiesMap) {\n    return function (item, _a) {\n        var tokens = _a.tokens, operation = _a.operation;\n        var result = operation === 'and' ? true : !tokens.length;\n        for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n            var token = tokens_1[_i];\n            result =\n                operation === 'and'\n                    ? result && filterByToken(token, item, filteringPropertiesMap)\n                    : result || filterByToken(token, item, filteringPropertiesMap);\n        }\n        return result;\n    };\n}\nexport function propertyFilter(items, query, _a) {\n    var filteringFunction = _a.filteringFunction, filteringProperties = _a.filteringProperties;\n    var filteringPropertiesMap = filteringProperties.reduce(function (acc, _a) {\n        var _b;\n        var key = _a.key, operators = _a.operators, defaultOperator = _a.defaultOperator;\n        var operatorMap = (_b = {}, _b[defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '='] = { operator: defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '=' }, _b);\n        operators === null || operators === void 0 ? void 0 : operators.forEach(function (op) {\n            if (typeof op === 'string') {\n                operatorMap[op] = { operator: op };\n            }\n            else {\n                operatorMap[op.operator] = { operator: op.operator, match: op.match };\n            }\n        });\n        acc[key] = {\n            operators: operatorMap,\n        };\n        return acc;\n    }, {});\n    var filter = filteringFunction || defaultFilteringFunction(filteringPropertiesMap);\n    return items.filter(function (item) { return filter(item, query); });\n}\nexport var fixupFalsyValues = function (value) {\n    if (typeof value === 'boolean') {\n        return value + '';\n    }\n    if (value || value === 0) {\n        return value;\n    }\n    return '';\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}