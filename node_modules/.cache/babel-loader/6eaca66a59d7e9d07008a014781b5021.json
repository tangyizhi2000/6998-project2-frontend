{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useState } from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nexport function createSingletonHandler(factory) {\n  var listeners = [];\n  var callback = function (value) {\n    unstable_batchedUpdates(function () {\n      for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {\n        var listener = listeners_1[_i];\n        listener(value);\n      }\n    });\n  };\n  var cleanup;\n  return function useSingleton(listener) {\n    useEffect(function () {\n      if (listeners.length === 0) {\n        cleanup = factory(callback);\n      }\n      listeners.push(listener);\n      return function () {\n        listeners.splice(listeners.indexOf(listener), 1);\n        if (listeners.length === 0) {\n          cleanup();\n          cleanup = undefined;\n        }\n      };\n      // register handlers only on mount\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n  };\n}\nexport function createSingletonState(_a) {\n  var factory = _a.factory,\n    initialState = _a.initialState;\n  var useSingleton = createSingletonHandler(factory);\n  var value = initialState;\n  return function useSingletonState() {\n    var _a = useState(value),\n      state = _a[0],\n      setState = _a[1];\n    useSingleton(function (newValue) {\n      value = newValue;\n      setState(newValue);\n    });\n    return state;\n  };\n}","map":{"version":3,"names":["useEffect","useState","unstable_batchedUpdates","createSingletonHandler","factory","listeners","callback","value","_i","listeners_1","length","listener","cleanup","useSingleton","push","splice","indexOf","undefined","createSingletonState","_a","initialState","useSingletonState","state","setState","newValue"],"sources":["/Users/tangyizhi/Desktop/Assignment 2/frontend/node_modules/@cloudscape-design/component-toolkit/lib/internal/singleton-handler/index.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useState } from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nexport function createSingletonHandler(factory) {\n    var listeners = [];\n    var callback = function (value) {\n        unstable_batchedUpdates(function () {\n            for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {\n                var listener = listeners_1[_i];\n                listener(value);\n            }\n        });\n    };\n    var cleanup;\n    return function useSingleton(listener) {\n        useEffect(function () {\n            if (listeners.length === 0) {\n                cleanup = factory(callback);\n            }\n            listeners.push(listener);\n            return function () {\n                listeners.splice(listeners.indexOf(listener), 1);\n                if (listeners.length === 0) {\n                    cleanup();\n                    cleanup = undefined;\n                }\n            };\n            // register handlers only on mount\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, []);\n    };\n}\nexport function createSingletonState(_a) {\n    var factory = _a.factory, initialState = _a.initialState;\n    var useSingleton = createSingletonHandler(factory);\n    var value = initialState;\n    return function useSingletonState() {\n        var _a = useState(value), state = _a[0], setState = _a[1];\n        useSingleton(function (newValue) {\n            value = newValue;\n            setState(newValue);\n        });\n        return state;\n    };\n}\n"],"mappings":"AAAA;AACA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,uBAAuB,QAAQ,WAAW;AACnD,OAAO,SAASC,sBAAsB,CAACC,OAAO,EAAE;EAC5C,IAAIC,SAAS,GAAG,EAAE;EAClB,IAAIC,QAAQ,GAAG,UAAUC,KAAK,EAAE;IAC5BL,uBAAuB,CAAC,YAAY;MAChC,KAAK,IAAIM,EAAE,GAAG,CAAC,EAAEC,WAAW,GAAGJ,SAAS,EAAEG,EAAE,GAAGC,WAAW,CAACC,MAAM,EAAEF,EAAE,EAAE,EAAE;QACrE,IAAIG,QAAQ,GAAGF,WAAW,CAACD,EAAE,CAAC;QAC9BG,QAAQ,CAACJ,KAAK,CAAC;MACnB;IACJ,CAAC,CAAC;EACN,CAAC;EACD,IAAIK,OAAO;EACX,OAAO,SAASC,YAAY,CAACF,QAAQ,EAAE;IACnCX,SAAS,CAAC,YAAY;MAClB,IAAIK,SAAS,CAACK,MAAM,KAAK,CAAC,EAAE;QACxBE,OAAO,GAAGR,OAAO,CAACE,QAAQ,CAAC;MAC/B;MACAD,SAAS,CAACS,IAAI,CAACH,QAAQ,CAAC;MACxB,OAAO,YAAY;QACfN,SAAS,CAACU,MAAM,CAACV,SAAS,CAACW,OAAO,CAACL,QAAQ,CAAC,EAAE,CAAC,CAAC;QAChD,IAAIN,SAAS,CAACK,MAAM,KAAK,CAAC,EAAE;UACxBE,OAAO,EAAE;UACTA,OAAO,GAAGK,SAAS;QACvB;MACJ,CAAC;MACD;MACA;IACJ,CAAC,EAAE,EAAE,CAAC;EACV,CAAC;AACL;AACA,OAAO,SAASC,oBAAoB,CAACC,EAAE,EAAE;EACrC,IAAIf,OAAO,GAAGe,EAAE,CAACf,OAAO;IAAEgB,YAAY,GAAGD,EAAE,CAACC,YAAY;EACxD,IAAIP,YAAY,GAAGV,sBAAsB,CAACC,OAAO,CAAC;EAClD,IAAIG,KAAK,GAAGa,YAAY;EACxB,OAAO,SAASC,iBAAiB,GAAG;IAChC,IAAIF,EAAE,GAAGlB,QAAQ,CAACM,KAAK,CAAC;MAAEe,KAAK,GAAGH,EAAE,CAAC,CAAC,CAAC;MAAEI,QAAQ,GAAGJ,EAAE,CAAC,CAAC,CAAC;IACzDN,YAAY,CAAC,UAAUW,QAAQ,EAAE;MAC7BjB,KAAK,GAAGiB,QAAQ;MAChBD,QAAQ,CAACC,QAAQ,CAAC;IACtB,CAAC,CAAC;IACF,OAAOF,KAAK;EAChB,CAAC;AACL"},"metadata":{},"sourceType":"module"}