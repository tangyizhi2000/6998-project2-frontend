{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { nodeContains } from '@cloudscape-design/component-toolkit/dom';\nimport { getBaseProps } from '../../base-component';\nimport PopoverContainer from '../../../popover/container';\nimport PopoverBody from '../../../popover/body';\nimport popoverStyles from '../../../popover/styles.css.js';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\nimport styles from './styles.css.js';\nimport { nodeBelongs } from '../../utils/node-belongs';\nexport default React.forwardRef(ChartPopover);\nfunction ChartPopover(_a, ref) {\n  var {\n      position = 'right',\n      size = 'medium',\n      fixedWidth = false,\n      dismissButton = false,\n      dismissAriaLabel,\n      children,\n      title,\n      trackRef,\n      trackKey,\n      onDismiss,\n      container,\n      onMouseEnter,\n      onMouseLeave\n    } = _a,\n    restProps = __rest(_a, [\"position\", \"size\", \"fixedWidth\", \"dismissButton\", \"dismissAriaLabel\", \"children\", \"title\", \"trackRef\", \"trackKey\", \"onDismiss\", \"container\", \"onMouseEnter\", \"onMouseLeave\"]);\n  const baseProps = getBaseProps(restProps);\n  const popoverObjectRef = useRef(null);\n  const popoverRef = useMergeRefs(popoverObjectRef, ref);\n  useEffect(() => {\n    const onDocumentClick = event => {\n      if (event.target && !nodeBelongs(popoverObjectRef.current, event.target) &&\n      // click not in popover\n      !nodeContains(container, event.target) // click not in segment\n      ) {\n        onDismiss(true);\n      }\n    };\n    document.addEventListener('mousedown', onDocumentClick, {\n      capture: true\n    });\n    return () => {\n      document.removeEventListener('mousedown', onDocumentClick, {\n        capture: true\n      });\n    };\n  }, [container, onDismiss]);\n  return React.createElement(\"div\", Object.assign({}, baseProps, {\n    className: clsx(popoverStyles.root, styles.root, baseProps.className),\n    ref: popoverRef,\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave\n  }), React.createElement(PopoverContainer, {\n    size: size,\n    fixedWidth: fixedWidth,\n    position: position,\n    trackRef: trackRef,\n    trackKey: trackKey,\n    arrow: position => React.createElement(\"div\", {\n      className: clsx(popoverStyles.arrow, popoverStyles[`arrow-position-${position}`])\n    }, React.createElement(\"div\", {\n      className: popoverStyles['arrow-outer']\n    }), React.createElement(\"div\", {\n      className: popoverStyles['arrow-inner']\n    }))\n  }, React.createElement(\"div\", {\n    className: styles['hover-area']\n  }, React.createElement(PopoverBody, {\n    dismissButton: dismissButton,\n    dismissAriaLabel: dismissAriaLabel,\n    header: title,\n    onDismiss: onDismiss,\n    overflowVisible: \"content\",\n    className: styles['popover-body']\n  }, children))));\n}","map":{"version":3,"mappings":"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","names":["React","useEffect","useRef","clsx","nodeContains","getBaseProps","PopoverContainer","PopoverBody","popoverStyles","useMergeRefs","styles","nodeBelongs","forwardRef","ChartPopover","_a","ref","position","size","fixedWidth","dismissButton","dismissAriaLabel","children","title","trackRef","trackKey","onDismiss","container","onMouseEnter","onMouseLeave","restProps","baseProps","popoverObjectRef","popoverRef","onDocumentClick","event","target","current","document","addEventListener","capture","removeEventListener","className","root","arrow","header","overflowVisible"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/internal/components/chart-popover/lib/default/internal/components/chart-popover/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { nodeContains } from '@cloudscape-design/component-toolkit/dom';\n\nimport { getBaseProps } from '../../base-component';\n\nimport { PopoverProps } from '../../../popover/interfaces';\nimport PopoverContainer from '../../../popover/container';\nimport PopoverBody from '../../../popover/body';\nimport popoverStyles from '../../../popover/styles.css.js';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\n\nimport styles from './styles.css.js';\nimport { nodeBelongs } from '../../utils/node-belongs';\n\nexport interface ChartPopoverProps extends PopoverProps {\n  /** Title of the popover */\n  title?: React.ReactNode;\n\n  /** References the element the container is positioned against. */\n  trackRef: React.RefObject<Element>;\n  /**\n    Used to update the container position in case track or track position changes:\n    \n    const trackRef = useRef<Element>(null)\n    return (<>\n      <Track style={getPosition(selectedItemId)} ref={trackRef} />\n      <PopoverContainer trackRef={trackRef} trackKey={selectedItemId} .../>\n    </>)\n  */\n  trackKey?: string | number;\n\n  /** Optional container element that prevents any clicks in there from dismissing the popover */\n  container: Element | null;\n\n  /** Event that is fired when the popover is dismissed */\n  onDismiss: (outsideClick?: boolean) => void;\n\n  /** Fired when the pointer enters the hoverable area around the popover */\n  onMouseEnter?: (event: React.MouseEvent) => void;\n\n  /** Fired when the pointer leaves the hoverable area around the popover */\n  onMouseLeave?: (event: React.MouseEvent) => void;\n\n  /** Popover content */\n  children?: React.ReactNode;\n}\n\nexport default React.forwardRef(ChartPopover);\n\nfunction ChartPopover(\n  {\n    position = 'right',\n    size = 'medium',\n    fixedWidth = false,\n    dismissButton = false,\n    dismissAriaLabel,\n\n    children,\n\n    title,\n    trackRef,\n    trackKey,\n    onDismiss,\n    container,\n\n    onMouseEnter,\n    onMouseLeave,\n\n    ...restProps\n  }: ChartPopoverProps,\n  ref: React.Ref<HTMLElement>\n) {\n  const baseProps = getBaseProps(restProps);\n  const popoverObjectRef = useRef<HTMLDivElement | null>(null);\n\n  const popoverRef = useMergeRefs(popoverObjectRef, ref);\n\n  useEffect(() => {\n    const onDocumentClick = (event: MouseEvent) => {\n      if (\n        event.target &&\n        !nodeBelongs(popoverObjectRef.current, event.target as Element) && // click not in popover\n        !nodeContains(container, event.target as Element) // click not in segment\n      ) {\n        onDismiss(true);\n      }\n    };\n\n    document.addEventListener('mousedown', onDocumentClick, { capture: true });\n    return () => {\n      document.removeEventListener('mousedown', onDocumentClick, { capture: true });\n    };\n  }, [container, onDismiss]);\n\n  return (\n    <div\n      {...baseProps}\n      className={clsx(popoverStyles.root, styles.root, baseProps.className)}\n      ref={popoverRef}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      <PopoverContainer\n        size={size}\n        fixedWidth={fixedWidth}\n        position={position}\n        trackRef={trackRef}\n        trackKey={trackKey}\n        arrow={position => (\n          <div className={clsx(popoverStyles.arrow, popoverStyles[`arrow-position-${position}`])}>\n            <div className={popoverStyles['arrow-outer']} />\n            <div className={popoverStyles['arrow-inner']} />\n          </div>\n        )}\n      >\n        <div className={styles['hover-area']}>\n          <PopoverBody\n            dismissButton={dismissButton}\n            dismissAriaLabel={dismissAriaLabel}\n            header={title}\n            onDismiss={onDismiss}\n            overflowVisible=\"content\"\n            className={styles['popover-body']}\n          >\n            {children}\n          </PopoverBody>\n        </div>\n      </PopoverContainer>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}