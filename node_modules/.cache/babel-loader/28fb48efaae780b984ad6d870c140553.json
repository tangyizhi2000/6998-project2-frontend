{"ast":null,"code":"import _toConsumableArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { fireNonCancelableEvent } from '../../events';\nimport { calculatePosition, defaultMaxDropdownWidth, hasEnoughSpaceToStretchBeyondTriggerWidth } from './dropdown-fit-handler';\nimport { Transition } from '../transition';\nimport { useVisualRefresh } from '../../hooks/use-visual-mode';\nimport { usePortalModeClasses } from '../../hooks/use-portal-mode-classes';\nimport { DropdownContextProvider } from './context';\nimport { useMobile } from '../../hooks/use-mobile';\nimport TabTrap from '../tab-trap/index.js';\nimport { getFirstFocusable, getLastFocusable } from '../focus-lock/utils.js';\nimport { useUniqueId } from '../../hooks/use-unique-id/index.js';\nimport customCssProps from '../../generated/custom-css-properties';\nimport { useResizeObserver } from '@cloudscape-design/component-toolkit/internal';\nvar DropdownContainer = function DropdownContainer(_ref) {\n  var children = _ref.children,\n    _ref$renderWithPortal = _ref.renderWithPortal,\n    renderWithPortal = _ref$renderWithPortal === void 0 ? false : _ref$renderWithPortal,\n    id = _ref.id,\n    referrerId = _ref.referrerId,\n    open = _ref.open;\n  if (renderWithPortal) {\n    if (open) {\n      return createPortal(React.createElement(\"div\", {\n        id: id,\n        \"data-awsui-referrer-id\": referrerId\n      }, children), document.body);\n    } else {\n      return null;\n    }\n  } else {\n    return React.createElement(React.Fragment, null, children);\n  }\n};\nvar TransitionContent = function TransitionContent(_ref2) {\n  var _clsx;\n  var state = _ref2.state,\n    transitionRef = _ref2.transitionRef,\n    dropdownClasses = _ref2.dropdownClasses,\n    stretchWidth = _ref2.stretchWidth,\n    interior = _ref2.interior,\n    isRefresh = _ref2.isRefresh,\n    dropdownRef = _ref2.dropdownRef,\n    verticalContainerRef = _ref2.verticalContainerRef,\n    expandToViewport = _ref2.expandToViewport,\n    stretchBeyondTriggerWidth = _ref2.stretchBeyondTriggerWidth,\n    header = _ref2.header,\n    children = _ref2.children,\n    footer = _ref2.footer,\n    position = _ref2.position,\n    open = _ref2.open,\n    onMouseDown = _ref2.onMouseDown,\n    id = _ref2.id,\n    role = _ref2.role,\n    ariaLabelledby = _ref2.ariaLabelledby,\n    ariaDescribedby = _ref2.ariaDescribedby;\n  var contentRef = useMergeRefs(dropdownRef, transitionRef);\n  return React.createElement(\"div\", {\n    className: clsx(styles.dropdown, dropdownClasses, (_clsx = {}, _defineProperty(_clsx, styles.open, open), _defineProperty(_clsx, styles['with-limited-width'], !stretchWidth), _defineProperty(_clsx, styles['hide-upper-border'], stretchWidth), _defineProperty(_clsx, styles.interior, interior), _defineProperty(_clsx, styles.refresh, isRefresh), _defineProperty(_clsx, styles['use-portal'], expandToViewport && !interior), _defineProperty(_clsx, styles['stretch-beyond-trigger-width'], stretchBeyondTriggerWidth), _clsx)),\n    ref: contentRef,\n    id: id,\n    role: role,\n    \"aria-labelledby\": ariaLabelledby,\n    \"aria-describedby\": ariaDescribedby,\n    \"data-open\": open,\n    \"data-animating\": state !== 'exited',\n    \"aria-hidden\": !open,\n    style: stretchBeyondTriggerWidth ? _defineProperty({}, customCssProps.dropdownDefaultMaxWidth, \"\".concat(defaultMaxDropdownWidth, \"px\")) : {},\n    onMouseDown: onMouseDown\n  }, React.createElement(\"div\", {\n    className: clsx(styles['dropdown-content-wrapper'], !header && !children && styles['is-empty'], isRefresh && styles.refresh)\n  }, React.createElement(\"div\", {\n    ref: verticalContainerRef,\n    className: styles['dropdown-content']\n  }, React.createElement(DropdownContextProvider, {\n    position: position\n  }, header, children, footer))));\n};\nvar Dropdown = function Dropdown(_ref4) {\n  var children = _ref4.children,\n    trigger = _ref4.trigger,\n    open = _ref4.open,\n    onDropdownClose = _ref4.onDropdownClose,\n    onMouseDown = _ref4.onMouseDown,\n    header = _ref4.header,\n    footer = _ref4.footer,\n    dropdownId = _ref4.dropdownId,\n    _ref4$stretchTriggerH = _ref4.stretchTriggerHeight,\n    stretchTriggerHeight = _ref4$stretchTriggerH === void 0 ? false : _ref4$stretchTriggerH,\n    _ref4$stretchWidth = _ref4.stretchWidth,\n    stretchWidth = _ref4$stretchWidth === void 0 ? true : _ref4$stretchWidth,\n    _ref4$stretchHeight = _ref4.stretchHeight,\n    stretchHeight = _ref4$stretchHeight === void 0 ? false : _ref4$stretchHeight,\n    _ref4$stretchToTrigge = _ref4.stretchToTriggerWidth,\n    stretchToTriggerWidth = _ref4$stretchToTrigge === void 0 ? true : _ref4$stretchToTrigge,\n    _ref4$stretchBeyondTr = _ref4.stretchBeyondTriggerWidth,\n    stretchBeyondTriggerWidth = _ref4$stretchBeyondTr === void 0 ? false : _ref4$stretchBeyondTr,\n    _ref4$expandToViewpor = _ref4.expandToViewport,\n    expandToViewport = _ref4$expandToViewpor === void 0 ? false : _ref4$expandToViewpor,\n    _ref4$preferCenter = _ref4.preferCenter,\n    preferCenter = _ref4$preferCenter === void 0 ? false : _ref4$preferCenter,\n    _ref4$interior = _ref4.interior,\n    interior = _ref4$interior === void 0 ? false : _ref4$interior,\n    minWidth = _ref4.minWidth,\n    _ref4$scrollable = _ref4.scrollable,\n    scrollable = _ref4$scrollable === void 0 ? true : _ref4$scrollable,\n    _ref4$loopFocus = _ref4.loopFocus,\n    loopFocus = _ref4$loopFocus === void 0 ? expandToViewport : _ref4$loopFocus,\n    onFocus = _ref4.onFocus,\n    onBlur = _ref4.onBlur,\n    contentKey = _ref4.contentKey,\n    dropdownContentId = _ref4.dropdownContentId,\n    dropdownContentRole = _ref4.dropdownContentRole,\n    ariaLabelledby = _ref4.ariaLabelledby,\n    ariaDescribedby = _ref4.ariaDescribedby;\n  var wrapperRef = useRef(null);\n  var triggerRef = useRef(null);\n  var dropdownRef = useRef(null);\n  var dropdownContainerRef = useRef(null);\n  // This container is only needed to apply max-height to. We can't move max-height to it's parent\n  // because of an IE11 issue with flexbox. https://github.com/philipwalton/flexbugs/issues/216\n  var verticalContainerRef = useRef(null);\n  // To keep track of the initial position (drop up/down) which is kept the same during fixed repositioning\n  var fixedPosition = useRef(null);\n  var isRefresh = useVisualRefresh();\n  var dropdownClasses = usePortalModeClasses(triggerRef);\n  var _useState = useState('bottom-right'),\n    _useState2 = _slicedToArray(_useState, 2),\n    position = _useState2[0],\n    setPosition = _useState2[1];\n  var isMobile = useMobile();\n  var setDropdownPosition = function setDropdownPosition(position, triggerBox, target, verticalContainer) {\n    var entireWidth = !interior && stretchWidth;\n    if (!stretchWidth) {\n      // 1px offset for dropdowns where the dropdown itself needs a border, rather than on the items\n      verticalContainer.style.maxHeight = \"\".concat(parseInt(position.height) + 1, \"px\");\n    } else {\n      verticalContainer.style.maxHeight = position.height;\n    }\n    if (entireWidth && !expandToViewport) {\n      if (stretchToTriggerWidth) {\n        target.classList.add(styles['occupy-entire-width']);\n      }\n    } else {\n      target.style.width = position.width;\n    }\n    // Using styles for main dropdown to adjust its position as preferred alternative\n    if (position.dropUp && !interior) {\n      target.classList.add(styles['dropdown-drop-up']);\n      if (!expandToViewport) {\n        target.style.bottom = '100%';\n      }\n    } else {\n      target.classList.remove(styles['dropdown-drop-up']);\n    }\n    target.classList.add(position.dropLeft ? styles['dropdown-drop-left'] : styles['dropdown-drop-right']);\n    if (position.left && position.left !== 'auto') {\n      target.style.left = position.left;\n    }\n    // Position normal overflow dropdowns with fixed positioning relative to viewport\n    if (expandToViewport && !interior) {\n      target.style.position = 'fixed';\n      if (position.dropUp) {\n        target.style.bottom = \"calc(100% - \".concat(triggerBox.top, \"px)\");\n      } else {\n        target.style.top = \"\".concat(triggerBox.bottom, \"px\");\n      }\n      if (position.dropLeft) {\n        target.style.left = \"calc(\".concat(triggerBox.right, \"px - \").concat(position.width, \")\");\n      } else {\n        target.style.left = \"\".concat(triggerBox.left, \"px\");\n      }\n      // Keep track of the initial dropdown position and direction.\n      // Dropdown direction doesn't need to change as the user scrolls, just needs to stay attached to the trigger.\n      fixedPosition.current = position;\n      return;\n    }\n    // For an interior dropdown (the fly out) we need exact values for positioning\n    // and classes are not enough\n    // usage of relative position is impossible due to overwrite of overflow-x\n    if (interior && isInteriorPosition(position)) {\n      if (position.dropUp) {\n        target.style.bottom = position.bottom;\n      } else {\n        target.style.top = position.top;\n      }\n      target.style.left = position.left;\n    }\n    if (position.dropUp && position.dropLeft) {\n      setPosition('top-left');\n    } else if (position.dropUp) {\n      setPosition('top-right');\n    } else if (position.dropLeft) {\n      setPosition('bottom-left');\n    } else {\n      setPosition('bottom-right');\n    }\n  };\n  var isOutsideDropdown = function isOutsideDropdown(element) {\n    return (!wrapperRef.current || !wrapperRef.current.contains(element)) && (!dropdownContainerRef.current || !dropdownContainerRef.current.contains(element));\n  };\n  var focusHandler = function focusHandler(event) {\n    if (!event.relatedTarget || isOutsideDropdown(event.relatedTarget)) {\n      fireNonCancelableEvent(onFocus, event);\n    }\n  };\n  var blurHandler = function blurHandler(event) {\n    if (!event.relatedTarget || isOutsideDropdown(event.relatedTarget)) {\n      fireNonCancelableEvent(onBlur, event);\n    }\n  };\n  // Prevent the dropdown width from stretching beyond the trigger width\n  // if that is going to cause the dropdown to be cropped because of overflow\n  var fixStretching = function fixStretching() {\n    var classNameToRemove = styles['stretch-beyond-trigger-width'];\n    if (open && stretchBeyondTriggerWidth && dropdownRef.current && triggerRef.current && dropdownRef.current.classList.contains(classNameToRemove) && !hasEnoughSpaceToStretchBeyondTriggerWidth({\n      triggerElement: triggerRef.current,\n      dropdownElement: dropdownRef.current,\n      desiredMinWidth: minWidth,\n      expandToViewport: expandToViewport,\n      stretchWidth: stretchWidth,\n      stretchHeight: stretchHeight,\n      isMobile: isMobile\n    })) {\n      dropdownRef.current.classList.remove(classNameToRemove);\n    }\n  };\n  useResizeObserver(function () {\n    return dropdownRef.current;\n  }, fixStretching);\n  useLayoutEffect(function () {\n    var onDropdownOpen = function onDropdownOpen() {\n      if (open && dropdownRef.current && triggerRef.current && verticalContainerRef.current) {\n        // calculate scroll width only for dropdowns that has a scrollbar and ignore it for date picker components\n        if (scrollable) {\n          dropdownRef.current.classList.add(styles.nowrap);\n        }\n        setDropdownPosition.apply(void 0, _toConsumableArray(calculatePosition(dropdownRef.current, triggerRef.current, verticalContainerRef.current, interior, expandToViewport, preferCenter, stretchWidth, stretchHeight, isMobile, minWidth, stretchBeyondTriggerWidth)).concat([dropdownRef.current, verticalContainerRef.current]));\n        if (scrollable) {\n          dropdownRef.current.classList.remove(styles.nowrap);\n        }\n      }\n    };\n    onDropdownOpen();\n    if (open) {\n      // window may scroll when dropdown opens, for example when soft keyboard shows up\n      window.addEventListener('scroll', onDropdownOpen);\n      // only listen to window scroll within very short time after the dropdown opens\n      // do not want to interfere dropdown position on scroll afterwards\n      var timeoutId = setTimeout(function () {\n        window.removeEventListener('scroll', onDropdownOpen);\n      }, 500);\n      return function () {\n        clearTimeout(timeoutId);\n        window.removeEventListener('scroll', onDropdownOpen);\n      };\n    }\n    // See AWSUI-13040\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open, dropdownRef, triggerRef, verticalContainerRef, interior, stretchWidth, isMobile, contentKey]);\n  // subscribe to outside click\n  useEffect(function () {\n    if (!open) {\n      return;\n    }\n    var clickListener = function clickListener(e) {\n      var _a, _b;\n      if (!((_a = dropdownRef.current) === null || _a === void 0 ? void 0 : _a.contains(e.target)) && !((_b = triggerRef.current) === null || _b === void 0 ? void 0 : _b.contains(e.target))) {\n        fireNonCancelableEvent(onDropdownClose);\n      }\n    };\n    window.addEventListener('click', clickListener, true);\n    return function () {\n      window.removeEventListener('click', clickListener, true);\n    };\n  }, [open, onDropdownClose]);\n  // sync dropdown position on scroll and resize\n  useLayoutEffect(function () {\n    if (!expandToViewport || !open) {\n      return;\n    }\n    var updateDropdownPosition = function updateDropdownPosition() {\n      if (triggerRef.current && dropdownRef.current && verticalContainerRef.current) {\n        var triggerRect = triggerRef.current.getBoundingClientRect();\n        var target = dropdownRef.current;\n        if (fixedPosition.current) {\n          if (fixedPosition.current.dropUp) {\n            dropdownRef.current.style.bottom = \"calc(100% - \".concat(triggerRect.top, \"px)\");\n          } else {\n            target.style.top = \"\".concat(triggerRect.bottom, \"px\");\n          }\n          if (fixedPosition.current.dropLeft) {\n            target.style.left = \"calc(\".concat(triggerRect.right, \"px - \").concat(fixedPosition.current.width, \")\");\n          } else {\n            target.style.left = \"\".concat(triggerRect.left, \"px\");\n          }\n        }\n      }\n    };\n    updateDropdownPosition();\n    window.addEventListener('scroll', updateDropdownPosition, true);\n    window.addEventListener('resize', updateDropdownPosition, true);\n    return function () {\n      window.removeEventListener('scroll', updateDropdownPosition, true);\n      window.removeEventListener('resize', updateDropdownPosition, true);\n    };\n  }, [open, expandToViewport]);\n  var referrerId = useUniqueId();\n  return React.createElement(\"div\", {\n    className: clsx(styles.root, interior && styles.interior, stretchTriggerHeight && styles['stretch-trigger-height']),\n    ref: wrapperRef,\n    onFocus: focusHandler,\n    onBlur: blurHandler\n  }, React.createElement(\"div\", {\n    id: referrerId,\n    className: clsx(stretchTriggerHeight && styles['stretch-trigger-height']),\n    ref: triggerRef\n  }, trigger), React.createElement(TabTrap, {\n    focusNextCallback: function focusNextCallback() {\n      var _a;\n      return dropdownRef.current && ((_a = getFirstFocusable(dropdownRef.current)) === null || _a === void 0 ? void 0 : _a.focus());\n    },\n    disabled: !open || !loopFocus\n  }), React.createElement(DropdownContainer, {\n    renderWithPortal: expandToViewport && !interior,\n    id: dropdownId,\n    referrerId: referrerId,\n    open: open\n  }, React.createElement(Transition, {\n    in: open !== null && open !== void 0 ? open : false,\n    exit: false\n  }, function (state, ref) {\n    return React.createElement(\"div\", {\n      ref: dropdownContainerRef\n    }, React.createElement(TabTrap, {\n      focusNextCallback: function focusNextCallback() {\n        var _a;\n        return triggerRef.current && ((_a = getLastFocusable(triggerRef.current)) === null || _a === void 0 ? void 0 : _a.focus());\n      },\n      disabled: !open || !loopFocus\n    }), React.createElement(TransitionContent, {\n      state: state,\n      transitionRef: ref,\n      dropdownClasses: dropdownClasses,\n      open: open,\n      stretchWidth: stretchWidth,\n      interior: interior,\n      header: header,\n      expandToViewport: expandToViewport,\n      stretchBeyondTriggerWidth: stretchBeyondTriggerWidth,\n      footer: footer,\n      onMouseDown: onMouseDown,\n      isRefresh: isRefresh,\n      dropdownRef: dropdownRef,\n      verticalContainerRef: verticalContainerRef,\n      position: position,\n      id: dropdownContentId,\n      role: dropdownContentRole,\n      ariaLabelledby: ariaLabelledby,\n      ariaDescribedby: ariaDescribedby\n    }, children), React.createElement(TabTrap, {\n      focusNextCallback: function focusNextCallback() {\n        var _a;\n        return triggerRef.current && ((_a = getFirstFocusable(triggerRef.current)) === null || _a === void 0 ? void 0 : _a.focus());\n      },\n      disabled: !open || !loopFocus\n    }));\n  })));\n};\nvar isInteriorPosition = function isInteriorPosition(position) {\n  return position.bottom !== undefined;\n};\nexport default Dropdown;","map":{"version":3,"mappings":"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","names":["styles","clsx","useMergeRefs","React","useEffect","useLayoutEffect","useRef","useState","createPortal","fireNonCancelableEvent","calculatePosition","defaultMaxDropdownWidth","hasEnoughSpaceToStretchBeyondTriggerWidth","Transition","useVisualRefresh","usePortalModeClasses","DropdownContextProvider","useMobile","TabTrap","getFirstFocusable","getLastFocusable","useUniqueId","customCssProps","useResizeObserver","DropdownContainer","children","renderWithPortal","id","referrerId","open","document","body","TransitionContent","state","transitionRef","dropdownClasses","stretchWidth","interior","isRefresh","dropdownRef","verticalContainerRef","expandToViewport","stretchBeyondTriggerWidth","header","footer","position","onMouseDown","role","ariaLabelledby","ariaDescribedby","contentRef","className","dropdown","refresh","ref","style","dropdownDefaultMaxWidth","Dropdown","trigger","onDropdownClose","dropdownId","stretchTriggerHeight","stretchHeight","stretchToTriggerWidth","preferCenter","minWidth","scrollable","loopFocus","onFocus","onBlur","contentKey","dropdownContentId","dropdownContentRole","wrapperRef","triggerRef","dropdownContainerRef","fixedPosition","setPosition","isMobile","setDropdownPosition","triggerBox","target","verticalContainer","entireWidth","maxHeight","parseInt","height","classList","add","width","dropUp","bottom","remove","dropLeft","left","top","right","current","isInteriorPosition","isOutsideDropdown","element","contains","focusHandler","event","relatedTarget","blurHandler","fixStretching","classNameToRemove","triggerElement","dropdownElement","desiredMinWidth","onDropdownOpen","nowrap","window","addEventListener","timeoutId","setTimeout","removeEventListener","clearTimeout","clickListener","e","updateDropdownPosition","triggerRect","getBoundingClientRect","root","focusNextCallback","focus","disabled","in","exit","undefined"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/internal/components/dropdown/lib/default/internal/components/dropdown/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { fireNonCancelableEvent } from '../../events';\nimport { DropdownProps } from './interfaces';\nimport {\n  DropdownPosition,\n  InteriorDropdownPosition,\n  calculatePosition,\n  defaultMaxDropdownWidth,\n  hasEnoughSpaceToStretchBeyondTriggerWidth,\n} from './dropdown-fit-handler';\nimport { Transition, TransitionStatus } from '../transition';\nimport { useVisualRefresh } from '../../hooks/use-visual-mode';\nimport { usePortalModeClasses } from '../../hooks/use-portal-mode-classes';\nimport { DropdownContextProvider, DropdownContextProviderProps } from './context';\nimport { useMobile } from '../../hooks/use-mobile';\nimport TabTrap from '../tab-trap/index.js';\nimport { getFirstFocusable, getLastFocusable } from '../focus-lock/utils.js';\nimport { useUniqueId } from '../../hooks/use-unique-id/index.js';\nimport customCssProps from '../../generated/custom-css-properties';\nimport { useResizeObserver } from '@cloudscape-design/component-toolkit/internal';\n\ninterface DropdownContainerProps {\n  children?: React.ReactNode;\n  renderWithPortal?: boolean;\n  id?: string;\n  referrerId?: string;\n  open?: boolean;\n}\n\nconst DropdownContainer = ({ children, renderWithPortal = false, id, referrerId, open }: DropdownContainerProps) => {\n  if (renderWithPortal) {\n    if (open) {\n      return createPortal(\n        <div id={id} data-awsui-referrer-id={referrerId}>\n          {children}\n        </div>,\n        document.body\n      );\n    } else {\n      return null;\n    }\n  } else {\n    return <>{children}</>;\n  }\n};\n\ninterface TransitionContentProps {\n  state: TransitionStatus;\n  transitionRef: React.MutableRefObject<any>;\n  dropdownClasses: string;\n  stretchWidth: boolean;\n  interior: boolean;\n  isRefresh: boolean;\n  dropdownRef: React.RefObject<HTMLDivElement>;\n  verticalContainerRef: React.RefObject<HTMLDivElement>;\n  expandToViewport?: boolean;\n  stretchBeyondTriggerWidth?: boolean;\n  header?: React.ReactNode;\n  children?: React.ReactNode;\n  footer?: React.ReactNode;\n  position?: DropdownContextProviderProps['position'];\n  open?: boolean;\n  onMouseDown?: React.MouseEventHandler<Element>;\n  id?: string;\n  role?: string;\n  ariaLabelledby?: string;\n  ariaDescribedby?: string;\n}\n\nconst TransitionContent = ({\n  state,\n  transitionRef,\n  dropdownClasses,\n  stretchWidth,\n  interior,\n  isRefresh,\n  dropdownRef,\n  verticalContainerRef,\n  expandToViewport,\n  stretchBeyondTriggerWidth,\n  header,\n  children,\n  footer,\n  position,\n  open,\n  onMouseDown,\n  id,\n  role,\n  ariaLabelledby,\n  ariaDescribedby,\n}: TransitionContentProps) => {\n  const contentRef = useMergeRefs(dropdownRef, transitionRef);\n  return (\n    <div\n      className={clsx(styles.dropdown, dropdownClasses, {\n        [styles.open]: open,\n        [styles['with-limited-width']]: !stretchWidth,\n        [styles['hide-upper-border']]: stretchWidth,\n        [styles.interior]: interior,\n        [styles.refresh]: isRefresh,\n        [styles['use-portal']]: expandToViewport && !interior,\n        [styles['stretch-beyond-trigger-width']]: stretchBeyondTriggerWidth,\n      })}\n      ref={contentRef}\n      id={id}\n      role={role}\n      aria-labelledby={ariaLabelledby}\n      aria-describedby={ariaDescribedby}\n      data-open={open}\n      data-animating={state !== 'exited'}\n      aria-hidden={!open}\n      style={\n        stretchBeyondTriggerWidth ? { [customCssProps.dropdownDefaultMaxWidth]: `${defaultMaxDropdownWidth}px` } : {}\n      }\n      onMouseDown={onMouseDown}\n    >\n      <div\n        className={clsx(\n          styles['dropdown-content-wrapper'],\n          !header && !children && styles['is-empty'],\n          isRefresh && styles.refresh\n        )}\n      >\n        <div ref={verticalContainerRef} className={styles['dropdown-content']}>\n          <DropdownContextProvider position={position}>\n            {header}\n            {children}\n            {footer}\n          </DropdownContextProvider>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Dropdown = ({\n  children,\n  trigger,\n  open,\n  onDropdownClose,\n  onMouseDown,\n  header,\n  footer,\n  dropdownId,\n  stretchTriggerHeight = false,\n  stretchWidth = true,\n  stretchHeight = false,\n  stretchToTriggerWidth = true,\n  stretchBeyondTriggerWidth = false,\n  expandToViewport = false,\n  preferCenter = false,\n  interior = false,\n  minWidth,\n  scrollable = true,\n  loopFocus = expandToViewport,\n  onFocus,\n  onBlur,\n  contentKey,\n  dropdownContentId,\n  dropdownContentRole,\n  ariaLabelledby,\n  ariaDescribedby,\n}: DropdownProps) => {\n  const wrapperRef = useRef<HTMLDivElement | null>(null);\n  const triggerRef = useRef<HTMLDivElement | null>(null);\n  const dropdownRef = useRef<HTMLDivElement | null>(null);\n  const dropdownContainerRef = useRef<HTMLDivElement | null>(null);\n  // This container is only needed to apply max-height to. We can't move max-height to it's parent\n  // because of an IE11 issue with flexbox. https://github.com/philipwalton/flexbugs/issues/216\n  const verticalContainerRef = useRef<HTMLDivElement>(null);\n  // To keep track of the initial position (drop up/down) which is kept the same during fixed repositioning\n  const fixedPosition = useRef<DropdownPosition | null>(null);\n\n  const isRefresh = useVisualRefresh();\n\n  const dropdownClasses = usePortalModeClasses(triggerRef);\n  const [position, setPosition] = useState<DropdownContextProviderProps['position']>('bottom-right');\n\n  const isMobile = useMobile();\n\n  const setDropdownPosition = (\n    position: DropdownPosition | InteriorDropdownPosition,\n    triggerBox: DOMRect,\n    target: HTMLDivElement,\n    verticalContainer: HTMLDivElement\n  ) => {\n    const entireWidth = !interior && stretchWidth;\n    if (!stretchWidth) {\n      // 1px offset for dropdowns where the dropdown itself needs a border, rather than on the items\n      verticalContainer.style.maxHeight = `${parseInt(position.height) + 1}px`;\n    } else {\n      verticalContainer.style.maxHeight = position.height;\n    }\n\n    if (entireWidth && !expandToViewport) {\n      if (stretchToTriggerWidth) {\n        target.classList.add(styles['occupy-entire-width']);\n      }\n    } else {\n      target.style.width = position.width;\n    }\n\n    // Using styles for main dropdown to adjust its position as preferred alternative\n    if (position.dropUp && !interior) {\n      target.classList.add(styles['dropdown-drop-up']);\n      if (!expandToViewport) {\n        target.style.bottom = '100%';\n      }\n    } else {\n      target.classList.remove(styles['dropdown-drop-up']);\n    }\n    target.classList.add(position.dropLeft ? styles['dropdown-drop-left'] : styles['dropdown-drop-right']);\n\n    if (position.left && position.left !== 'auto') {\n      target.style.left = position.left;\n    }\n\n    // Position normal overflow dropdowns with fixed positioning relative to viewport\n    if (expandToViewport && !interior) {\n      target.style.position = 'fixed';\n      if (position.dropUp) {\n        target.style.bottom = `calc(100% - ${triggerBox.top}px)`;\n      } else {\n        target.style.top = `${triggerBox.bottom}px`;\n      }\n      if (position.dropLeft) {\n        target.style.left = `calc(${triggerBox.right}px - ${position.width})`;\n      } else {\n        target.style.left = `${triggerBox.left}px`;\n      }\n      // Keep track of the initial dropdown position and direction.\n      // Dropdown direction doesn't need to change as the user scrolls, just needs to stay attached to the trigger.\n      fixedPosition.current = position;\n      return;\n    }\n\n    // For an interior dropdown (the fly out) we need exact values for positioning\n    // and classes are not enough\n    // usage of relative position is impossible due to overwrite of overflow-x\n    if (interior && isInteriorPosition(position)) {\n      if (position.dropUp) {\n        target.style.bottom = position.bottom;\n      } else {\n        target.style.top = position.top;\n      }\n      target.style.left = position.left;\n    }\n\n    if (position.dropUp && position.dropLeft) {\n      setPosition('top-left');\n    } else if (position.dropUp) {\n      setPosition('top-right');\n    } else if (position.dropLeft) {\n      setPosition('bottom-left');\n    } else {\n      setPosition('bottom-right');\n    }\n  };\n\n  const isOutsideDropdown = (element: Element) =>\n    (!wrapperRef.current || !wrapperRef.current.contains(element)) &&\n    (!dropdownContainerRef.current || !dropdownContainerRef.current.contains(element));\n\n  const focusHandler = (event: React.FocusEvent) => {\n    if (!event.relatedTarget || isOutsideDropdown(event.relatedTarget)) {\n      fireNonCancelableEvent(onFocus, event);\n    }\n  };\n\n  const blurHandler = (event: React.FocusEvent) => {\n    if (!event.relatedTarget || isOutsideDropdown(event.relatedTarget)) {\n      fireNonCancelableEvent(onBlur, event);\n    }\n  };\n\n  // Prevent the dropdown width from stretching beyond the trigger width\n  // if that is going to cause the dropdown to be cropped because of overflow\n  const fixStretching = () => {\n    const classNameToRemove = styles['stretch-beyond-trigger-width'];\n    if (\n      open &&\n      stretchBeyondTriggerWidth &&\n      dropdownRef.current &&\n      triggerRef.current &&\n      dropdownRef.current.classList.contains(classNameToRemove) &&\n      !hasEnoughSpaceToStretchBeyondTriggerWidth({\n        triggerElement: triggerRef.current,\n        dropdownElement: dropdownRef.current,\n        desiredMinWidth: minWidth,\n        expandToViewport,\n        stretchWidth,\n        stretchHeight,\n        isMobile,\n      })\n    ) {\n      dropdownRef.current.classList.remove(classNameToRemove);\n    }\n  };\n\n  useResizeObserver(() => dropdownRef.current, fixStretching);\n\n  useLayoutEffect(() => {\n    const onDropdownOpen = () => {\n      if (open && dropdownRef.current && triggerRef.current && verticalContainerRef.current) {\n        // calculate scroll width only for dropdowns that has a scrollbar and ignore it for date picker components\n        if (scrollable) {\n          dropdownRef.current.classList.add(styles.nowrap);\n        }\n        setDropdownPosition(\n          ...calculatePosition(\n            dropdownRef.current,\n            triggerRef.current,\n            verticalContainerRef.current,\n            interior,\n            expandToViewport,\n            preferCenter,\n            stretchWidth,\n            stretchHeight,\n            isMobile,\n            minWidth,\n            stretchBeyondTriggerWidth\n          ),\n          dropdownRef.current,\n          verticalContainerRef.current\n        );\n        if (scrollable) {\n          dropdownRef.current.classList.remove(styles.nowrap);\n        }\n      }\n    };\n    onDropdownOpen();\n\n    if (open) {\n      // window may scroll when dropdown opens, for example when soft keyboard shows up\n      window.addEventListener('scroll', onDropdownOpen);\n      // only listen to window scroll within very short time after the dropdown opens\n      // do not want to interfere dropdown position on scroll afterwards\n      const timeoutId = setTimeout(() => {\n        window.removeEventListener('scroll', onDropdownOpen);\n      }, 500);\n\n      return () => {\n        clearTimeout(timeoutId);\n        window.removeEventListener('scroll', onDropdownOpen);\n      };\n    }\n    // See AWSUI-13040\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open, dropdownRef, triggerRef, verticalContainerRef, interior, stretchWidth, isMobile, contentKey]);\n\n  // subscribe to outside click\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n    const clickListener = (e: MouseEvent) => {\n      if (!dropdownRef.current?.contains(e.target as Node) && !triggerRef.current?.contains(e.target as Node)) {\n        fireNonCancelableEvent(onDropdownClose);\n      }\n    };\n    window.addEventListener('click', clickListener, true);\n\n    return () => {\n      window.removeEventListener('click', clickListener, true);\n    };\n  }, [open, onDropdownClose]);\n\n  // sync dropdown position on scroll and resize\n  useLayoutEffect(() => {\n    if (!expandToViewport || !open) {\n      return;\n    }\n    const updateDropdownPosition = () => {\n      if (triggerRef.current && dropdownRef.current && verticalContainerRef.current) {\n        const triggerRect = triggerRef.current.getBoundingClientRect();\n        const target = dropdownRef.current;\n        if (fixedPosition.current) {\n          if (fixedPosition.current.dropUp) {\n            dropdownRef.current.style.bottom = `calc(100% - ${triggerRect.top}px)`;\n          } else {\n            target.style.top = `${triggerRect.bottom}px`;\n          }\n          if (fixedPosition.current.dropLeft) {\n            target.style.left = `calc(${triggerRect.right}px - ${fixedPosition.current.width})`;\n          } else {\n            target.style.left = `${triggerRect.left}px`;\n          }\n        }\n      }\n    };\n\n    updateDropdownPosition();\n\n    window.addEventListener('scroll', updateDropdownPosition, true);\n    window.addEventListener('resize', updateDropdownPosition, true);\n    return () => {\n      window.removeEventListener('scroll', updateDropdownPosition, true);\n      window.removeEventListener('resize', updateDropdownPosition, true);\n    };\n  }, [open, expandToViewport]);\n\n  const referrerId = useUniqueId();\n\n  return (\n    <div\n      className={clsx(\n        styles.root,\n        interior && styles.interior,\n        stretchTriggerHeight && styles['stretch-trigger-height']\n      )}\n      ref={wrapperRef}\n      onFocus={focusHandler}\n      onBlur={blurHandler}\n    >\n      <div id={referrerId} className={clsx(stretchTriggerHeight && styles['stretch-trigger-height'])} ref={triggerRef}>\n        {trigger}\n      </div>\n\n      <TabTrap\n        focusNextCallback={() => dropdownRef.current && getFirstFocusable(dropdownRef.current)?.focus()}\n        disabled={!open || !loopFocus}\n      />\n\n      <DropdownContainer\n        renderWithPortal={expandToViewport && !interior}\n        id={dropdownId}\n        referrerId={referrerId}\n        open={open}\n      >\n        <Transition in={open ?? false} exit={false}>\n          {(state, ref) => (\n            <div ref={dropdownContainerRef}>\n              <TabTrap\n                focusNextCallback={() => triggerRef.current && getLastFocusable(triggerRef.current)?.focus()}\n                disabled={!open || !loopFocus}\n              />\n\n              <TransitionContent\n                state={state}\n                transitionRef={ref}\n                dropdownClasses={dropdownClasses}\n                open={open}\n                stretchWidth={stretchWidth}\n                interior={interior}\n                header={header}\n                expandToViewport={expandToViewport}\n                stretchBeyondTriggerWidth={stretchBeyondTriggerWidth}\n                footer={footer}\n                onMouseDown={onMouseDown}\n                isRefresh={isRefresh}\n                dropdownRef={dropdownRef}\n                verticalContainerRef={verticalContainerRef}\n                position={position}\n                id={dropdownContentId}\n                role={dropdownContentRole}\n                ariaLabelledby={ariaLabelledby}\n                ariaDescribedby={ariaDescribedby}\n              >\n                {children}\n              </TransitionContent>\n\n              <TabTrap\n                focusNextCallback={() => triggerRef.current && getFirstFocusable(triggerRef.current)?.focus()}\n                disabled={!open || !loopFocus}\n              />\n            </div>\n          )}\n        </Transition>\n      </DropdownContainer>\n    </div>\n  );\n};\n\nconst isInteriorPosition = (\n  position: DropdownPosition | InteriorDropdownPosition\n): position is InteriorDropdownPosition => (position as InteriorDropdownPosition).bottom !== undefined;\n\nexport default Dropdown;\n"]},"metadata":{},"sourceType":"module"}