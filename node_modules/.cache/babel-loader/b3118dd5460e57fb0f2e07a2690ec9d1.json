{"ast":null,"code":"import _defineProperty from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport clsx from 'clsx';\nimport React, { useEffect, useRef } from 'react';\nimport { fireCancelableEvent, isPlainLeftClick } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport styles from './styles.css.js';\nimport { LeftIcon, RightIcon } from './icon-helper';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport LiveRegion from '../internal/components/live-region';\nimport { useButtonContext } from '../internal/context/button-context';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport { DATA_ATTR_FUNNEL_VALUE, getFunnelValueSelector, getNameFromSelector, getSubStepAllSelector } from '../internal/analytics/selectors';\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nexport var InternalButton = React.forwardRef(function (_a, ref) {\n  var _clsx;\n  var children = _a.children,\n    iconName = _a.iconName,\n    __iconClass = _a.__iconClass,\n    onClick = _a.onClick,\n    onFollow = _a.onFollow,\n    _a$iconAlign = _a.iconAlign,\n    iconAlign = _a$iconAlign === void 0 ? 'left' : _a$iconAlign,\n    iconUrl = _a.iconUrl,\n    iconSvg = _a.iconSvg,\n    iconAlt = _a.iconAlt,\n    _a$variant = _a.variant,\n    variant = _a$variant === void 0 ? 'normal' : _a$variant,\n    _a$loading = _a.loading,\n    loading = _a$loading === void 0 ? false : _a$loading,\n    loadingText = _a.loadingText,\n    _a$disabled = _a.disabled,\n    disabled = _a$disabled === void 0 ? false : _a$disabled,\n    _a$wrapText = _a.wrapText,\n    wrapText = _a$wrapText === void 0 ? true : _a$wrapText,\n    href = _a.href,\n    target = _a.target,\n    rel = _a.rel,\n    download = _a.download,\n    _a$formAction = _a.formAction,\n    formAction = _a$formAction === void 0 ? 'submit' : _a$formAction,\n    ariaLabel = _a.ariaLabel,\n    ariaDescribedby = _a.ariaDescribedby,\n    ariaExpanded = _a.ariaExpanded,\n    fullWidth = _a.fullWidth,\n    badge = _a.badge,\n    __nativeAttributes = _a.__nativeAttributes,\n    _a$__internalRootRef = _a.__internalRootRef,\n    __internalRootRef = _a$__internalRootRef === void 0 ? null : _a$__internalRootRef,\n    _a$__activated = _a.__activated,\n    __activated = _a$__activated === void 0 ? false : _a$__activated,\n    props = __rest(_a, [\"children\", \"iconName\", \"__iconClass\", \"onClick\", \"onFollow\", \"iconAlign\", \"iconUrl\", \"iconSvg\", \"iconAlt\", \"variant\", \"loading\", \"loadingText\", \"disabled\", \"wrapText\", \"href\", \"target\", \"rel\", \"download\", \"formAction\", \"ariaLabel\", \"ariaDescribedby\", \"ariaExpanded\", \"fullWidth\", \"badge\", \"__nativeAttributes\", \"__internalRootRef\", \"__activated\"]);\n  checkSafeUrl('Button', href);\n  var isAnchor = Boolean(href);\n  var isNotInteractive = loading || disabled;\n  var shouldHaveContent = children && ['icon', 'inline-icon', 'flashbar-icon', 'modal-dismiss'].indexOf(variant) === -1;\n  var buttonRef = useRef(null);\n  useForwardFocus(ref, buttonRef);\n  var buttonContext = useButtonContext();\n  var uniqueId = useUniqueId('button');\n  var _useFunnel = useFunnel(),\n    funnelInteractionId = _useFunnel.funnelInteractionId;\n  var _useFunnelStep = useFunnelStep(),\n    stepNumber = _useFunnelStep.stepNumber,\n    stepNameSelector = _useFunnelStep.stepNameSelector;\n  var _useFunnelSubStep = useFunnelSubStep(),\n    subStepSelector = _useFunnelSubStep.subStepSelector,\n    subStepNameSelector = _useFunnelSubStep.subStepNameSelector;\n  var handleClick = function handleClick(event) {\n    if (isNotInteractive) {\n      return event.preventDefault();\n    }\n    if (isAnchor && isPlainLeftClick(event)) {\n      fireCancelableEvent(onFollow, {\n        href: href,\n        target: target\n      }, event);\n      if ((iconName === 'external' || target === '_blank') && funnelInteractionId) {\n        var stepName = getNameFromSelector(stepNameSelector);\n        var subStepName = getNameFromSelector(subStepNameSelector);\n        FunnelMetrics.externalLinkInteracted({\n          funnelInteractionId: funnelInteractionId,\n          stepNumber: stepNumber,\n          stepName: stepName,\n          stepNameSelector: stepNameSelector,\n          subStepSelector: subStepSelector,\n          subStepName: subStepName,\n          subStepNameSelector: subStepNameSelector,\n          elementSelector: getFunnelValueSelector(uniqueId),\n          subStepAllSelector: getSubStepAllSelector()\n        });\n      }\n    }\n    var altKey = event.altKey,\n      button = event.button,\n      ctrlKey = event.ctrlKey,\n      metaKey = event.metaKey,\n      shiftKey = event.shiftKey;\n    fireCancelableEvent(onClick, {\n      altKey: altKey,\n      button: button,\n      ctrlKey: ctrlKey,\n      metaKey: metaKey,\n      shiftKey: shiftKey\n    }, event);\n    buttonContext.onClick({\n      variant: variant\n    });\n  };\n  var buttonClass = clsx(props.className, styles.button, styles[\"variant-\".concat(variant)], (_clsx = {}, _defineProperty(_clsx, styles.disabled, isNotInteractive), _defineProperty(_clsx, styles['button-no-wrap'], !wrapText), _defineProperty(_clsx, styles['button-no-text'], !shouldHaveContent), _defineProperty(_clsx, styles['is-activated'], __activated), _defineProperty(_clsx, styles['full-width'], shouldHaveContent && fullWidth), _clsx));\n  var buttonProps = Object.assign(Object.assign(Object.assign({}, props), __nativeAttributes), _defineProperty({\n    // https://github.com/microsoft/TypeScript/issues/36659\n    ref: useMergeRefs(buttonRef, __internalRootRef),\n    'aria-label': ariaLabel,\n    'aria-describedby': ariaDescribedby,\n    'aria-expanded': ariaExpanded,\n    // add ariaLabel as `title` as visible hint text\n    title: ariaLabel,\n    className: buttonClass,\n    onClick: handleClick\n  }, DATA_ATTR_FUNNEL_VALUE, uniqueId));\n  var iconProps = {\n    loading: loading,\n    iconName: iconName,\n    iconAlign: iconAlign,\n    iconUrl: iconUrl,\n    iconSvg: iconSvg,\n    iconAlt: iconAlt,\n    variant: variant,\n    badge: badge,\n    iconClass: __iconClass,\n    iconSize: variant === 'modal-dismiss' ? 'medium' : 'normal'\n  };\n  var buttonContent = React.createElement(React.Fragment, null, React.createElement(LeftIcon, Object.assign({}, iconProps)), shouldHaveContent && React.createElement(\"span\", {\n    className: styles.content\n  }, children), React.createElement(RightIcon, Object.assign({}, iconProps)));\n  var _useFunnel2 = useFunnel(),\n    loadingButtonCount = _useFunnel2.loadingButtonCount;\n  useEffect(function () {\n    if (loading) {\n      loadingButtonCount.current++;\n      return function () {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        loadingButtonCount.current--;\n      };\n    }\n  }, [loading, loadingButtonCount]);\n  if (isAnchor) {\n    return (\n      // https://github.com/yannickcr/eslint-plugin-react/issues/2962\n      // eslint-disable-next-line react/jsx-no-target-blank\n      React.createElement(React.Fragment, null, React.createElement(\"a\", Object.assign({}, buttonProps, {\n        href: href,\n        target: target,\n        // security recommendation: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#target\n        rel: rel !== null && rel !== void 0 ? rel : target === '_blank' ? 'noopener noreferrer' : undefined,\n        tabIndex: isNotInteractive ? -1 : undefined,\n        \"aria-disabled\": isNotInteractive ? true : undefined,\n        download: download\n      }), buttonContent), loading && loadingText && React.createElement(LiveRegion, null, loadingText))\n    );\n  }\n  return React.createElement(React.Fragment, null, React.createElement(\"button\", Object.assign({}, buttonProps, {\n    type: formAction === 'none' ? 'button' : 'submit',\n    disabled: disabled,\n    \"aria-disabled\": loading && !disabled ? true : undefined\n  }), buttonContent), loading && loadingText && React.createElement(LiveRegion, null, loadingText));\n});\nexport default InternalButton;","map":{"version":3,"mappings":"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","names":["clsx","React","useEffect","useRef","fireCancelableEvent","isPlainLeftClick","useForwardFocus","styles","LeftIcon","RightIcon","checkSafeUrl","useMergeRefs","LiveRegion","useButtonContext","useFunnel","useFunnelStep","useFunnelSubStep","DATA_ATTR_FUNNEL_VALUE","getFunnelValueSelector","getNameFromSelector","getSubStepAllSelector","FunnelMetrics","useUniqueId","InternalButton","forwardRef","_a","ref","children","iconName","__iconClass","onClick","onFollow","iconAlign","iconUrl","iconSvg","iconAlt","variant","loading","loadingText","disabled","wrapText","href","target","rel","download","formAction","ariaLabel","ariaDescribedby","ariaExpanded","fullWidth","badge","__nativeAttributes","__internalRootRef","__activated","props","isAnchor","Boolean","isNotInteractive","shouldHaveContent","indexOf","buttonRef","buttonContext","uniqueId","funnelInteractionId","stepNumber","stepNameSelector","subStepSelector","subStepNameSelector","handleClick","event","preventDefault","stepName","subStepName","externalLinkInteracted","elementSelector","subStepAllSelector","altKey","button","ctrlKey","metaKey","shiftKey","buttonClass","className","buttonProps","Object","title","iconProps","iconClass","iconSize","buttonContent","content","loadingButtonCount","current","undefined","tabIndex","type"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/button/lib/default/button/internal.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport clsx from 'clsx';\nimport React, { useEffect, useRef } from 'react';\nimport { fireCancelableEvent, isPlainLeftClick } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport styles from './styles.css.js';\nimport { ButtonIconProps, LeftIcon, RightIcon } from './icon-helper';\nimport { ButtonProps } from './interfaces';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport LiveRegion from '../internal/components/live-region';\nimport { useButtonContext } from '../internal/context/button-context';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport {\n  DATA_ATTR_FUNNEL_VALUE,\n  getFunnelValueSelector,\n  getNameFromSelector,\n  getSubStepAllSelector,\n} from '../internal/analytics/selectors';\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\n\nexport type InternalButtonProps = Omit<ButtonProps, 'variant'> & {\n  variant?: ButtonProps['variant'] | 'flashbar-icon' | 'breadcrumb-group' | 'menu-trigger' | 'modal-dismiss';\n  badge?: boolean;\n  __nativeAttributes?: Record<string, any>;\n  __iconClass?: string;\n  __activated?: boolean;\n} & InternalBaseComponentProps;\n\nexport const InternalButton = React.forwardRef(\n  (\n    {\n      children,\n      iconName,\n      __iconClass,\n      onClick,\n      onFollow,\n      iconAlign = 'left',\n      iconUrl,\n      iconSvg,\n      iconAlt,\n      variant = 'normal',\n      loading = false,\n      loadingText,\n      disabled = false,\n      wrapText = true,\n      href,\n      target,\n      rel,\n      download,\n      formAction = 'submit',\n      ariaLabel,\n      ariaDescribedby,\n      ariaExpanded,\n      fullWidth,\n      badge,\n      __nativeAttributes,\n      __internalRootRef = null,\n      __activated = false,\n      ...props\n    }: InternalButtonProps,\n    ref: React.Ref<ButtonProps.Ref>\n  ) => {\n    checkSafeUrl('Button', href);\n    const isAnchor = Boolean(href);\n    const isNotInteractive = loading || disabled;\n    const shouldHaveContent =\n      children && ['icon', 'inline-icon', 'flashbar-icon', 'modal-dismiss'].indexOf(variant) === -1;\n\n    const buttonRef = useRef<HTMLElement>(null);\n    useForwardFocus(ref, buttonRef);\n\n    const buttonContext = useButtonContext();\n\n    const uniqueId = useUniqueId('button');\n    const { funnelInteractionId } = useFunnel();\n    const { stepNumber, stepNameSelector } = useFunnelStep();\n    const { subStepSelector, subStepNameSelector } = useFunnelSubStep();\n\n    const handleClick = (event: React.MouseEvent) => {\n      if (isNotInteractive) {\n        return event.preventDefault();\n      }\n\n      if (isAnchor && isPlainLeftClick(event)) {\n        fireCancelableEvent(onFollow, { href, target }, event);\n\n        if ((iconName === 'external' || target === '_blank') && funnelInteractionId) {\n          const stepName = getNameFromSelector(stepNameSelector);\n          const subStepName = getNameFromSelector(subStepNameSelector);\n\n          FunnelMetrics.externalLinkInteracted({\n            funnelInteractionId,\n            stepNumber,\n            stepName,\n            stepNameSelector,\n            subStepSelector,\n            subStepName,\n            subStepNameSelector,\n            elementSelector: getFunnelValueSelector(uniqueId),\n            subStepAllSelector: getSubStepAllSelector(),\n          });\n        }\n      }\n\n      const { altKey, button, ctrlKey, metaKey, shiftKey } = event;\n      fireCancelableEvent(onClick, { altKey, button, ctrlKey, metaKey, shiftKey }, event);\n      buttonContext.onClick({ variant });\n    };\n\n    const buttonClass = clsx(props.className, styles.button, styles[`variant-${variant}`], {\n      [styles.disabled]: isNotInteractive,\n      [styles['button-no-wrap']]: !wrapText,\n      [styles['button-no-text']]: !shouldHaveContent,\n      [styles['is-activated']]: __activated,\n      [styles['full-width']]: shouldHaveContent && fullWidth,\n    });\n\n    const buttonProps = {\n      ...props,\n      ...__nativeAttributes,\n      // https://github.com/microsoft/TypeScript/issues/36659\n      ref: useMergeRefs(buttonRef as any, __internalRootRef),\n      'aria-label': ariaLabel,\n      'aria-describedby': ariaDescribedby,\n      'aria-expanded': ariaExpanded,\n      // add ariaLabel as `title` as visible hint text\n      title: ariaLabel,\n      className: buttonClass,\n      onClick: handleClick,\n      [DATA_ATTR_FUNNEL_VALUE]: uniqueId,\n    } as const;\n    const iconProps: ButtonIconProps = {\n      loading,\n      iconName,\n      iconAlign,\n      iconUrl,\n      iconSvg,\n      iconAlt,\n      variant,\n      badge,\n      iconClass: __iconClass,\n      iconSize: variant === 'modal-dismiss' ? 'medium' : 'normal',\n    };\n    const buttonContent = (\n      <>\n        <LeftIcon {...iconProps} />\n        {shouldHaveContent && <span className={styles.content}>{children}</span>}\n        <RightIcon {...iconProps} />\n      </>\n    );\n\n    const { loadingButtonCount } = useFunnel();\n    useEffect(() => {\n      if (loading) {\n        loadingButtonCount.current++;\n        return () => {\n          // eslint-disable-next-line react-hooks/exhaustive-deps\n          loadingButtonCount.current--;\n        };\n      }\n    }, [loading, loadingButtonCount]);\n\n    if (isAnchor) {\n      return (\n        // https://github.com/yannickcr/eslint-plugin-react/issues/2962\n        // eslint-disable-next-line react/jsx-no-target-blank\n        <>\n          <a\n            {...buttonProps}\n            href={href}\n            target={target}\n            // security recommendation: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#target\n            rel={rel ?? (target === '_blank' ? 'noopener noreferrer' : undefined)}\n            tabIndex={isNotInteractive ? -1 : undefined}\n            aria-disabled={isNotInteractive ? true : undefined}\n            download={download}\n          >\n            {buttonContent}\n          </a>\n          {loading && loadingText && <LiveRegion>{loadingText}</LiveRegion>}\n        </>\n      );\n    }\n    return (\n      <>\n        <button\n          {...buttonProps}\n          type={formAction === 'none' ? 'button' : 'submit'}\n          disabled={disabled}\n          aria-disabled={loading && !disabled ? true : undefined}\n        >\n          {buttonContent}\n        </button>\n        {loading && loadingText && <LiveRegion>{loadingText}</LiveRegion>}\n      </>\n    );\n  }\n);\n\nexport default InternalButton;\n"]},"metadata":{},"sourceType":"module"}