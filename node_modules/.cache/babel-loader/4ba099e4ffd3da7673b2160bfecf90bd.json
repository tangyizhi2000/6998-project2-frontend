{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport { useUniqueId } from '../../internal/hooks/use-unique-id';\nimport styles from '../styles.css.js';\nimport { getSortedOptions } from './utils';\nimport { DndContext, DragOverlay } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport DraggableOption from './draggable-option';\nimport useDragAndDropReorder from './use-drag-and-drop-reorder';\nimport useLiveAnnouncements from './use-live-announcements';\nimport Portal from '../../internal/components/portal';\nimport ContentDisplayOption from './content-display-option';\nimport { useInternalI18n } from '../../i18n/context';\nconst componentPrefix = 'content-display';\nconst getClassName = suffix => styles[`${componentPrefix}-${suffix}`];\nexport default function ContentDisplayPreference(_ref) {\n  let {\n    title,\n    description,\n    options,\n    value = options.map(_ref2 => {\n      let {\n        id\n      } = _ref2;\n      return {\n        id,\n        visible: true\n      };\n    }),\n    onChange,\n    liveAnnouncementDndStarted,\n    liveAnnouncementDndItemReordered,\n    liveAnnouncementDndItemCommitted,\n    liveAnnouncementDndDiscarded,\n    dragHandleAriaDescription,\n    dragHandleAriaLabel\n  } = _ref;\n  const idPrefix = useUniqueId(componentPrefix);\n  const i18n = useInternalI18n('collection-preferences');\n  const onToggle = option => {\n    onChange(value.map(item => item.id === option.id ? Object.assign(Object.assign({}, item), {\n      visible: !option.visible\n    }) : item));\n  };\n  const titleId = `${idPrefix}-title`;\n  const descriptionId = `${idPrefix}-description`;\n  const sortedOptions = getSortedOptions({\n    options,\n    contentDisplay: value\n  });\n  const {\n    activeItem,\n    collisionDetection,\n    handleKeyDown,\n    sensors,\n    setActiveItem\n  } = useDragAndDropReorder({\n    sortedOptions\n  });\n  const activeOption = activeItem ? sortedOptions.find(_ref3 => {\n    let {\n      id\n    } = _ref3;\n    return id === activeItem;\n  }) : null;\n  const announcements = useLiveAnnouncements({\n    isDragging: activeItem !== null,\n    liveAnnouncementDndStarted: i18n('contentDisplayPreference.liveAnnouncementDndStarted', liveAnnouncementDndStarted, format => (position, total) => format({\n      position,\n      total\n    })),\n    liveAnnouncementDndItemReordered: i18n('contentDisplayPreference.liveAnnouncementDndItemReordered', liveAnnouncementDndItemReordered, format => (initialPosition, currentPosition, total) => format({\n      currentPosition,\n      total,\n      isInitialPosition: `${initialPosition === currentPosition}`\n    })),\n    liveAnnouncementDndItemCommitted: i18n('contentDisplayPreference.liveAnnouncementDndItemCommitted', liveAnnouncementDndItemCommitted, format => (initialPosition, finalPosition, total) => format({\n      initialPosition,\n      finalPosition,\n      total,\n      isInitialPosition: `${initialPosition === finalPosition}`\n    })),\n    liveAnnouncementDndDiscarded: i18n('contentDisplayPreference.liveAnnouncementDndDiscarded', liveAnnouncementDndDiscarded),\n    sortedOptions: value\n  });\n  const renderedDragHandleAriaDescription = i18n('contentDisplayPreference.dragHandleAriaDescription', dragHandleAriaDescription);\n  return React.createElement(\"div\", {\n    className: styles[componentPrefix]\n  }, React.createElement(\"h3\", {\n    className: getClassName('title'),\n    id: titleId\n  }, i18n('contentDisplayPreference.title', title)), React.createElement(\"p\", {\n    className: getClassName('description'),\n    id: descriptionId\n  }, i18n('contentDisplayPreference.description', description)), React.createElement(DndContext, {\n    sensors: sensors,\n    collisionDetection: collisionDetection,\n    accessibility: {\n      announcements,\n      restoreFocus: false,\n      screenReaderInstructions: renderedDragHandleAriaDescription ? {\n        draggable: renderedDragHandleAriaDescription\n      } : undefined\n    },\n    onDragStart: _ref4 => {\n      let {\n        active\n      } = _ref4;\n      return setActiveItem(active.id);\n    },\n    onDragEnd: event => {\n      setActiveItem(null);\n      const {\n        active,\n        over\n      } = event;\n      if (over && active.id !== over.id) {\n        const oldIndex = value.findIndex(_ref5 => {\n          let {\n            id\n          } = _ref5;\n          return id === active.id;\n        });\n        const newIndex = value.findIndex(_ref6 => {\n          let {\n            id\n          } = _ref6;\n          return id === over.id;\n        });\n        onChange(arrayMove([...value], oldIndex, newIndex));\n      }\n    },\n    onDragCancel: () => setActiveItem(null)\n  }, React.createElement(\"ul\", {\n    className: getClassName('option-list'),\n    \"aria-describedby\": descriptionId,\n    \"aria-labelledby\": titleId,\n    role: \"list\"\n  }, React.createElement(SortableContext, {\n    items: sortedOptions.map(_ref7 => {\n      let {\n        id\n      } = _ref7;\n      return id;\n    }),\n    strategy: verticalListSortingStrategy\n  }, sortedOptions.map(option => {\n    return React.createElement(DraggableOption, {\n      dragHandleAriaLabel: i18n('contentDisplayPreference.dragHandleAriaLabel', dragHandleAriaLabel),\n      key: option.id,\n      onKeyDown: handleKeyDown,\n      onToggle: onToggle,\n      option: option\n    });\n  }))), React.createElement(Portal, null, React.createElement(DragOverlay, {\n    className: styles['drag-overlay'],\n    dropAnimation: null,\n    style: {\n      zIndex: 5000\n    }\n  }, activeOption && React.createElement(ContentDisplayOption, {\n    listeners: {\n      onKeyDown: handleKeyDown\n    },\n    dragHandleAriaLabel: i18n('contentDisplayPreference.dragHandleAriaLabel', dragHandleAriaLabel),\n    onToggle: onToggle,\n    option: activeOption\n  })))));\n}","map":{"version":3,"mappings":"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","names":["React","useUniqueId","styles","getSortedOptions","DndContext","DragOverlay","arrayMove","SortableContext","verticalListSortingStrategy","DraggableOption","useDragAndDropReorder","useLiveAnnouncements","Portal","ContentDisplayOption","useInternalI18n","componentPrefix","getClassName","suffix","ContentDisplayPreference","title","description","options","value","map","id","visible","onChange","liveAnnouncementDndStarted","liveAnnouncementDndItemReordered","liveAnnouncementDndItemCommitted","liveAnnouncementDndDiscarded","dragHandleAriaDescription","dragHandleAriaLabel","idPrefix","i18n","onToggle","option","item","Object","titleId","descriptionId","sortedOptions","contentDisplay","activeItem","collisionDetection","handleKeyDown","sensors","setActiveItem","activeOption","find","announcements","isDragging","format","position","total","initialPosition","currentPosition","isInitialPosition","finalPosition","renderedDragHandleAriaDescription","className","accessibility","restoreFocus","screenReaderInstructions","draggable","undefined","onDragStart","active","onDragEnd","event","over","oldIndex","findIndex","newIndex","onDragCancel","role","items","strategy","key","onKeyDown","dropAnimation","style","zIndex","listeners"],"sources":["/Users/tangyizhi/Desktop/Assignment 2/frontend/node_modules/@cloudscape-design/components/collection-preferences/content-display/lib/default/collection-preferences/content-display/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport { useUniqueId } from '../../internal/hooks/use-unique-id';\n\nimport { CollectionPreferencesProps } from '../interfaces';\nimport styles from '../styles.css.js';\nimport { getSortedOptions, OptionWithVisibility } from './utils';\nimport { DndContext, DragOverlay } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport DraggableOption from './draggable-option';\nimport useDragAndDropReorder from './use-drag-and-drop-reorder';\nimport useLiveAnnouncements from './use-live-announcements';\nimport Portal from '../../internal/components/portal';\nimport ContentDisplayOption from './content-display-option';\nimport { useInternalI18n } from '../../i18n/context';\n\nconst componentPrefix = 'content-display';\n\nconst getClassName = (suffix: string) => styles[`${componentPrefix}-${suffix}`];\n\ninterface ContentDisplayPreferenceProps extends CollectionPreferencesProps.ContentDisplayPreference {\n  onChange: (value: ReadonlyArray<CollectionPreferencesProps.ContentDisplayItem>) => void;\n  value?: ReadonlyArray<CollectionPreferencesProps.ContentDisplayItem>;\n}\n\nexport default function ContentDisplayPreference({\n  title,\n  description,\n  options,\n  value = options.map(({ id }) => ({\n    id,\n    visible: true,\n  })),\n  onChange,\n  liveAnnouncementDndStarted,\n  liveAnnouncementDndItemReordered,\n  liveAnnouncementDndItemCommitted,\n  liveAnnouncementDndDiscarded,\n  dragHandleAriaDescription,\n  dragHandleAriaLabel,\n}: ContentDisplayPreferenceProps) {\n  const idPrefix = useUniqueId(componentPrefix);\n  const i18n = useInternalI18n('collection-preferences');\n\n  const onToggle = (option: OptionWithVisibility) => {\n    onChange(value.map(item => (item.id === option.id ? { ...item, visible: !option.visible } : item)));\n  };\n\n  const titleId = `${idPrefix}-title`;\n  const descriptionId = `${idPrefix}-description`;\n\n  const sortedOptions = getSortedOptions({ options, contentDisplay: value });\n\n  const { activeItem, collisionDetection, handleKeyDown, sensors, setActiveItem } = useDragAndDropReorder({\n    sortedOptions,\n  });\n\n  const activeOption = activeItem ? sortedOptions.find(({ id }) => id === activeItem) : null;\n\n  const announcements = useLiveAnnouncements({\n    isDragging: activeItem !== null,\n    liveAnnouncementDndStarted: i18n(\n      'contentDisplayPreference.liveAnnouncementDndStarted',\n      liveAnnouncementDndStarted,\n      format => (position, total) => format({ position, total })\n    ),\n    liveAnnouncementDndItemReordered: i18n(\n      'contentDisplayPreference.liveAnnouncementDndItemReordered',\n      liveAnnouncementDndItemReordered,\n      format => (initialPosition, currentPosition, total) =>\n        format({ currentPosition, total, isInitialPosition: `${initialPosition === currentPosition}` })\n    ),\n    liveAnnouncementDndItemCommitted: i18n(\n      'contentDisplayPreference.liveAnnouncementDndItemCommitted',\n      liveAnnouncementDndItemCommitted,\n      format => (initialPosition, finalPosition, total) =>\n        format({ initialPosition, finalPosition, total, isInitialPosition: `${initialPosition === finalPosition}` })\n    ),\n    liveAnnouncementDndDiscarded: i18n(\n      'contentDisplayPreference.liveAnnouncementDndDiscarded',\n      liveAnnouncementDndDiscarded\n    ),\n    sortedOptions: value,\n  });\n\n  const renderedDragHandleAriaDescription = i18n(\n    'contentDisplayPreference.dragHandleAriaDescription',\n    dragHandleAriaDescription\n  );\n\n  return (\n    <div className={styles[componentPrefix]}>\n      <h3 className={getClassName('title')} id={titleId}>\n        {i18n('contentDisplayPreference.title', title)}\n      </h3>\n      <p className={getClassName('description')} id={descriptionId}>\n        {i18n('contentDisplayPreference.description', description)}\n      </p>\n      <DndContext\n        sensors={sensors}\n        collisionDetection={collisionDetection}\n        accessibility={{\n          announcements,\n          restoreFocus: false,\n          screenReaderInstructions: renderedDragHandleAriaDescription\n            ? { draggable: renderedDragHandleAriaDescription }\n            : undefined,\n        }}\n        onDragStart={({ active }) => setActiveItem(active.id)}\n        onDragEnd={event => {\n          setActiveItem(null);\n          const { active, over } = event;\n\n          if (over && active.id !== over.id) {\n            const oldIndex = value.findIndex(({ id }) => id === active.id);\n            const newIndex = value.findIndex(({ id }) => id === over.id);\n            onChange(arrayMove([...value], oldIndex, newIndex));\n          }\n        }}\n        onDragCancel={() => setActiveItem(null)}\n      >\n        {/* Use explicit list role to work around Safari not announcing lists as such when list-style is set to none.\n            See https://bugs.webkit.org/show_bug.cgi?id=170179 */}\n        <ul\n          className={getClassName('option-list')}\n          aria-describedby={descriptionId}\n          aria-labelledby={titleId}\n          role=\"list\"\n        >\n          <SortableContext items={sortedOptions.map(({ id }) => id)} strategy={verticalListSortingStrategy}>\n            {sortedOptions.map(option => {\n              return (\n                <DraggableOption\n                  dragHandleAriaLabel={i18n('contentDisplayPreference.dragHandleAriaLabel', dragHandleAriaLabel)}\n                  key={option.id}\n                  onKeyDown={handleKeyDown}\n                  onToggle={onToggle}\n                  option={option}\n                />\n              );\n            })}\n          </SortableContext>\n        </ul>\n        <Portal>\n          {/* Make sure that the drag overlay is above the modal\n              by assigning the z-index as inline style\n              so that it prevails over dnd-kit's inline z-index of 999  */}\n          {/* className is a documented prop of the DragOverlay component:\n              https://docs.dndkit.com/api-documentation/draggable/drag-overlay#class-name-and-inline-styles */\n          /* eslint-disable-next-line react/forbid-component-props */}\n          <DragOverlay className={styles['drag-overlay']} dropAnimation={null} style={{ zIndex: 5000 }}>\n            {activeOption && (\n              <ContentDisplayOption\n                listeners={{ onKeyDown: handleKeyDown }}\n                dragHandleAriaLabel={i18n('contentDisplayPreference.dragHandleAriaLabel', dragHandleAriaLabel)}\n                onToggle={onToggle}\n                option={activeOption}\n              />\n            )}\n          </DragOverlay>\n        </Portal>\n      </DndContext>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}