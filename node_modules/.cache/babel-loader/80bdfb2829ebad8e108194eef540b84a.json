{"ast":null,"code":"import { useEffect, useRef } from 'react';\nimport defaultOptionDescription from '../../internal/components/option/option-announcer';\n/**\n * The hook produces the live region string to be announced when an option is highlighted.\n * This is a workaround to account for the issues with assistive technologies.\n *\n * If the testing reveals no issues with the native announcements the live-region can be removed.\n */\nexport function useAnnouncement(_ref) {\n  var announceSelected = _ref.announceSelected,\n    highlightedOption = _ref.highlightedOption,\n    getParent = _ref.getParent,\n    selectedAriaLabel = _ref.selectedAriaLabel,\n    renderHighlightedAriaLive = _ref.renderHighlightedAriaLive;\n  var prevAnnouncedGroup = useRef(undefined);\n  // Record previously announced group with a delay to account for possible re-renders of the hook.\n  useEffect(function () {\n    if (highlightedOption) {\n      var frameId = requestAnimationFrame(function () {\n        prevAnnouncedGroup.current = getParent(highlightedOption);\n      });\n      return function () {\n        return cancelAnimationFrame(frameId);\n      };\n    }\n  });\n  if (!highlightedOption) {\n    return '';\n  }\n  var option = highlightedOption.option;\n  var parent = getParent(highlightedOption);\n  // Only announce parent group if it wasn't announced with previous option.\n  var group = parent && parent !== prevAnnouncedGroup.current ? parent : undefined;\n  // Use custom renderer if provided.\n  if (renderHighlightedAriaLive) {\n    return renderHighlightedAriaLive(option, group);\n  }\n  // Use default renderer with selected ARIA label if defined and relevant.\n  var selectedAnnouncement = announceSelected && selectedAriaLabel ? selectedAriaLabel : '';\n  var defaultDescription = defaultOptionDescription(option, group);\n  return [selectedAnnouncement, defaultDescription].filter(Boolean).join(' ');\n}","map":{"version":3,"mappings":"AAIA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,OAAOC,wBAAwB,MAAM,mDAAmD;AAMxF;;;;;;AAMA,OAAM,SAAUC,eAAe,OAY9B;EAAA,IAXCC,gBAAgB,QAAhBA,gBAAgB;IAChBC,iBAAiB,QAAjBA,iBAAiB;IACjBC,SAAS,QAATA,SAAS;IACTC,iBAAiB,QAAjBA,iBAAiB;IACjBC,yBAAyB,QAAzBA,yBAAyB;EAQzB,IAAMC,kBAAkB,GAAGR,MAAM,CAA0BS,SAAS,CAAC;EAErE;EACAV,SAAS,CAAC,YAAK;IACb,IAAIK,iBAAiB,EAAE;MACrB,IAAMM,OAAO,GAAGC,qBAAqB,CAAC,YAAK;QACzCH,kBAAkB,CAACI,OAAO,GAAGP,SAAS,CAACD,iBAAiB,CAAC;MAC3D,CAAC,CAAC;MACF,OAAO;QAAA,OAAMS,oBAAoB,CAACH,OAAO,CAAC;MAAA;;EAE9C,CAAC,CAAC;EAEF,IAAI,CAACN,iBAAiB,EAAE;IACtB,OAAO,EAAE;;EAGX,IAAMU,MAAM,GAAGV,iBAAiB,CAACU,MAA0B;EAC3D,IAAMC,MAAM,GAAGV,SAAS,CAACD,iBAAiB,CAAC;EAC3C;EACA,IAAMY,KAAK,GAAGD,MAAM,IAAIA,MAAM,KAAKP,kBAAkB,CAACI,OAAO,GAAGG,MAAM,GAAGN,SAAS;EAElF;EACA,IAAIF,yBAAyB,EAAE;IAC7B,OAAOA,yBAAyB,CAACO,MAAM,EAAEE,KAAK,CAAC;;EAGjD;EACA,IAAMC,oBAAoB,GAAGd,gBAAgB,IAAIG,iBAAiB,GAAGA,iBAAiB,GAAG,EAAE;EAC3F,IAAMY,kBAAkB,GAAGjB,wBAAwB,CAACa,MAAM,EAAEE,KAAK,CAAC;EAClE,OAAO,CAACC,oBAAoB,EAAEC,kBAAkB,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;AAC7E","names":["useEffect","useRef","defaultOptionDescription","useAnnouncement","announceSelected","highlightedOption","getParent","selectedAriaLabel","renderHighlightedAriaLive","prevAnnouncedGroup","undefined","frameId","requestAnimationFrame","current","cancelAnimationFrame","option","parent","group","selectedAnnouncement","defaultDescription","filter","Boolean","join"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/select/utils/lib/default/select/utils/use-announcement.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { OptionDefinition, OptionGroup } from '../../internal/components/option/interfaces';\nimport { SelectProps } from '../interfaces';\nimport { useEffect, useRef } from 'react';\nimport defaultOptionDescription from '../../internal/components/option/option-announcer';\n\ninterface OptionHolder {\n  option?: OptionDefinition | OptionGroup;\n}\n\n/**\n * The hook produces the live region string to be announced when an option is highlighted.\n * This is a workaround to account for the issues with assistive technologies.\n *\n * If the testing reveals no issues with the native announcements the live-region can be removed.\n */\nexport function useAnnouncement<Option extends OptionHolder>({\n  announceSelected,\n  highlightedOption,\n  getParent,\n  selectedAriaLabel,\n  renderHighlightedAriaLive,\n}: {\n  announceSelected: boolean;\n  highlightedOption?: Option;\n  getParent: (option: Option) => undefined | OptionGroup;\n  selectedAriaLabel?: string;\n  renderHighlightedAriaLive?: SelectProps.ContainingOptionAndGroupString;\n}) {\n  const prevAnnouncedGroup = useRef<OptionGroup | undefined>(undefined);\n\n  // Record previously announced group with a delay to account for possible re-renders of the hook.\n  useEffect(() => {\n    if (highlightedOption) {\n      const frameId = requestAnimationFrame(() => {\n        prevAnnouncedGroup.current = getParent(highlightedOption);\n      });\n      return () => cancelAnimationFrame(frameId);\n    }\n  });\n\n  if (!highlightedOption) {\n    return '';\n  }\n\n  const option = highlightedOption.option as OptionDefinition;\n  const parent = getParent(highlightedOption);\n  // Only announce parent group if it wasn't announced with previous option.\n  const group = parent && parent !== prevAnnouncedGroup.current ? parent : undefined;\n\n  // Use custom renderer if provided.\n  if (renderHighlightedAriaLive) {\n    return renderHighlightedAriaLive(option, group);\n  }\n\n  // Use default renderer with selected ARIA label if defined and relevant.\n  const selectedAnnouncement = announceSelected && selectedAriaLabel ? selectedAriaLabel : '';\n  const defaultDescription = defaultOptionDescription(option, group);\n  return [selectedAnnouncement, defaultDescription].filter(Boolean).join(' ');\n}\n"]},"metadata":{},"sourceType":"module"}