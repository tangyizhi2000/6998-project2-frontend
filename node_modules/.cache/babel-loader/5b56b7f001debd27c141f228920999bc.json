{"ast":null,"code":"var _jsxFileName = \"/Users/tangyizhi/Desktop/Assignment2/frontend/src/searchPhotos.js\",\n  _s = $RefreshSig$();\nimport * as React from \"react\";\nimport ContentLayout from \"@cloudscape-design/components/content-layout\";\nimport Container from \"@cloudscape-design/components/container\";\nimport Header from \"@cloudscape-design/components/header\";\nimport SpaceBetween from \"@cloudscape-design/components/space-between\";\nimport Link from \"@cloudscape-design/components/link\";\nimport Button from \"@cloudscape-design/components/button\";\nimport Alert from \"@cloudscape-design/components/alert\";\nimport FileUpload from \"@cloudscape-design/components/file-upload\";\nimport FormField from \"@cloudscape-design/components/form-field\";\nimport AttributeEditor from \"@cloudscape-design/components/attribute-editor\";\nimport Input from \"@cloudscape-design/components/input\";\nimport Tabs from \"@cloudscape-design/components/tabs\";\nimport AttributeEditorExample from \"./ChangableAttributeEditor\";\nimport TextContent from \"@cloudscape-design/components/text-content\";\nimport Cards from \"@cloudscape-design/components/cards\";\nimport Box from \"@cloudscape-design/components/box\";\nimport logoS3 from './logoS3.png';\nimport logoCF from './logoCloudFront.png';\nimport SpeechRecognition, { useSpeechRecognition } from \"react-speech-recognition\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchPhotos() {\n  _s();\n  const [query, setQuery] = React.useState(\"\");\n  const {\n    transcript,\n    resetTranscript\n  } = useSpeechRecognition();\n  const [items, setItems] = React.useState([]);\n  function startRecording() {\n    resetTranscript();\n    SpeechRecognition.startListening({\n      continuous: true\n    });\n  }\n  function stopRecording() {\n    SpeechRecognition.stopListening();\n    setQuery(transcript);\n    resetTranscript();\n  }\n  function sendRequest() {\n    // send requests to backend\n    var url = \"https://aqc18ezxgh.execute-api.us-east-1.amazonaws.com/GET_OK/search?q=\";\n    url += query;\n    console.log(\"sending requests to\", url);\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    fetch(url, requestOptions).then(response => {\n      return response.json();\n    }).then(json_response => {\n      all_photos = [];\n      console.log(Object.keys(json_response), json_response['list']);\n      for (var i = 0; i < json_response['list'].length; ++i) {\n        all_photos.push({\n          name: \"\",\n          description: json_response['list'][i]\n        });\n      }\n      setItems();\n      console.log(all_photos, items);\n    });\n  }\n  ;\n  return /*#__PURE__*/_jsxDEV(SpaceBetween, {\n    size: \"m\",\n    children: [/*#__PURE__*/_jsxDEV(TextContent, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Please enter your search query, or use the button below to transcribe from voice\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      onChange: _ref => {\n        let {\n          detail\n        } = _ref;\n        return setQuery(detail.value);\n      },\n      value: query,\n      placeholder: \"Please enter your search query\",\n      type: \"search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SpaceBetween, {\n      size: \"m\",\n      direction: \"horizontal\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: startRecording,\n        children: \"Start Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: stopRecording,\n        children: \"Stop Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      onClick: sendRequest,\n      children: \"Submit Search Query\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextContent, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Search Results are displayed below\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Cards, {\n      cardDefinition: {\n        header: item => item.name,\n        sections: [{\n          id: \"description\",\n          content: item => /*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.description,\n            width: \"100\",\n            height: \"100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 43\n          }, this)\n        }]\n      },\n      cardsPerRow: [{\n        cards: 1\n      }, {\n        minWidth: 500,\n        cards: 2\n      }],\n      items: items,\n      loadingText: \"Loading photos\",\n      empty: /*#__PURE__*/_jsxDEV(Box, {\n        margin: {\n          vertical: \"xs\"\n        },\n        textAlign: \"center\",\n        color: \"inherit\",\n        children: /*#__PURE__*/_jsxDEV(SpaceBetween, {\n          size: \"m\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"No Photos Found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n_s(SearchPhotos, \"kszVJm8WEA+btc8yAtp4zfKv3D4=\", false, function () {\n  return [useSpeechRecognition];\n});\n_c = SearchPhotos;\nvar _c;\n$RefreshReg$(_c, \"SearchPhotos\");","map":{"version":3,"names":["React","ContentLayout","Container","Header","SpaceBetween","Link","Button","Alert","FileUpload","FormField","AttributeEditor","Input","Tabs","AttributeEditorExample","TextContent","Cards","Box","logoS3","logoCF","SpeechRecognition","useSpeechRecognition","SearchPhotos","query","setQuery","useState","transcript","resetTranscript","items","setItems","startRecording","startListening","continuous","stopRecording","stopListening","sendRequest","url","console","log","requestOptions","method","headers","fetch","then","response","json","json_response","all_photos","Object","keys","i","length","push","name","description","detail","value","header","item","sections","id","content","cards","minWidth","vertical"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/src/searchPhotos.js"],"sourcesContent":["import * as React from \"react\";\nimport ContentLayout from \"@cloudscape-design/components/content-layout\";\nimport Container from \"@cloudscape-design/components/container\";\nimport Header from \"@cloudscape-design/components/header\";\nimport SpaceBetween from \"@cloudscape-design/components/space-between\";\nimport Link from \"@cloudscape-design/components/link\";\nimport Button from \"@cloudscape-design/components/button\";\nimport Alert from \"@cloudscape-design/components/alert\";\nimport FileUpload from \"@cloudscape-design/components/file-upload\";\nimport FormField from \"@cloudscape-design/components/form-field\";\nimport AttributeEditor from \"@cloudscape-design/components/attribute-editor\";\nimport Input from \"@cloudscape-design/components/input\";\nimport Tabs from \"@cloudscape-design/components/tabs\";\nimport AttributeEditorExample from \"./ChangableAttributeEditor\";\nimport TextContent from \"@cloudscape-design/components/text-content\";\nimport Cards from \"@cloudscape-design/components/cards\";\nimport Box from \"@cloudscape-design/components/box\";\n\nimport logoS3 from './logoS3.png';\nimport logoCF from './logoCloudFront.png';\n\nimport SpeechRecognition, { useSpeechRecognition } from \"react-speech-recognition\";\n\n\nexport default function SearchPhotos() {\n    const [query, setQuery] = React.useState(\"\");\n    const { transcript, resetTranscript } = useSpeechRecognition();\n    const [items, setItems] = React.useState([]);\n\n    function startRecording() {\n        resetTranscript();\n        SpeechRecognition.startListening({\n            continuous: true,\n        });\n    }\n    function stopRecording() {\n        SpeechRecognition.stopListening();\n        setQuery(transcript);\n        resetTranscript();\n    }\n\n    function sendRequest() {\n        // send requests to backend\n        var url = \"https://aqc18ezxgh.execute-api.us-east-1.amazonaws.com/GET_OK/search?q=\";\n        url += query;\n        console.log(\"sending requests to\", url);\n        const requestOptions = {\n          method: 'GET',\n          headers: { 'Content-Type': 'application/json' },\n        };\n        fetch(url, requestOptions)\n            .then((response) => {\n                return response.json();\n            })\n            .then((json_response)=>{\n                all_photos = [];\n                console.log(Object.keys(json_response), json_response['list']);\n                for(var i = 0; i < json_response['list'].length; ++i){\n                    all_photos.push({\n                        name: \"\",\n                        description: json_response['list'][i],\n                    });\n                }\n                setItems()\n                console.log(all_photos, items);\n            });\n    };\n\n    return (\n        <SpaceBetween size='m'>\n            <TextContent>\n                <p>\n                    <strong>Please enter your search query, or use the button below to transcribe from voice</strong>\n                </p>\n            </TextContent>\n            <Input\n                onChange={({ detail }) => setQuery(detail.value)}\n                value={query}\n                placeholder=\"Please enter your search query\"\n                type=\"search\"\n            />\n            <SpaceBetween size=\"m\" direction=\"horizontal\">\n                <Button onClick={startRecording}>Start Recording</Button>\n                <Button onClick={stopRecording}>Stop Recording</Button>\n            </SpaceBetween>\n            <Button variant=\"primary\" onClick={sendRequest}>Submit Search Query</Button>\n            <TextContent>\n                <p>\n                    <strong>Search Results are displayed below</strong>\n                </p>\n            </TextContent>\n            <Cards\n                cardDefinition={{\n                    header: item => (item.name),\n                    sections: [\n                    {\n                        id: \"description\",\n                        content: item => (<img src={item.description} width=\"100\" height=\"100\"/>)\n                    },\n                    ]\n                }}\n                cardsPerRow={[\n                    { cards: 1 },\n                    { minWidth: 500, cards: 2 }\n                ]}\n                items={items}\n                loadingText=\"Loading photos\"\n                empty={\n                    <Box\n                    margin={{ vertical: \"xs\" }}\n                    textAlign=\"center\"\n                    color=\"inherit\"\n                    >\n                    <SpaceBetween size=\"m\">\n                        <b>No Photos Found</b>\n                    </SpaceBetween>\n                    </Box>\n                }\n            />\n        </SpaceBetween>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}