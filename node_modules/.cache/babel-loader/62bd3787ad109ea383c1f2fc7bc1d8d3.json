{"ast":null,"code":"import _slicedToArray from\"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import ContentLayout from\"@cloudscape-design/components/content-layout\";import Container from\"@cloudscape-design/components/container\";import Header from\"@cloudscape-design/components/header\";import SpaceBetween from\"@cloudscape-design/components/space-between\";import Link from\"@cloudscape-design/components/link\";import Button from\"@cloudscape-design/components/button\";import Alert from\"@cloudscape-design/components/alert\";import FileUpload from\"@cloudscape-design/components/file-upload\";import FormField from\"@cloudscape-design/components/form-field\";import AttributeEditor from\"@cloudscape-design/components/attribute-editor\";import Input from\"@cloudscape-design/components/input\";import Tabs from\"@cloudscape-design/components/tabs\";import AttributeEditorExample from\"./ChangableAttributeEditor\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadPhotos(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),photo=_React$useState2[0],setPhoto=_React$useState2[1];var _useState=useState([{label:''}]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];function handleSubmit(event){event.preventDefault();var url='https://aqc18ezxgh.execute-api.us-east-1.amazonaws.com/GET_OK/b2-photos/';url=url+photo[0].name;var labels=\"\";for(var i=0;i<items.length;++i){if(items[i].key!=\"\"){labels=labels+items[i].key+\",\";}}if(labels[labels.length-1]==','){labels=labels.substring(0,labels.length-1);}var config={headers:{'content-type':'image/png','x-amz-meta-customLabels':labels}};console.log(\"sending request to\",url,\"with labels:\",labels);axios.put(url,photo[0],config).then(function(response){console.log(response.data);});}return/*#__PURE__*/_jsxs(SpaceBetween,{size:\"m\",children:[/*#__PURE__*/_jsx(FormField,{label:\"Upload photos\",description:\"Please upload photos, and don't forget to add one or more labels for this photo\",children:/*#__PURE__*/_jsx(FileUpload,{onChange:function onChange(_ref){var detail=_ref.detail;return setPhoto(detail.value);},value:photo,i18nStrings:{uploadButtonText:function uploadButtonText(e){return e?\"Choose files\":\"Choose photo\";},dropzoneText:function dropzoneText(e){return e?\"Drop files to upload\":\"Drop file to upload\";},removeFileAriaLabel:function removeFileAriaLabel(e){return\"Remove file \".concat(e+1);},limitShowFewer:\"Show fewer files\",limitShowMore:\"Show more files\",errorIconAriaLabel:\"Error\"},showFileLastModified:true,showFileSize:true,showFileThumbnail:true,tokenLimit:3,constraintText:/*#__PURE__*/_jsx(React.Fragment,{children:\"Please upload photos only\"})})}),/*#__PURE__*/_jsx(AttributeEditorExample,{items:items,setItems:setItems}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,children:\"Submit Photos and Labels\"})]});}","map":{"version":3,"names":["React","useState","axios","ContentLayout","Container","Header","SpaceBetween","Link","Button","Alert","FileUpload","FormField","AttributeEditor","Input","Tabs","AttributeEditorExample","UploadPhotos","photo","setPhoto","label","items","setItems","handleSubmit","event","preventDefault","url","name","labels","i","length","key","substring","config","headers","console","log","put","then","response","data","detail","value","uploadButtonText","e","dropzoneText","removeFileAriaLabel","limitShowFewer","limitShowMore","errorIconAriaLabel"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/src/uploadTab.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport ContentLayout from \"@cloudscape-design/components/content-layout\";\nimport Container from \"@cloudscape-design/components/container\";\nimport Header from \"@cloudscape-design/components/header\";\nimport SpaceBetween from \"@cloudscape-design/components/space-between\";\nimport Link from \"@cloudscape-design/components/link\";\nimport Button from \"@cloudscape-design/components/button\";\nimport Alert from \"@cloudscape-design/components/alert\";\nimport FileUpload from \"@cloudscape-design/components/file-upload\";\nimport FormField from \"@cloudscape-design/components/form-field\";\nimport AttributeEditor from \"@cloudscape-design/components/attribute-editor\";\nimport Input from \"@cloudscape-design/components/input\";\nimport Tabs from \"@cloudscape-design/components/tabs\";\nimport AttributeEditorExample from \"./ChangableAttributeEditor\";\n\nexport default function UploadPhotos() {\n\n    const [photo, setPhoto] = React.useState([]);\n\n    const [items, setItems] = useState([\n      { label: '',},\n    ]);\n\n    function handleSubmit(event) {\n      event.preventDefault()\n      var url = 'https://aqc18ezxgh.execute-api.us-east-1.amazonaws.com/GET_OK/b2-photos/';\n      url = url + photo[0].name;\n      var labels = \"\";\n      for(var i = 0; i < items.length; ++i){\n        if(items[i].key != \"\"){\n          labels = labels + items[i].key + \",\";\n        }\n      }\n      if(labels[labels.length-1] == ','){\n        labels = labels.substring(0,labels.length-1);\n      }\n      const config = {\n        headers: {\n          'content-type': 'image/png',\n          'x-amz-meta-customLabels': labels,\n        },\n      };\n      console.log(\"sending request to\", url, \"with labels:\", labels);\n      axios.put(url, photo[0], config).then((response) => {\n        console.log(response.data);\n      });\n    }\n\n    return (\n        <SpaceBetween size='m'>\n            <FormField\n              label=\"Upload photos\"\n              description=\"Please upload photos, and don't forget to add one or more labels for this photo\"\n            >\n              <FileUpload\n                onChange={({ detail }) => setPhoto(detail.value)}\n                value={photo}\n                i18nStrings={{\n                  uploadButtonText: e =>\n                    e ? \"Choose files\" : \"Choose photo\",\n                  dropzoneText: e =>\n                    e\n                      ? \"Drop files to upload\"\n                      : \"Drop file to upload\",\n                  removeFileAriaLabel: e =>\n                    `Remove file ${e + 1}`,\n                  limitShowFewer: \"Show fewer files\",\n                  limitShowMore: \"Show more files\",\n                  errorIconAriaLabel: \"Error\"\n                }}\n                showFileLastModified\n                showFileSize\n                showFileThumbnail\n                tokenLimit={3}\n                constraintText={\n                  <React.Fragment>\n                    Please upload photos only\n                  </React.Fragment>\n                }\n              />\n            </FormField>\n            <AttributeEditorExample items={items} setItems={setItems}/>\n            <Button variant=\"primary\" onClick={handleSubmit}>Submit Photos and Labels</Button>\n        </SpaceBetween>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}