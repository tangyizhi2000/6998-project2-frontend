{"ast":null,"code":"import _defineProperty from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useContext, useRef } from 'react';\nimport clsx from 'clsx';\nimport InternalIcon from '../icon/internal';\nimport styles from './styles.css.js';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireCancelableEvent, isPlainLeftClick } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { KeyCode } from '../internal/keycode';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { useInternalI18n } from '../i18n/context';\nimport { InfoLinkLabelContext } from '../internal/context/info-link-label-context';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { DATA_ATTR_FUNNEL_VALUE, getFunnelValueSelector, getNameFromSelector, getSubStepAllSelector } from '../internal/analytics/selectors';\nimport { LinkDefaultVariantContext } from '../internal/context/link-default-variant-context';\nvar InternalLink = React.forwardRef(function (_a, ref) {\n  var providedVariant = _a.variant,\n    _a$fontSize = _a.fontSize,\n    fontSize = _a$fontSize === void 0 ? 'body-m' : _a$fontSize,\n    _a$color = _a.color,\n    color = _a$color === void 0 ? 'normal' : _a$color,\n    _a$external = _a.external,\n    external = _a$external === void 0 ? false : _a$external,\n    target = _a.target,\n    href = _a.href,\n    rel = _a.rel,\n    ariaLabel = _a.ariaLabel,\n    externalIconAriaLabel = _a.externalIconAriaLabel,\n    onFollow = _a.onFollow,\n    children = _a.children,\n    _a$__internalRootRef = _a.__internalRootRef,\n    __internalRootRef = _a$__internalRootRef === void 0 ? null : _a$__internalRootRef,\n    props = __rest(_a, [\"variant\", \"fontSize\", \"color\", \"external\", \"target\", \"href\", \"rel\", \"ariaLabel\", \"externalIconAriaLabel\", \"onFollow\", \"children\", \"__internalRootRef\"]);\n  checkSafeUrl('Link', href);\n  var isButton = !href;\n  var _useContext = useContext(LinkDefaultVariantContext),\n    defaultVariant = _useContext.defaultVariant;\n  var variant = providedVariant || defaultVariant;\n  var specialStyles = ['top-navigation', 'link', 'recovery'];\n  var hasSpecialStyle = specialStyles.indexOf(variant) > -1;\n  var i18n = useInternalI18n('link');\n  var baseProps = getBaseProps(props);\n  var anchorTarget = target !== null && target !== void 0 ? target : external ? '_blank' : undefined;\n  var anchorRel = rel !== null && rel !== void 0 ? rel : anchorTarget === '_blank' ? 'noopener noreferrer' : undefined;\n  var uniqueId = useUniqueId('link');\n  var linkId = useUniqueId('link-self');\n  var infoId = useUniqueId('link-info');\n  var infoLinkLabelFromContext = useContext(InfoLinkLabelContext);\n  var _useFunnel = useFunnel(),\n    funnelInteractionId = _useFunnel.funnelInteractionId;\n  var _useFunnelStep = useFunnelStep(),\n    stepNumber = _useFunnelStep.stepNumber,\n    stepNameSelector = _useFunnelStep.stepNameSelector;\n  var _useFunnelSubStep = useFunnelSubStep(),\n    subStepSelector = _useFunnelSubStep.subStepSelector,\n    subStepNameSelector = _useFunnelSubStep.subStepNameSelector;\n  var fireFunnelEvent = function fireFunnelEvent(funnelInteractionId) {\n    if (variant === 'info') {\n      var stepName = getNameFromSelector(stepNameSelector);\n      var subStepName = getNameFromSelector(subStepNameSelector);\n      FunnelMetrics.helpPanelInteracted({\n        funnelInteractionId: funnelInteractionId,\n        stepNumber: stepNumber,\n        stepName: stepName,\n        stepNameSelector: stepNameSelector,\n        subStepSelector: subStepSelector,\n        subStepName: subStepName,\n        subStepNameSelector: subStepNameSelector,\n        elementSelector: getFunnelValueSelector(uniqueId),\n        subStepAllSelector: getSubStepAllSelector()\n      });\n    } else if (external) {\n      var _stepName = getNameFromSelector(stepNameSelector);\n      var _subStepName = getNameFromSelector(subStepNameSelector);\n      FunnelMetrics.externalLinkInteracted({\n        funnelInteractionId: funnelInteractionId,\n        stepNumber: stepNumber,\n        stepName: _stepName,\n        stepNameSelector: stepNameSelector,\n        subStepSelector: subStepSelector,\n        subStepName: _subStepName,\n        subStepNameSelector: subStepNameSelector,\n        elementSelector: getFunnelValueSelector(uniqueId),\n        subStepAllSelector: getSubStepAllSelector()\n      });\n    }\n  };\n  var fireFollowEvent = function fireFollowEvent(event) {\n    if (funnelInteractionId) {\n      fireFunnelEvent(funnelInteractionId);\n    }\n    fireCancelableEvent(onFollow, {\n      href: href,\n      external: external,\n      target: anchorTarget\n    }, event);\n  };\n  var handleLinkClick = function handleLinkClick(event) {\n    if (isPlainLeftClick(event)) {\n      fireFollowEvent(event);\n    }\n  };\n  var handleButtonClick = function handleButtonClick(event) {\n    fireFollowEvent(event);\n  };\n  var handleButtonKeyDown = function handleButtonKeyDown(event) {\n    if (event.keyCode === KeyCode.space || event.keyCode === KeyCode.enter) {\n      event.preventDefault();\n      fireFollowEvent(event);\n    }\n  };\n  var linkRef = useRef(null);\n  var isVisualRefresh = useVisualRefresh();\n  useForwardFocus(ref, linkRef);\n  // Visual refresh should only add styles to buttons that don't already have unique styles (e.g. primary/secondary variants)\n  var applyButtonStyles = isButton && isVisualRefresh && !hasSpecialStyle;\n  var sharedProps = Object.assign(Object.assign({\n    id: linkId\n  }, baseProps), _defineProperty({\n    // https://github.com/microsoft/TypeScript/issues/36659\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ref: useMergeRefs(linkRef, __internalRootRef),\n    className: clsx(styles.link, baseProps.className, applyButtonStyles ? styles.button : null, styles[getVariantStyle(variant)], styles[getFontSizeStyle(variant, fontSize)], styles[getColorStyle(variant, color)]),\n    'aria-label': ariaLabel,\n    'aria-labelledby': ''\n  }, DATA_ATTR_FUNNEL_VALUE, uniqueId));\n  if (variant === 'info' && infoLinkLabelFromContext && !ariaLabel) {\n    sharedProps['aria-labelledby'] = \"\".concat(sharedProps.id, \" \").concat(infoId, \" \").concat(infoLinkLabelFromContext);\n  }\n  var renderedExternalIconAriaLabel = i18n('externalIconAriaLabel', externalIconAriaLabel);\n  var content = React.createElement(React.Fragment, null, children, external && React.createElement(\"span\", {\n    className: styles['icon-wrapper']\n  }, \"\\xA0\", React.createElement(\"span\", {\n    className: styles.icon,\n    \"aria-label\": renderedExternalIconAriaLabel,\n    role: renderedExternalIconAriaLabel ? 'img' : undefined\n  }, React.createElement(InternalIcon, {\n    name: \"external\",\n    size: \"inherit\"\n  }))), variant === 'info' && React.createElement(\"span\", {\n    hidden: true,\n    id: infoId\n  }, \":\"));\n  if (isButton) {\n    return React.createElement(\"a\", Object.assign({}, sharedProps, {\n      role: \"button\",\n      tabIndex: 0,\n      onKeyDown: handleButtonKeyDown,\n      onClick: handleButtonClick\n    }), content);\n  }\n  return (\n    // we dynamically set proper rel in the code above\n    // eslint-disable-next-line react/jsx-no-target-blank\n    React.createElement(\"a\", Object.assign({}, sharedProps, {\n      target: anchorTarget,\n      rel: anchorRel,\n      href: href,\n      onClick: handleLinkClick\n    }), content)\n  );\n});\nfunction getVariantStyle(variant) {\n  return \"variant-\".concat(variant.replace(/^awsui-/, ''));\n}\nfunction getFontSizeStyle(variant, fontSize) {\n  switch (variant) {\n    case 'info':\n      return 'font-size-body-s';\n    case 'awsui-value-large':\n      return 'font-size-display-l';\n    default:\n      return \"font-size-\".concat(fontSize);\n  }\n}\nfunction getColorStyle(variant, color) {\n  return \"color-\".concat(variant === 'info' ? 'normal' : color);\n}\nexport default InternalLink;","map":{"version":3,"mappings":"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","names":["React","useContext","useRef","clsx","InternalIcon","styles","getBaseProps","fireCancelableEvent","isPlainLeftClick","useForwardFocus","KeyCode","useMergeRefs","useVisualRefresh","checkSafeUrl","useInternalI18n","InfoLinkLabelContext","useFunnel","useFunnelStep","useFunnelSubStep","FunnelMetrics","useUniqueId","DATA_ATTR_FUNNEL_VALUE","getFunnelValueSelector","getNameFromSelector","getSubStepAllSelector","LinkDefaultVariantContext","InternalLink","forwardRef","_a","ref","providedVariant","variant","fontSize","color","external","target","href","rel","ariaLabel","externalIconAriaLabel","onFollow","children","__internalRootRef","props","isButton","defaultVariant","specialStyles","hasSpecialStyle","indexOf","i18n","baseProps","anchorTarget","undefined","anchorRel","uniqueId","linkId","infoId","infoLinkLabelFromContext","funnelInteractionId","stepNumber","stepNameSelector","subStepSelector","subStepNameSelector","fireFunnelEvent","stepName","subStepName","helpPanelInteracted","elementSelector","subStepAllSelector","externalLinkInteracted","fireFollowEvent","event","handleLinkClick","handleButtonClick","handleButtonKeyDown","keyCode","space","enter","preventDefault","linkRef","isVisualRefresh","applyButtonStyles","sharedProps","id","className","link","button","getVariantStyle","getFontSizeStyle","getColorStyle","renderedExternalIconAriaLabel","content","icon","role","name","size","hidden","tabIndex","onKeyDown","onClick","replace"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/link/lib/default/link/internal.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useContext, useRef } from 'react';\nimport clsx from 'clsx';\nimport InternalIcon from '../icon/internal';\nimport styles from './styles.css.js';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireCancelableEvent, isPlainLeftClick } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { KeyCode } from '../internal/keycode';\nimport { LinkProps } from './interfaces';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { useInternalI18n } from '../i18n/context';\nimport { InfoLinkLabelContext } from '../internal/context/info-link-label-context';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\n\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport {\n  DATA_ATTR_FUNNEL_VALUE,\n  getFunnelValueSelector,\n  getNameFromSelector,\n  getSubStepAllSelector,\n} from '../internal/analytics/selectors';\nimport { LinkDefaultVariantContext } from '../internal/context/link-default-variant-context';\n\ntype InternalLinkProps = InternalBaseComponentProps &\n  Omit<LinkProps, 'variant'> & {\n    variant?: LinkProps['variant'] | 'top-navigation' | 'link' | 'recovery';\n  };\n\nconst InternalLink = React.forwardRef(\n  (\n    {\n      variant: providedVariant,\n      fontSize = 'body-m',\n      color = 'normal',\n      external = false,\n      target,\n      href,\n      rel,\n      ariaLabel,\n      externalIconAriaLabel,\n      onFollow,\n      children,\n      __internalRootRef = null,\n      ...props\n    }: InternalLinkProps,\n    ref: React.Ref<LinkProps.Ref>\n  ) => {\n    checkSafeUrl('Link', href);\n    const isButton = !href;\n    const { defaultVariant } = useContext(LinkDefaultVariantContext);\n    const variant = providedVariant || defaultVariant;\n    const specialStyles = ['top-navigation', 'link', 'recovery'];\n    const hasSpecialStyle = specialStyles.indexOf(variant) > -1;\n\n    const i18n = useInternalI18n('link');\n    const baseProps = getBaseProps(props);\n    const anchorTarget = target ?? (external ? '_blank' : undefined);\n    const anchorRel = rel ?? (anchorTarget === '_blank' ? 'noopener noreferrer' : undefined);\n    const uniqueId = useUniqueId('link');\n    const linkId = useUniqueId('link-self');\n    const infoId = useUniqueId('link-info');\n\n    const infoLinkLabelFromContext = useContext(InfoLinkLabelContext);\n\n    const { funnelInteractionId } = useFunnel();\n    const { stepNumber, stepNameSelector } = useFunnelStep();\n    const { subStepSelector, subStepNameSelector } = useFunnelSubStep();\n\n    const fireFunnelEvent = (funnelInteractionId: string) => {\n      if (variant === 'info') {\n        const stepName = getNameFromSelector(stepNameSelector);\n        const subStepName = getNameFromSelector(subStepNameSelector);\n\n        FunnelMetrics.helpPanelInteracted({\n          funnelInteractionId,\n          stepNumber,\n          stepName,\n          stepNameSelector,\n          subStepSelector,\n          subStepName,\n          subStepNameSelector,\n          elementSelector: getFunnelValueSelector(uniqueId),\n          subStepAllSelector: getSubStepAllSelector(),\n        });\n      } else if (external) {\n        const stepName = getNameFromSelector(stepNameSelector);\n        const subStepName = getNameFromSelector(subStepNameSelector);\n\n        FunnelMetrics.externalLinkInteracted({\n          funnelInteractionId,\n          stepNumber,\n          stepName,\n          stepNameSelector,\n          subStepSelector,\n          subStepName,\n          subStepNameSelector,\n          elementSelector: getFunnelValueSelector(uniqueId),\n          subStepAllSelector: getSubStepAllSelector(),\n        });\n      }\n    };\n\n    const fireFollowEvent = (event: React.SyntheticEvent) => {\n      if (funnelInteractionId) {\n        fireFunnelEvent(funnelInteractionId);\n      }\n\n      fireCancelableEvent(onFollow, { href, external, target: anchorTarget }, event);\n    };\n\n    const handleLinkClick = (event: React.MouseEvent) => {\n      if (isPlainLeftClick(event)) {\n        fireFollowEvent(event);\n      }\n    };\n\n    const handleButtonClick = (event: React.MouseEvent) => {\n      fireFollowEvent(event);\n    };\n\n    const handleButtonKeyDown = (event: React.KeyboardEvent) => {\n      if (event.keyCode === KeyCode.space || event.keyCode === KeyCode.enter) {\n        event.preventDefault();\n        fireFollowEvent(event);\n      }\n    };\n\n    const linkRef = useRef<HTMLElement>(null);\n    const isVisualRefresh = useVisualRefresh();\n    useForwardFocus(ref, linkRef);\n\n    // Visual refresh should only add styles to buttons that don't already have unique styles (e.g. primary/secondary variants)\n    const applyButtonStyles = isButton && isVisualRefresh && !hasSpecialStyle;\n\n    const sharedProps = {\n      id: linkId,\n      ...baseProps,\n      // https://github.com/microsoft/TypeScript/issues/36659\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      ref: useMergeRefs(linkRef as any, __internalRootRef),\n      className: clsx(\n        styles.link,\n        baseProps.className,\n        applyButtonStyles ? styles.button : null,\n        styles[getVariantStyle(variant)],\n        styles[getFontSizeStyle(variant, fontSize)],\n        styles[getColorStyle(variant, color)]\n      ),\n      'aria-label': ariaLabel,\n      'aria-labelledby': '',\n      [DATA_ATTR_FUNNEL_VALUE]: uniqueId,\n    };\n\n    if (variant === 'info' && infoLinkLabelFromContext && !ariaLabel) {\n      sharedProps['aria-labelledby'] = `${sharedProps.id} ${infoId} ${infoLinkLabelFromContext}`;\n    }\n\n    const renderedExternalIconAriaLabel = i18n('externalIconAriaLabel', externalIconAriaLabel);\n    const content = (\n      <>\n        {children}\n        {external && (\n          <span className={styles['icon-wrapper']}>\n            &nbsp;\n            <span\n              className={styles.icon}\n              aria-label={renderedExternalIconAriaLabel}\n              role={renderedExternalIconAriaLabel ? 'img' : undefined}\n            >\n              <InternalIcon name=\"external\" size=\"inherit\" />\n            </span>\n          </span>\n        )}\n        {variant === 'info' && (\n          <span hidden={true} id={infoId}>\n            :\n          </span>\n        )}\n      </>\n    );\n\n    if (isButton) {\n      return (\n        <a {...sharedProps} role=\"button\" tabIndex={0} onKeyDown={handleButtonKeyDown} onClick={handleButtonClick}>\n          {content}\n        </a>\n      );\n    }\n\n    return (\n      // we dynamically set proper rel in the code above\n      // eslint-disable-next-line react/jsx-no-target-blank\n      <a {...sharedProps} target={anchorTarget} rel={anchorRel} href={href} onClick={handleLinkClick}>\n        {content}\n      </a>\n    );\n  }\n);\n\nfunction getVariantStyle(variant: Exclude<InternalLinkProps['variant'], undefined>) {\n  return `variant-${variant.replace(/^awsui-/, '')}`;\n}\n\nfunction getFontSizeStyle(variant: InternalLinkProps['variant'], fontSize: InternalLinkProps['fontSize']) {\n  switch (variant) {\n    case 'info':\n      return 'font-size-body-s';\n    case 'awsui-value-large':\n      return 'font-size-display-l';\n    default:\n      return `font-size-${fontSize}`;\n  }\n}\n\nfunction getColorStyle(variant: InternalLinkProps['variant'], color: InternalLinkProps['color']) {\n  return `color-${variant === 'info' ? 'normal' : color}`;\n}\n\nexport default InternalLink;\n"]},"metadata":{},"sourceType":"module"}