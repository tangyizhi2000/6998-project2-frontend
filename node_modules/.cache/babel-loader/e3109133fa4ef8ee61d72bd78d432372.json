{"ast":null,"code":"import _slicedToArray from \"/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useCollection } from '@cloudscape-design/collection-hooks';\nimport { InternalButton } from '../../button/internal';\nimport InternalHeader from '../../header/internal';\nimport InternalPagination from '../../pagination/internal';\nimport InternalTable from '../../table/internal';\nimport InternalTextFilter from '../../text-filter/internal';\nimport useForwardFocus from '../../internal/hooks/forward-focus';\nimport { EmptyState } from './empty-state';\nimport { useStableCallback } from '@cloudscape-design/component-toolkit/internal';\nexport function getSharedI18Strings(i18n, i18nStrings) {\n  return {\n    filteringCounterText: i18n('i18nStrings.filteringCounterText', i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.filteringCounterText, function (format) {\n      return function (count) {\n        return format({\n          count: count\n        });\n      };\n    }),\n    labelRefresh: i18n('i18nStrings.labelRefresh', i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.labelRefresh),\n    labelsPagination: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.labelsPagination,\n    noMatchTitle: i18n('i18nStrings.filteringNoMatches', i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.filteringNoMatches),\n    noMatchSubtitle: i18n('i18nStrings.filteringCantFindMatch', i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.filteringCantFindMatch),\n    clearFilterButtonText: i18n('i18nStrings.clearFilterButtonText', i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.clearFilterButtonText),\n    filteringClearAriaLabel: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.labelClearFilter\n  };\n}\nexport function BasicS3Table(_ref) {\n  var forwardFocusRef = _ref.forwardFocusRef,\n    columnDefinitions = _ref.columnDefinitions,\n    fetchData = _ref.fetchData,\n    trackBy = _ref.trackBy,\n    _ref$i18nStrings = _ref.i18nStrings,\n    i18nStrings = _ref$i18nStrings === void 0 ? {} : _ref$i18nStrings,\n    isVisualRefresh = _ref.isVisualRefresh,\n    visibleColumns = _ref.visibleColumns,\n    isItemDisabled = _ref.isItemDisabled,\n    onSelect = _ref.onSelect;\n  var _a;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    allItems = _useState4[0],\n    setAllItems = _useState4[1];\n  var textFilterRef = useRef(null);\n  var onSelectLatest = useStableCallback(onSelect);\n  function loadData() {\n    setLoading(true);\n    fetchData().then(function (items) {\n      setAllItems(items);\n      setLoading(false);\n    }).catch(function () {\n      // error handling should happen on the customer side, outside of this component\n      setLoading(false);\n    });\n  }\n  useEffect(function () {\n    loadData();\n    // Data loading is only happening on initial render, or via refresh button\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useForwardFocus(forwardFocusRef, textFilterRef);\n  var _useCollection = useCollection(allItems, {\n      selection: {\n        trackBy: trackBy\n      },\n      filtering: {\n        empty: i18nStrings.emptyText,\n        noMatch: React.createElement(EmptyState, {\n          title: i18nStrings.noMatchTitle,\n          subtitle: i18nStrings.noMatchSubtitle,\n          action: React.createElement(InternalButton, {\n            onClick: function onClick() {\n              return actions.setFiltering('');\n            }\n          }, i18nStrings.clearFilterButtonText)\n        })\n      },\n      pagination: {},\n      sorting: {}\n    }),\n    items = _useCollection.items,\n    filteredItemsCount = _useCollection.filteredItemsCount,\n    collectionProps = _useCollection.collectionProps,\n    filterProps = _useCollection.filterProps,\n    paginationProps = _useCollection.paginationProps,\n    actions = _useCollection.actions;\n  var selectedItem = (_a = collectionProps.selectedItems) === null || _a === void 0 ? void 0 : _a[0];\n  // selectedItem can change internally inside the hook after pagination or filtering\n  // useEffect will capture all possible changes\n  useEffect(function () {\n    onSelectLatest(selectedItem);\n  }, [selectedItem, onSelectLatest]);\n  return React.createElement(InternalTable, Object.assign({\n    variant: isVisualRefresh ? 'borderless' : 'container'\n  }, collectionProps, {\n    header: React.createElement(InternalHeader, {\n      variant: isVisualRefresh ? 'h3' : 'h2',\n      headingTagOverride: 'h3',\n      actions: React.createElement(InternalButton, {\n        iconName: \"refresh\",\n        ariaLabel: i18nStrings.labelRefresh,\n        onClick: loadData\n      }),\n      counter: selectedItem ? \"(1/\".concat(allItems.length, \")\") : \"(\".concat(allItems.length, \")\")\n    }, i18nStrings.header),\n    trackBy: trackBy,\n    filter: React.createElement(InternalTextFilter, Object.assign({}, filterProps, {\n      ref: textFilterRef,\n      filteringAriaLabel: i18nStrings.filteringAriaLabel,\n      filteringClearAriaLabel: i18nStrings.filteringClearAriaLabel,\n      filteringPlaceholder: i18nStrings.filteringPlaceholder,\n      countText: i18nStrings.filteringCounterText ? i18nStrings.filteringCounterText(filteredItemsCount) : ''\n    })),\n    pagination: React.createElement(InternalPagination, Object.assign({}, paginationProps, {\n      ariaLabels: i18nStrings.labelsPagination\n    })),\n    selectionType: \"single\",\n    ariaLabels: i18nStrings.selectionLabels,\n    loading: loading,\n    loadingText: i18nStrings.loadingText,\n    items: items,\n    visibleColumns: visibleColumns,\n    isItemDisabled: isItemDisabled,\n    columnDefinitions: columnDefinitions\n  }));\n}","map":{"version":3,"mappings":"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","names":["React","useEffect","useState","useRef","useCollection","InternalButton","InternalHeader","InternalPagination","InternalTable","InternalTextFilter","useForwardFocus","EmptyState","useStableCallback","getSharedI18Strings","i18n","i18nStrings","filteringCounterText","format","count","labelRefresh","labelsPagination","noMatchTitle","filteringNoMatches","noMatchSubtitle","filteringCantFindMatch","clearFilterButtonText","filteringClearAriaLabel","labelClearFilter","BasicS3Table","forwardFocusRef","columnDefinitions","fetchData","trackBy","isVisualRefresh","visibleColumns","isItemDisabled","onSelect","loading","setLoading","allItems","setAllItems","textFilterRef","onSelectLatest","loadData","then","items","catch","selection","filtering","empty","emptyText","noMatch","title","subtitle","action","onClick","actions","setFiltering","pagination","sorting","filteredItemsCount","collectionProps","filterProps","paginationProps","selectedItem","selectedItems","variant","header","headingTagOverride","iconName","ariaLabel","counter","length","filter","ref","filteringAriaLabel","filteringPlaceholder","countText","ariaLabels","selectionType","selectionLabels","loadingText"],"sources":["/Users/tangyizhi/Desktop/Assignment2/frontend/node_modules/@cloudscape-design/components/s3-resource-selector/s3-modal/lib/default/s3-resource-selector/s3-modal/basic-table.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useCollection } from '@cloudscape-design/collection-hooks';\nimport { InternalButton } from '../../button/internal';\nimport InternalHeader from '../../header/internal';\nimport { PaginationProps } from '../../pagination/interfaces';\nimport InternalPagination from '../../pagination/internal';\nimport { TableProps } from '../../table/interfaces';\nimport InternalTable from '../../table/internal';\nimport { TextFilterProps } from '../../text-filter/interfaces';\nimport InternalTextFilter from '../../text-filter/internal';\nimport useForwardFocus, { ForwardFocusRef } from '../../internal/hooks/forward-focus';\nimport { S3ResourceSelectorProps } from '../interfaces';\nimport { EmptyState } from './empty-state';\nimport { ComponentFormatFunction } from '../../i18n/context';\nimport { useStableCallback } from '@cloudscape-design/component-toolkit/internal';\n\ninterface BasicS3TableStrings<T> {\n  labelRefresh?: string;\n  labelsPagination?: PaginationProps.Labels;\n  header?: string;\n  loadingText?: string;\n  filteringPlaceholder?: string;\n  filteringAriaLabel?: string;\n  filteringClearAriaLabel?: string;\n  filteringCounterText?: S3ResourceSelectorProps.I18nStrings['filteringCounterText'];\n  emptyText?: string;\n  noMatchTitle?: string;\n  noMatchSubtitle?: string;\n  clearFilterButtonText?: string;\n  selectionLabels?: TableProps.AriaLabels<T>;\n}\n\ninterface BasicS3TableProps<T> {\n  // We do not use idiomatic `ref` prop because it does not allow generics.\n  // Option 3 from this solution: https://stackoverflow.com/a/58473012/1297743\n  forwardFocusRef: React.Ref<ForwardFocusRef>;\n  columnDefinitions: ReadonlyArray<TableProps.ColumnDefinition<T>>;\n  fetchData: () => Promise<ReadonlyArray<T>>;\n  trackBy: TableProps.TrackBy<T>;\n  i18nStrings: BasicS3TableStrings<T>;\n  isVisualRefresh?: boolean;\n  visibleColumns: ReadonlyArray<string>;\n  isItemDisabled: TableProps.IsItemDisabled<T> | undefined;\n  onSelect: (item: T | undefined) => void;\n}\n\nexport function getSharedI18Strings(\n  i18n: ComponentFormatFunction<'s3-resource-selector'>,\n  i18nStrings: S3ResourceSelectorProps.I18nStrings | undefined\n) {\n  return {\n    filteringCounterText: i18n(\n      'i18nStrings.filteringCounterText',\n      i18nStrings?.filteringCounterText,\n      format => count => format({ count })\n    ),\n    labelRefresh: i18n('i18nStrings.labelRefresh', i18nStrings?.labelRefresh),\n    labelsPagination: i18nStrings?.labelsPagination,\n    noMatchTitle: i18n('i18nStrings.filteringNoMatches', i18nStrings?.filteringNoMatches),\n    noMatchSubtitle: i18n('i18nStrings.filteringCantFindMatch', i18nStrings?.filteringCantFindMatch),\n    clearFilterButtonText: i18n('i18nStrings.clearFilterButtonText', i18nStrings?.clearFilterButtonText),\n    filteringClearAriaLabel: i18nStrings?.labelClearFilter,\n  };\n}\n\nexport function BasicS3Table<T>({\n  forwardFocusRef,\n  columnDefinitions,\n  fetchData,\n  trackBy,\n  i18nStrings = {},\n  isVisualRefresh,\n  visibleColumns,\n  isItemDisabled,\n  onSelect,\n}: BasicS3TableProps<T>) {\n  const [loading, setLoading] = useState(false);\n  const [allItems, setAllItems] = useState<ReadonlyArray<T>>([]);\n  const textFilterRef = useRef<TextFilterProps.Ref>(null);\n  const onSelectLatest = useStableCallback(onSelect);\n\n  function loadData() {\n    setLoading(true);\n    fetchData()\n      .then(items => {\n        setAllItems(items);\n        setLoading(false);\n      })\n      .catch(() => {\n        // error handling should happen on the customer side, outside of this component\n        setLoading(false);\n      });\n  }\n\n  useEffect(() => {\n    loadData();\n    // Data loading is only happening on initial render, or via refresh button\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useForwardFocus(forwardFocusRef, textFilterRef);\n\n  const { items, filteredItemsCount, collectionProps, filterProps, paginationProps, actions } = useCollection(\n    allItems,\n    {\n      selection: { trackBy },\n      filtering: {\n        empty: i18nStrings.emptyText,\n        noMatch: (\n          <EmptyState\n            title={i18nStrings.noMatchTitle}\n            subtitle={i18nStrings.noMatchSubtitle}\n            action={\n              <InternalButton onClick={() => actions.setFiltering('')}>\n                {i18nStrings.clearFilterButtonText}\n              </InternalButton>\n            }\n          />\n        ),\n      },\n      pagination: {},\n      sorting: {},\n    }\n  );\n  const selectedItem = collectionProps.selectedItems?.[0];\n\n  // selectedItem can change internally inside the hook after pagination or filtering\n  // useEffect will capture all possible changes\n  useEffect(() => {\n    onSelectLatest(selectedItem);\n  }, [selectedItem, onSelectLatest]);\n\n  return (\n    <InternalTable<T>\n      variant={isVisualRefresh ? 'borderless' : 'container'}\n      {...collectionProps}\n      header={\n        <InternalHeader\n          variant={isVisualRefresh ? 'h3' : 'h2'}\n          headingTagOverride={'h3'}\n          actions={<InternalButton iconName=\"refresh\" ariaLabel={i18nStrings.labelRefresh} onClick={loadData} />}\n          counter={selectedItem ? `(1/${allItems.length})` : `(${allItems.length})`}\n        >\n          {i18nStrings.header}\n        </InternalHeader>\n      }\n      trackBy={trackBy}\n      filter={\n        <InternalTextFilter\n          {...filterProps}\n          ref={textFilterRef}\n          filteringAriaLabel={i18nStrings.filteringAriaLabel}\n          filteringClearAriaLabel={i18nStrings.filteringClearAriaLabel}\n          filteringPlaceholder={i18nStrings.filteringPlaceholder}\n          countText={i18nStrings.filteringCounterText ? i18nStrings.filteringCounterText(filteredItemsCount!) : ''}\n        />\n      }\n      pagination={<InternalPagination {...paginationProps} ariaLabels={i18nStrings.labelsPagination} />}\n      selectionType=\"single\"\n      ariaLabels={i18nStrings.selectionLabels}\n      loading={loading}\n      loadingText={i18nStrings.loadingText}\n      items={items}\n      visibleColumns={visibleColumns}\n      isItemDisabled={isItemDisabled}\n      columnDefinitions={columnDefinitions}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}