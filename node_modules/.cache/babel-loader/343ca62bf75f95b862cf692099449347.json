{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useMergeRefs } from '../../internal/hooks/use-merge-refs';\nimport React, { forwardRef, useCallback, useImperativeHandle, useRef } from 'react';\nimport OptionsList from '../../internal/components/options-list';\nimport { renderOptions } from '../utils/render-options';\nimport styles from './styles.css.js';\nimport { useVirtual } from '../../internal/hooks/use-virtual';\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\nconst VirtualList = (props, ref) => {\n  return props.menuProps.open ? React.createElement(VirtualListOpen, Object.assign({}, props, {\n    ref: ref\n  })) : React.createElement(VirtualListClosed, Object.assign({}, props, {\n    ref: ref\n  }));\n};\nconst VirtualListOpen = forwardRef((_ref, ref) => {\n  let {\n    menuProps,\n    getOptionProps,\n    filteredOptions,\n    filteringValue,\n    highlightType,\n    checkboxes,\n    hasDropdownStatus,\n    listBottom,\n    useInteractiveGroups,\n    screenReaderContent\n  } = _ref;\n  // update component, when it gets wider or narrower to reposition items\n  const [width, menuMeasureRef] = useContainerQuery(rect => rect.contentBoxWidth, []);\n  const menuRefObject = useRef(null);\n  const menuRef = useMergeRefs(menuMeasureRef, menuRefObject, menuProps.ref);\n  const {\n    virtualItems,\n    totalSize,\n    scrollToIndex\n  } = useVirtual({\n    items: filteredOptions,\n    parentRef: menuRefObject,\n    // estimateSize is a dependency of measurements memo. We update it to force full recalculation\n    // when the height of any option could have changed:\n    // 1: because the component got resized (width property got updated)\n    // 2: because the option changed its content (filteringValue property controls the highlight and the visibility of hidden tags)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    estimateSize: useCallback(() => 31, [width, filteringValue])\n  });\n  useImperativeHandle(ref, () => index => {\n    if (highlightType === 'keyboard') {\n      scrollToIndex(index);\n    }\n  }, [highlightType, scrollToIndex]);\n  const finalOptions = renderOptions({\n    options: virtualItems.map(_ref2 => {\n      let {\n        index\n      } = _ref2;\n      return filteredOptions[index];\n    }),\n    getOptionProps,\n    filteringValue,\n    highlightType,\n    checkboxes,\n    hasDropdownStatus,\n    virtualItems,\n    useInteractiveGroups,\n    screenReaderContent,\n    ariaSetsize: filteredOptions.length\n  });\n  return React.createElement(OptionsList, Object.assign({}, menuProps, {\n    ref: menuRef\n  }), React.createElement(\"div\", {\n    \"aria-hidden\": \"true\",\n    key: \"total-size\",\n    className: styles['layout-strut'],\n    style: {\n      height: totalSize\n    }\n  }), finalOptions, listBottom ? React.createElement(\"li\", {\n    role: \"option\",\n    className: styles['list-bottom']\n  }, listBottom) : null);\n});\nconst VirtualListClosed = forwardRef((_ref3, ref) => {\n  let {\n    menuProps,\n    listBottom\n  } = _ref3;\n  useImperativeHandle(ref, () => () => {}, []);\n  return React.createElement(OptionsList, Object.assign({}, menuProps, {\n    ref: menuProps.ref\n  }), listBottom ? React.createElement(\"li\", {\n    role: \"option\",\n    className: styles['list-bottom']\n  }, listBottom) : null);\n});\nexport default forwardRef(VirtualList);","map":{"version":3,"mappings":"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","names":["useMergeRefs","React","forwardRef","useCallback","useImperativeHandle","useRef","OptionsList","renderOptions","styles","useVirtual","useContainerQuery","VirtualList","props","ref","menuProps","open","VirtualListOpen","VirtualListClosed","getOptionProps","filteredOptions","filteringValue","highlightType","checkboxes","hasDropdownStatus","listBottom","useInteractiveGroups","screenReaderContent","width","menuMeasureRef","rect","contentBoxWidth","menuRefObject","menuRef","virtualItems","totalSize","scrollToIndex","items","parentRef","estimateSize","index","finalOptions","options","map","ariaSetsize","length","key","className","style","height","role"],"sources":["/Users/tangyizhi/Desktop/Assignment 2/frontend/node_modules/@cloudscape-design/components/select/parts/lib/default/select/parts/virtual-list.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useMergeRefs } from '../../internal/hooks/use-merge-refs';\nimport React, { forwardRef, useCallback, useImperativeHandle, useRef } from 'react';\nimport OptionsList from '../../internal/components/options-list';\nimport { renderOptions } from '../utils/render-options';\nimport { SelectListProps } from './plain-list';\n\nimport styles from './styles.css.js';\nimport { useVirtual } from '../../internal/hooks/use-virtual';\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\n\nconst VirtualList = (props: SelectListProps, ref: React.Ref<SelectListProps.SelectListRef>) => {\n  return props.menuProps.open ? <VirtualListOpen {...props} ref={ref} /> : <VirtualListClosed {...props} ref={ref} />;\n};\n\nconst VirtualListOpen = forwardRef(\n  (\n    {\n      menuProps,\n      getOptionProps,\n      filteredOptions,\n      filteringValue,\n      highlightType,\n      checkboxes,\n      hasDropdownStatus,\n      listBottom,\n      useInteractiveGroups,\n      screenReaderContent,\n    }: SelectListProps,\n    ref: React.Ref<SelectListProps.SelectListRef>\n  ) => {\n    // update component, when it gets wider or narrower to reposition items\n    const [width, menuMeasureRef] = useContainerQuery(rect => rect.contentBoxWidth, []);\n    const menuRefObject = useRef(null);\n    const menuRef = useMergeRefs(menuMeasureRef, menuRefObject, menuProps.ref);\n\n    const { virtualItems, totalSize, scrollToIndex } = useVirtual({\n      items: filteredOptions,\n      parentRef: menuRefObject,\n      // estimateSize is a dependency of measurements memo. We update it to force full recalculation\n      // when the height of any option could have changed:\n      // 1: because the component got resized (width property got updated)\n      // 2: because the option changed its content (filteringValue property controls the highlight and the visibility of hidden tags)\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      estimateSize: useCallback(() => 31, [width, filteringValue]),\n    });\n\n    useImperativeHandle(\n      ref,\n      () => (index: number) => {\n        if (highlightType === 'keyboard') {\n          scrollToIndex(index);\n        }\n      },\n      [highlightType, scrollToIndex]\n    );\n    const finalOptions = renderOptions({\n      options: virtualItems.map(({ index }) => filteredOptions[index]),\n      getOptionProps,\n      filteringValue,\n      highlightType,\n      checkboxes,\n      hasDropdownStatus,\n      virtualItems,\n      useInteractiveGroups,\n      screenReaderContent,\n      ariaSetsize: filteredOptions.length,\n    });\n\n    return (\n      <OptionsList {...menuProps} ref={menuRef}>\n        <div aria-hidden=\"true\" key=\"total-size\" className={styles['layout-strut']} style={{ height: totalSize }} />\n        {finalOptions}\n        {listBottom ? (\n          <li role=\"option\" className={styles['list-bottom']}>\n            {listBottom}\n          </li>\n        ) : null}\n      </OptionsList>\n    );\n  }\n);\n\nconst VirtualListClosed = forwardRef(\n  ({ menuProps, listBottom }: SelectListProps, ref: React.Ref<SelectListProps.SelectListRef>) => {\n    useImperativeHandle(ref, () => () => {}, []);\n    return (\n      <OptionsList {...menuProps} ref={menuProps.ref}>\n        {listBottom ? (\n          <li role=\"option\" className={styles['list-bottom']}>\n            {listBottom}\n          </li>\n        ) : null}\n      </OptionsList>\n    );\n  }\n);\n\nexport default forwardRef(VirtualList);\n"]},"metadata":{},"sourceType":"module"}