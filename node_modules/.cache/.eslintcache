[{"/Users/tangyizhi/Desktop/Assignment2/frontend/src/index.js":"1","/Users/tangyizhi/Desktop/Assignment2/frontend/src/App.js":"2","/Users/tangyizhi/Desktop/Assignment2/frontend/src/searchPhotos.js":"3","/Users/tangyizhi/Desktop/Assignment2/frontend/src/uploadTab.js":"4","/Users/tangyizhi/Desktop/Assignment2/frontend/src/ChangableAttributeEditor.js":"5"},{"size":220,"mtime":1698519077848,"results":"6","hashOfConfig":"7"},{"size":3166,"mtime":1698524144480,"results":"8","hashOfConfig":"7"},{"size":4645,"mtime":1699598346269,"results":"9","hashOfConfig":"7"},{"size":3280,"mtime":1699595829965,"results":"10","hashOfConfig":"7"},{"size":1698,"mtime":1699590464837,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","suppressedMessages":"14","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"jcxqc7",{"filePath":"15","messages":"16","suppressedMessages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18"},{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22"},{"filePath":"23","messages":"24","suppressedMessages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26"},{"filePath":"27","messages":"28","suppressedMessages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30"},"/Users/tangyizhi/Desktop/Assignment2/frontend/src/index.js",[],[],"/Users/tangyizhi/Desktop/Assignment2/frontend/src/App.js",["31","32"],[],"/*\n** React CORS friendly Single Page Application - https://github.com/aws-samples/react-cors-spa \nCopyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\ndocumentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\nthe rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,\nand to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of\nthe Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\nWARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport logo from './logo.svg';\nimport logoS3 from './logoS3.png';\nimport logoCF from './logoCloudFront.png';\nimport './App.css';\nimport { useFetch } from \"react-async\"\n\nimport * as React from \"react\";\nimport ContentLayout from \"@cloudscape-design/components/content-layout\";\nimport Header from \"@cloudscape-design/components/header\";\nimport SpaceBetween from \"@cloudscape-design/components/space-between\";\nimport Tabs from \"@cloudscape-design/components/tabs\";\nimport UploadPhotos from \"./uploadTab\";\nimport SearchPhotos from \"./searchPhotos\";\n\n\n// To be replaced by the endpoint of the API deployed through the CloudFormation Template\nconst APIEndPoint = 'to be replaced with your api endpoint here'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <header className=\"App-header\">\n          {APIEndPoint.startsWith('http') &&\n            <APIResult />\n          }\n          <img src={logo} className=\"App-MainLogo\" alt=\"logo\" />\n        </header>\n\n        <ContentLayout\n        header={\n          <SpaceBetween size=\"m\">\n            <Header\n              variant=\"h1\"\n              description=\"A photo album web application that can be searched using natural language through both text and voice.\"\n            >\n              Photo Album Search\n            </Header>\n          </SpaceBetween>\n        }\n      >\n        <Tabs\n          tabs={[\n            {\n              label: \"Upload Photos\",\n              id: \"first\",\n              content: <UploadPhotos />\n            },\n            {\n              label: \"Search Photos\",\n              id: \"second\",\n              content: <SearchPhotos />\n            },\n          ]}\n          variant=\"container\"\n        />\n      </ContentLayout>\n    </div>\n  );\n}\n\nconst APIResult = () => {\n  const { data, error } = useFetch(APIEndPoint, {\n    headers: { accept: \"application/json\" },\n  })\n  if (error) return <p>{error.message}</p>\n  if (data) return <p>{data.message}</p>\n  return null\n}\n\nexport default App;\n","/Users/tangyizhi/Desktop/Assignment2/frontend/src/searchPhotos.js",["33","34","35","36","37","38","39","40","41","42","43","44","45"],[],"import * as React from \"react\";\nimport ContentLayout from \"@cloudscape-design/components/content-layout\";\nimport Container from \"@cloudscape-design/components/container\";\nimport Header from \"@cloudscape-design/components/header\";\nimport SpaceBetween from \"@cloudscape-design/components/space-between\";\nimport Link from \"@cloudscape-design/components/link\";\nimport Button from \"@cloudscape-design/components/button\";\nimport Alert from \"@cloudscape-design/components/alert\";\nimport FileUpload from \"@cloudscape-design/components/file-upload\";\nimport FormField from \"@cloudscape-design/components/form-field\";\nimport AttributeEditor from \"@cloudscape-design/components/attribute-editor\";\nimport Input from \"@cloudscape-design/components/input\";\nimport Tabs from \"@cloudscape-design/components/tabs\";\nimport AttributeEditorExample from \"./ChangableAttributeEditor\";\nimport TextContent from \"@cloudscape-design/components/text-content\";\nimport Cards from \"@cloudscape-design/components/cards\";\nimport Box from \"@cloudscape-design/components/box\";\n\nimport logoS3 from './logoS3.png';\nimport logoCF from './logoCloudFront.png';\n\nimport SpeechRecognition, { useSpeechRecognition } from \"react-speech-recognition\";\n\n\nexport default function SearchPhotos() {\n    const [query, setQuery] = React.useState(\"\");\n    const { transcript, resetTranscript } = useSpeechRecognition();\n    const [items, setItems] = React.useState([]);\n\n    function startRecording() {\n        resetTranscript();\n        SpeechRecognition.startListening({\n            continuous: true,\n        });\n    }\n    function stopRecording() {\n        SpeechRecognition.stopListening();\n        setQuery(transcript);\n        resetTranscript();\n    }\n\n    function sendRequest() {\n        // send requests to backend\n        var url = \"https://aqc18ezxgh.execute-api.us-east-1.amazonaws.com/GET_OK/search?q=\";\n        url += query;\n        console.log(\"sending requests to\", url);\n        const requestOptions = {\n          method: 'GET',\n          headers: { 'Content-Type': 'application/json' },\n        };\n        fetch(url, requestOptions)\n            .then((response) => {\n                return response.json();\n            })\n            .then((json_response)=>{\n                var all_photos = [];\n                console.log(Object.keys(json_response), json_response['list']);\n                for(var i = 0; i < json_response['list'].length; ++i){\n                    all_photos.push({\n                        name: \"\",\n                        description: json_response['list'][i],\n                    });\n                }\n                setItems(all_photos)\n                console.log(all_photos, items);\n            });\n    };\n\n    return (\n        <SpaceBetween size='m'>\n            <TextContent>\n                <p>\n                    <strong>Please enter your search query, or use the button below to transcribe from voice</strong>\n                </p>\n            </TextContent>\n            <Input\n                onChange={({ detail }) => setQuery(detail.value)}\n                value={query}\n                placeholder=\"Please enter your search query\"\n                type=\"search\"\n            />\n            <SpaceBetween size=\"m\" direction=\"horizontal\">\n                <Button onClick={startRecording}>Start Recording</Button>\n                <Button onClick={stopRecording}>Stop Recording</Button>\n            </SpaceBetween>\n            <Button variant=\"primary\" onClick={sendRequest}>Submit Search Query</Button>\n            <TextContent>\n                <p>\n                    <strong>Search Results are displayed below</strong>\n                </p>\n            </TextContent>\n            <Cards\n                cardDefinition={{\n                    header: item => (item.name),\n                    sections: [\n                    {\n                        id: \"description\",\n                        content: item => (<img src={item.description} width=\"100\" height=\"100\"/>)\n                    },\n                    ]\n                }}\n                cardsPerRow={[\n                    { cards: 1 },\n                    { minWidth: 500, cards: 2 }\n                ]}\n                items={items}\n                loadingText=\"Loading photos\"\n                empty={\n                    <Box\n                    margin={{ vertical: \"xs\" }}\n                    textAlign=\"center\"\n                    color=\"inherit\"\n                    >\n                    <SpaceBetween size=\"m\">\n                        <b>No Photos Found</b>\n                    </SpaceBetween>\n                    </Box>\n                }\n            />\n        </SpaceBetween>\n    );\n}","/Users/tangyizhi/Desktop/Assignment2/frontend/src/uploadTab.js",["46","47","48","49","50","51","52","53","54","55"],[],"import React, { useState } from 'react';\nimport axios from 'axios';\nimport ContentLayout from \"@cloudscape-design/components/content-layout\";\nimport Container from \"@cloudscape-design/components/container\";\nimport Header from \"@cloudscape-design/components/header\";\nimport SpaceBetween from \"@cloudscape-design/components/space-between\";\nimport Link from \"@cloudscape-design/components/link\";\nimport Button from \"@cloudscape-design/components/button\";\nimport Alert from \"@cloudscape-design/components/alert\";\nimport FileUpload from \"@cloudscape-design/components/file-upload\";\nimport FormField from \"@cloudscape-design/components/form-field\";\nimport AttributeEditor from \"@cloudscape-design/components/attribute-editor\";\nimport Input from \"@cloudscape-design/components/input\";\nimport Tabs from \"@cloudscape-design/components/tabs\";\nimport AttributeEditorExample from \"./ChangableAttributeEditor\";\n\nexport default function UploadPhotos() {\n\n    const [photo, setPhoto] = React.useState([]);\n\n    const [items, setItems] = useState([\n      { label: '',},\n    ]);\n\n    function handleSubmit(event) {\n      event.preventDefault()\n      var url = 'https://aqc18ezxgh.execute-api.us-east-1.amazonaws.com/GET_OK/b2-photos/';\n      url = url + photo[0].name;\n      var labels = \"\";\n      for(var i = 0; i < items.length; ++i){\n        if(items[i].key != \"\"){\n          labels = labels + items[i].key + \",\";\n        }\n      }\n      if(labels[labels.length-1] == ','){\n        labels = labels.substring(0,labels.length-1);\n      }\n      const config = {\n        headers: {\n          'content-type': 'image/png',\n          'x-amz-meta-customLabels': labels,\n        },\n      };\n      console.log(\"sending request to\", url, \"with labels:\", labels);\n      axios.put(url, photo[0], config).then((response) => {\n        console.log(response.data);\n      });\n    }\n\n    return (\n        <SpaceBetween size='m'>\n            <FormField\n              label=\"Upload photos\"\n              description=\"Please upload photos, and don't forget to add one or more labels for this photo\"\n            >\n              <FileUpload\n                onChange={({ detail }) => setPhoto(detail.value)}\n                value={photo}\n                i18nStrings={{\n                  uploadButtonText: e =>\n                    e ? \"Choose files\" : \"Choose photo\",\n                  dropzoneText: e =>\n                    e\n                      ? \"Drop files to upload\"\n                      : \"Drop file to upload\",\n                  removeFileAriaLabel: e =>\n                    `Remove file ${e + 1}`,\n                  limitShowFewer: \"Show fewer files\",\n                  limitShowMore: \"Show more files\",\n                  errorIconAriaLabel: \"Error\"\n                }}\n                showFileLastModified\n                showFileSize\n                showFileThumbnail\n                tokenLimit={3}\n                constraintText={\n                  <React.Fragment>\n                    Please upload photos only\n                  </React.Fragment>\n                }\n              />\n            </FormField>\n            <AttributeEditorExample items={items} setItems={setItems}/>\n            <Button variant=\"primary\" onClick={handleSubmit}>Submit Photos and Labels</Button>\n        </SpaceBetween>\n    );\n}","/Users/tangyizhi/Desktop/Assignment2/frontend/src/ChangableAttributeEditor.js",["56","57","58","59","60"],[],"import React, { useState, useCallback, useMemo } from 'react';\nimport { AttributeEditor, Input, Link } from '@cloudscape-design/components';\n\nconst i18nStrings = {\n  addButtonText: 'Add new label',\n  removeButtonText: 'Remove',\n  empty: 'No labels added yet',\n};\n\nconst Control = React.memo(({ value, index, placeholder, setItems, prop }) => {\n  return (\n    <Input\n      value={value}\n      placeholder={placeholder}\n      onChange={({ detail }) => {\n        setItems(items => {\n          const updatedItems = [...items];\n          updatedItems[index] = {\n            ...updatedItems[index],\n            [prop]: detail.value,\n          };\n          return updatedItems;\n        });\n      }}\n    />\n  );\n});\n\n// TODO: label cannot be empty upon submission, check this: https://cloudscape.design/components/attribute-editor/?tabId=api\nexport default function AttributeEditorExample({items, setItems}) {\n  \n\n  const definition = useMemo(\n    () => [\n      {\n        label: 'Label',\n        control: ({ key = '' }, itemIndex) => (\n          <Control prop=\"key\" value={key} index={itemIndex} placeholder=\"Enter Label\" setItems={setItems} />\n        ),\n      },\n    ],\n    []\n  );\n\n  const onAddButtonClick = useCallback(() => {\n    setItems(items => [...items, {}]);\n  }, []);\n\n  const onRemoveButtonClick = useCallback(({ detail: { itemIndex } }) => {\n    setItems(items => {\n      const newItems = items.slice();\n      newItems.splice(itemIndex, 1);\n      return newItems;\n    });\n  }, []);\n\n  return (\n    <AttributeEditor\n      {...i18nStrings}\n      items={items}\n      definition={definition}\n      onAddButtonClick={onAddButtonClick}\n      onRemoveButtonClick={onRemoveButtonClick}\n    />\n  );\n}",{"ruleId":"61","severity":1,"message":"62","line":20,"column":8,"nodeType":"63","messageId":"64","endLine":20,"endColumn":14},{"ruleId":"61","severity":1,"message":"65","line":21,"column":8,"nodeType":"63","messageId":"64","endLine":21,"endColumn":14},{"ruleId":"61","severity":1,"message":"66","line":2,"column":8,"nodeType":"63","messageId":"64","endLine":2,"endColumn":21},{"ruleId":"61","severity":1,"message":"67","line":3,"column":8,"nodeType":"63","messageId":"64","endLine":3,"endColumn":17},{"ruleId":"61","severity":1,"message":"68","line":4,"column":8,"nodeType":"63","messageId":"64","endLine":4,"endColumn":14},{"ruleId":"61","severity":1,"message":"69","line":6,"column":8,"nodeType":"63","messageId":"64","endLine":6,"endColumn":12},{"ruleId":"61","severity":1,"message":"70","line":8,"column":8,"nodeType":"63","messageId":"64","endLine":8,"endColumn":13},{"ruleId":"61","severity":1,"message":"71","line":9,"column":8,"nodeType":"63","messageId":"64","endLine":9,"endColumn":18},{"ruleId":"61","severity":1,"message":"72","line":10,"column":8,"nodeType":"63","messageId":"64","endLine":10,"endColumn":17},{"ruleId":"61","severity":1,"message":"73","line":11,"column":8,"nodeType":"63","messageId":"64","endLine":11,"endColumn":23},{"ruleId":"61","severity":1,"message":"74","line":13,"column":8,"nodeType":"63","messageId":"64","endLine":13,"endColumn":12},{"ruleId":"61","severity":1,"message":"75","line":14,"column":8,"nodeType":"63","messageId":"64","endLine":14,"endColumn":30},{"ruleId":"61","severity":1,"message":"62","line":19,"column":8,"nodeType":"63","messageId":"64","endLine":19,"endColumn":14},{"ruleId":"61","severity":1,"message":"65","line":20,"column":8,"nodeType":"63","messageId":"64","endLine":20,"endColumn":14},{"ruleId":"76","severity":1,"message":"77","line":98,"column":43,"nodeType":"78","endLine":98,"endColumn":97},{"ruleId":"61","severity":1,"message":"66","line":3,"column":8,"nodeType":"63","messageId":"64","endLine":3,"endColumn":21},{"ruleId":"61","severity":1,"message":"67","line":4,"column":8,"nodeType":"63","messageId":"64","endLine":4,"endColumn":17},{"ruleId":"61","severity":1,"message":"68","line":5,"column":8,"nodeType":"63","messageId":"64","endLine":5,"endColumn":14},{"ruleId":"61","severity":1,"message":"69","line":7,"column":8,"nodeType":"63","messageId":"64","endLine":7,"endColumn":12},{"ruleId":"61","severity":1,"message":"70","line":9,"column":8,"nodeType":"63","messageId":"64","endLine":9,"endColumn":13},{"ruleId":"61","severity":1,"message":"73","line":12,"column":8,"nodeType":"63","messageId":"64","endLine":12,"endColumn":23},{"ruleId":"61","severity":1,"message":"79","line":13,"column":8,"nodeType":"63","messageId":"64","endLine":13,"endColumn":13},{"ruleId":"61","severity":1,"message":"74","line":14,"column":8,"nodeType":"63","messageId":"64","endLine":14,"endColumn":12},{"ruleId":"80","severity":1,"message":"81","line":31,"column":25,"nodeType":"82","messageId":"83","endLine":31,"endColumn":27},{"ruleId":"80","severity":1,"message":"84","line":35,"column":34,"nodeType":"82","messageId":"83","endLine":35,"endColumn":36},{"ruleId":"61","severity":1,"message":"85","line":1,"column":17,"nodeType":"63","messageId":"64","endLine":1,"endColumn":25},{"ruleId":"61","severity":1,"message":"69","line":2,"column":34,"nodeType":"63","messageId":"64","endLine":2,"endColumn":38},{"ruleId":"86","severity":1,"message":"87","line":42,"column":5,"nodeType":"88","endLine":42,"endColumn":7,"suggestions":"89"},{"ruleId":"86","severity":1,"message":"90","line":47,"column":6,"nodeType":"88","endLine":47,"endColumn":8,"suggestions":"91"},{"ruleId":"86","severity":1,"message":"90","line":55,"column":6,"nodeType":"88","endLine":55,"endColumn":8,"suggestions":"92"},"no-unused-vars","'logoS3' is defined but never used.","Identifier","unusedVar","'logoCF' is defined but never used.","'ContentLayout' is defined but never used.","'Container' is defined but never used.","'Header' is defined but never used.","'Link' is defined but never used.","'Alert' is defined but never used.","'FileUpload' is defined but never used.","'FormField' is defined but never used.","'AttributeEditor' is defined but never used.","'Tabs' is defined but never used.","'AttributeEditorExample' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'Input' is defined but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","Expected '===' and instead saw '=='.","'useState' is defined but never used.","react-hooks/exhaustive-deps","React Hook useMemo has a missing dependency: 'setItems'. Either include it or remove the dependency array.","ArrayExpression",["93"],"React Hook useCallback has a missing dependency: 'setItems'. Either include it or remove the dependency array. If 'setItems' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["94"],["95"],{"desc":"96","fix":"97"},{"desc":"96","fix":"98"},{"desc":"96","fix":"99"},"Update the dependencies array to be: [setItems]",{"range":"100","text":"101"},{"range":"102","text":"101"},{"range":"103","text":"101"},[1168,1170],"[setItems]",[1268,1270],[1484,1486]]